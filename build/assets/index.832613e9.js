var tb=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var vD=tb(am=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var rn={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vu=Symbol.for("react.element"),nb=Symbol.for("react.portal"),rb=Symbol.for("react.fragment"),ib=Symbol.for("react.strict_mode"),ab=Symbol.for("react.profiler"),ob=Symbol.for("react.provider"),sb=Symbol.for("react.context"),lb=Symbol.for("react.forward_ref"),ub=Symbol.for("react.suspense"),cb=Symbol.for("react.memo"),fb=Symbol.for("react.lazy"),Ng=Symbol.iterator;function hb(e){return e===null||typeof e!="object"?null:(e=Ng&&e[Ng]||e["@@iterator"],typeof e=="function"?e:null)}var ow={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sw=Object.assign,lw={};function ss(e,t,n){this.props=e,this.context=t,this.refs=lw,this.updater=n||ow}ss.prototype.isReactComponent={};ss.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ss.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function uw(){}uw.prototype=ss.prototype;function om(e,t,n){this.props=e,this.context=t,this.refs=lw,this.updater=n||ow}var sm=om.prototype=new uw;sm.constructor=om;sw(sm,ss.prototype);sm.isPureReactComponent=!0;var kg=Array.isArray,cw=Object.prototype.hasOwnProperty,lm={current:null},fw={key:!0,ref:!0,__self:!0,__source:!0};function hw(e,t,n){var r,i={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)cw.call(t,r)&&!fw.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:vu,type:e,key:a,ref:o,props:i,_owner:lm.current}}function db(e,t){return{$$typeof:vu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function um(e){return typeof e=="object"&&e!==null&&e.$$typeof===vu}function pb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Fg=/\/+/g;function Xh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?pb(""+e.key):t.toString(36)}function Nc(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case vu:case nb:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Xh(o,0):r,kg(i)?(n="",e!=null&&(n=e.replace(Fg,"$&/")+"/"),Nc(i,t,n,"",function(u){return u})):i!=null&&(um(i)&&(i=db(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Fg,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",kg(e))for(var s=0;s<e.length;s++){a=e[s];var l=r+Xh(a,s);o+=Nc(a,t,n,l,i)}else if(l=hb(e),typeof l=="function")for(e=l.call(e),s=0;!(a=e.next()).done;)a=a.value,l=r+Xh(a,s++),o+=Nc(a,t,n,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Au(e,t,n){if(e==null)return e;var r=[],i=0;return Nc(e,r,"","",function(a){return t.call(n,a,i++)}),r}function vb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Kt={current:null},kc={transition:null},mb={ReactCurrentDispatcher:Kt,ReactCurrentBatchConfig:kc,ReactCurrentOwner:lm};function dw(){throw Error("act(...) is not supported in production builds of React.")}qe.Children={map:Au,forEach:function(e,t,n){Au(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Au(e,function(){t++}),t},toArray:function(e){return Au(e,function(t){return t})||[]},only:function(e){if(!um(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};qe.Component=ss;qe.Fragment=rb;qe.Profiler=ab;qe.PureComponent=om;qe.StrictMode=ib;qe.Suspense=ub;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mb;qe.act=dw;qe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sw({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=lm.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)cw.call(t,l)&&!fw.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:vu,type:e.type,key:i,ref:a,props:r,_owner:o}};qe.createContext=function(e){return e={$$typeof:sb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ob,_context:e},e.Consumer=e};qe.createElement=hw;qe.createFactory=function(e){var t=hw.bind(null,e);return t.type=e,t};qe.createRef=function(){return{current:null}};qe.forwardRef=function(e){return{$$typeof:lb,render:e}};qe.isValidElement=um;qe.lazy=function(e){return{$$typeof:fb,_payload:{_status:-1,_result:e},_init:vb}};qe.memo=function(e,t){return{$$typeof:cb,type:e,compare:t===void 0?null:t}};qe.startTransition=function(e){var t=kc.transition;kc.transition={};try{e()}finally{kc.transition=t}};qe.unstable_act=dw;qe.useCallback=function(e,t){return Kt.current.useCallback(e,t)};qe.useContext=function(e){return Kt.current.useContext(e)};qe.useDebugValue=function(){};qe.useDeferredValue=function(e){return Kt.current.useDeferredValue(e)};qe.useEffect=function(e,t){return Kt.current.useEffect(e,t)};qe.useId=function(){return Kt.current.useId()};qe.useImperativeHandle=function(e,t,n){return Kt.current.useImperativeHandle(e,t,n)};qe.useInsertionEffect=function(e,t){return Kt.current.useInsertionEffect(e,t)};qe.useLayoutEffect=function(e,t){return Kt.current.useLayoutEffect(e,t)};qe.useMemo=function(e,t){return Kt.current.useMemo(e,t)};qe.useReducer=function(e,t,n){return Kt.current.useReducer(e,t,n)};qe.useRef=function(e){return Kt.current.useRef(e)};qe.useState=function(e){return Kt.current.useState(e)};qe.useSyncExternalStore=function(e,t,n){return Kt.current.useSyncExternalStore(e,t,n)};qe.useTransition=function(){return Kt.current.useTransition()};qe.version="18.3.1";(function(e){e.exports=qe})(rn);var pw={exports:{}},Pn={},vw={exports:{}},mw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,V){var j=z.length;z.push(V);e:for(;0<j;){var q=j-1>>>1,K=z[q];if(0<i(K,V))z[q]=V,z[j]=K,j=q;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var V=z[0],j=z.pop();if(j!==V){z[0]=j;e:for(var q=0,K=z.length,Pe=K>>>1;q<Pe;){var H=2*(q+1)-1,ue=z[H],te=H+1,de=z[te];if(0>i(ue,j))te<K&&0>i(de,ue)?(z[q]=de,z[te]=j,q=te):(z[q]=ue,z[H]=j,q=H);else if(te<K&&0>i(de,j))z[q]=de,z[te]=j,q=te;else break e}}return V}function i(z,V){var j=z.sortIndex-V.sortIndex;return j!==0?j:z.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,f=null,h=3,d=!1,p=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(z){for(var V=n(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=z)r(u),V.sortIndex=V.expirationTime,t(l,V);else break;V=n(u)}}function g(z){if(x=!1,w(z),!p)if(n(l)!==null)p=!0,W(_);else{var V=n(u);V!==null&&Y(g,V.startTime-z)}}function _(z,V){p=!1,x&&(x=!1,v(S),S=-1),d=!0;var j=h;try{for(w(V),f=n(l);f!==null&&(!(f.expirationTime>V)||z&&!L());){var q=f.callback;if(typeof q=="function"){f.callback=null,h=f.priorityLevel;var K=q(f.expirationTime<=V);V=e.unstable_now(),typeof K=="function"?f.callback=K:f===n(l)&&r(l),w(V)}else r(l);f=n(l)}if(f!==null)var Pe=!0;else{var H=n(u);H!==null&&Y(g,H.startTime-V),Pe=!1}return Pe}finally{f=null,h=j,d=!1}}var b=!1,E=null,S=-1,O=5,D=-1;function L(){return!(e.unstable_now()-D<O)}function R(){if(E!==null){var z=e.unstable_now();D=z;var V=!0;try{V=E(!0,z)}finally{V?N():(b=!1,E=null)}}else b=!1}var N;if(typeof m=="function")N=function(){m(R)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,G=B.port2;B.port1.onmessage=R,N=function(){G.postMessage(null)}}else N=function(){y(R,0)};function W(z){E=z,b||(b=!0,N())}function Y(z,V){S=y(function(){z(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){p||d||(p=!0,W(_))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(z){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var j=h;h=V;try{return z()}finally{h=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,V){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var j=h;h=z;try{return V()}finally{h=j}},e.unstable_scheduleCallback=function(z,V,j){var q=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?q+j:q):j=q,z){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=j+K,z={id:c++,callback:V,priorityLevel:z,startTime:j,expirationTime:K,sortIndex:-1},j>q?(z.sortIndex=j,t(u,z),n(l)===null&&z===n(u)&&(x?(v(S),S=-1):x=!0,Y(g,j-q))):(z.sortIndex=K,t(l,z),p||d||(p=!0,W(_))),z},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(z){var V=h;return function(){var j=h;h=V;try{return z.apply(this,arguments)}finally{h=j}}}})(mw);(function(e){e.exports=mw})(vw);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gb=rn.exports,_n=vw.exports;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gw=new Set,ol={};function Na(e,t){Co(e,t),Co(e+"Capture",t)}function Co(e,t){for(ol[e]=t,e=0;e<t.length;e++)gw.add(t[e])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lp=Object.prototype.hasOwnProperty,yb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zg={},Bg={};function xb(e){return lp.call(Bg,e)?!0:lp.call(zg,e)?!1:yb.test(e)?Bg[e]=!0:(zg[e]=!0,!1)}function wb(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _b(e,t,n,r){if(t===null||typeof t>"u"||wb(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function en(e,t,n,r,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zt[e]=new en(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];zt[t]=new en(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zt[e]=new en(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zt[e]=new en(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zt[e]=new en(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zt[e]=new en(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zt[e]=new en(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zt[e]=new en(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zt[e]=new en(e,5,!1,e.toLowerCase(),null,!1,!1)});var cm=/[\-:]([a-z])/g;function fm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(cm,fm);zt[t]=new en(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(cm,fm);zt[t]=new en(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(cm,fm);zt[t]=new en(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zt[e]=new en(e,1,!1,e.toLowerCase(),null,!1,!1)});zt.xlinkHref=new en("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zt[e]=new en(e,1,!1,e.toLowerCase(),null,!0,!0)});function hm(e,t,n,r){var i=zt.hasOwnProperty(t)?zt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_b(t,n,i,r)&&(n=null),r||i===null?xb(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var si=gb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lu=Symbol.for("react.element"),eo=Symbol.for("react.portal"),to=Symbol.for("react.fragment"),dm=Symbol.for("react.strict_mode"),up=Symbol.for("react.profiler"),yw=Symbol.for("react.provider"),xw=Symbol.for("react.context"),pm=Symbol.for("react.forward_ref"),cp=Symbol.for("react.suspense"),fp=Symbol.for("react.suspense_list"),vm=Symbol.for("react.memo"),yi=Symbol.for("react.lazy"),ww=Symbol.for("react.offscreen"),Ug=Symbol.iterator;function ms(e){return e===null||typeof e!="object"?null:(e=Ug&&e[Ug]||e["@@iterator"],typeof e=="function"?e:null)}var vt=Object.assign,qh;function Os(e){if(qh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);qh=t&&t[1]||""}return`
`+qh+e}var Yh=!1;function $h(e,t){if(!e||Yh)return"";Yh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=s);break}}}finally{Yh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Os(e):""}function Mb(e){switch(e.tag){case 5:return Os(e.type);case 16:return Os("Lazy");case 13:return Os("Suspense");case 19:return Os("SuspenseList");case 0:case 2:case 15:return e=$h(e.type,!1),e;case 11:return e=$h(e.type.render,!1),e;case 1:return e=$h(e.type,!0),e;default:return""}}function hp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case to:return"Fragment";case eo:return"Portal";case up:return"Profiler";case dm:return"StrictMode";case cp:return"Suspense";case fp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xw:return(e.displayName||"Context")+".Consumer";case yw:return(e._context.displayName||"Context")+".Provider";case pm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vm:return t=e.displayName||null,t!==null?t:hp(e.type)||"Memo";case yi:t=e._payload,e=e._init;try{return hp(e(t))}catch{}}return null}function bb(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hp(t);case 8:return t===dm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ki(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _w(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Eb(e){var t=_w(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cu(e){e._valueTracker||(e._valueTracker=Eb(e))}function Mw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_w(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Qc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function dp(e,t){var n=t.checked;return vt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function Gg(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ki(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bw(e,t){t=t.checked,t!=null&&hm(e,"checked",t,!1)}function pp(e,t){bw(e,t);var n=ki(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?vp(e,t.type,n):t.hasOwnProperty("defaultValue")&&vp(e,t.type,ki(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Vg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function vp(e,t,n){(t!=="number"||Qc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ds=Array.isArray;function _o(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ki(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function mp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return vt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Hg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(J(92));if(Ds(n)){if(1<n.length)throw Error(J(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ki(n)}}function Ew(e,t){var n=ki(t.value),r=ki(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Wg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Sw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Sw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ru,Tw=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ru=Ru||document.createElement("div"),Ru.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ru.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Us={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sb=["Webkit","ms","Moz","O"];Object.keys(Us).forEach(function(e){Sb.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Us[t]=Us[e]})});function Pw(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Us.hasOwnProperty(e)&&Us[e]?(""+t).trim():t+"px"}function Aw(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Pw(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Tb=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yp(e,t){if(t){if(Tb[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function xp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wp=null;function mm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _p=null,Mo=null,bo=null;function jg(e){if(e=yu(e)){if(typeof _p!="function")throw Error(J(280));var t=e.stateNode;t&&(t=bh(t),_p(e.stateNode,e.type,t))}}function Lw(e){Mo?bo?bo.push(e):bo=[e]:Mo=e}function Cw(){if(Mo){var e=Mo,t=bo;if(bo=Mo=null,jg(e),t)for(e=0;e<t.length;e++)jg(t[e])}}function Rw(e,t){return e(t)}function Ow(){}var Zh=!1;function Dw(e,t,n){if(Zh)return e(t,n);Zh=!0;try{return Rw(e,t,n)}finally{Zh=!1,(Mo!==null||bo!==null)&&(Ow(),Cw())}}function ll(e,t){var n=e.stateNode;if(n===null)return null;var r=bh(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var Mp=!1;if($r)try{var gs={};Object.defineProperty(gs,"passive",{get:function(){Mp=!0}}),window.addEventListener("test",gs,gs),window.removeEventListener("test",gs,gs)}catch{Mp=!1}function Pb(e,t,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Gs=!1,Kc=null,ef=!1,bp=null,Ab={onError:function(e){Gs=!0,Kc=e}};function Lb(e,t,n,r,i,a,o,s,l){Gs=!1,Kc=null,Pb.apply(Ab,arguments)}function Cb(e,t,n,r,i,a,o,s,l){if(Lb.apply(this,arguments),Gs){if(Gs){var u=Kc;Gs=!1,Kc=null}else throw Error(J(198));ef||(ef=!0,bp=u)}}function ka(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Iw(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xg(e){if(ka(e)!==e)throw Error(J(188))}function Rb(e){var t=e.alternate;if(!t){if(t=ka(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Xg(i),e;if(a===r)return Xg(i),t;a=a.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function Nw(e){return e=Rb(e),e!==null?kw(e):null}function kw(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kw(e);if(t!==null)return t;e=e.sibling}return null}var Fw=_n.unstable_scheduleCallback,qg=_n.unstable_cancelCallback,Ob=_n.unstable_shouldYield,Db=_n.unstable_requestPaint,xt=_n.unstable_now,Ib=_n.unstable_getCurrentPriorityLevel,gm=_n.unstable_ImmediatePriority,zw=_n.unstable_UserBlockingPriority,tf=_n.unstable_NormalPriority,Nb=_n.unstable_LowPriority,Bw=_n.unstable_IdlePriority,xh=null,xr=null;function kb(e){if(xr&&typeof xr.onCommitFiberRoot=="function")try{xr.onCommitFiberRoot(xh,e,void 0,(e.current.flags&128)===128)}catch{}}var ar=Math.clz32?Math.clz32:Bb,Fb=Math.log,zb=Math.LN2;function Bb(e){return e>>>=0,e===0?32:31-(Fb(e)/zb|0)|0}var Ou=64,Du=4194304;function Is(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function nf(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var s=o&~i;s!==0?r=Is(s):(a&=o,a!==0&&(r=Is(a)))}else o=n&~i,o!==0?r=Is(o):a!==0&&(r=Is(a));if(r===0)return 0;if(t!==0&&t!==r&&(t&i)===0&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ar(t),i=1<<n,r|=e[n],t&=~i;return r}function Ub(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gb(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ar(a),s=1<<o,l=i[o];l===-1?((s&n)===0||(s&r)!==0)&&(i[o]=Ub(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}function Ep(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Uw(){var e=Ou;return Ou<<=1,(Ou&4194240)===0&&(Ou=64),e}function Jh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ar(t),e[t]=n}function Vb(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ar(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function ym(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ar(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var tt=0;function Gw(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Vw,xm,Hw,Ww,jw,Sp=!1,Iu=[],Ti=null,Pi=null,Ai=null,ul=new Map,cl=new Map,_i=[],Hb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yg(e,t){switch(e){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":Pi=null;break;case"mouseover":case"mouseout":Ai=null;break;case"pointerover":case"pointerout":ul.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cl.delete(t.pointerId)}}function ys(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=yu(t),t!==null&&xm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Wb(e,t,n,r,i){switch(t){case"focusin":return Ti=ys(Ti,e,t,n,r,i),!0;case"dragenter":return Pi=ys(Pi,e,t,n,r,i),!0;case"mouseover":return Ai=ys(Ai,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return ul.set(a,ys(ul.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,cl.set(a,ys(cl.get(a)||null,e,t,n,r,i)),!0}return!1}function Xw(e){var t=ua(e.target);if(t!==null){var n=ka(t);if(n!==null){if(t=n.tag,t===13){if(t=Iw(n),t!==null){e.blockedOn=t,jw(e.priority,function(){Hw(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Tp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);wp=r,n.target.dispatchEvent(r),wp=null}else return t=yu(n),t!==null&&xm(t),e.blockedOn=n,!1;t.shift()}return!0}function $g(e,t,n){Fc(e)&&n.delete(t)}function jb(){Sp=!1,Ti!==null&&Fc(Ti)&&(Ti=null),Pi!==null&&Fc(Pi)&&(Pi=null),Ai!==null&&Fc(Ai)&&(Ai=null),ul.forEach($g),cl.forEach($g)}function xs(e,t){e.blockedOn===t&&(e.blockedOn=null,Sp||(Sp=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,jb)))}function fl(e){function t(i){return xs(i,e)}if(0<Iu.length){xs(Iu[0],e);for(var n=1;n<Iu.length;n++){var r=Iu[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ti!==null&&xs(Ti,e),Pi!==null&&xs(Pi,e),Ai!==null&&xs(Ai,e),ul.forEach(t),cl.forEach(t),n=0;n<_i.length;n++)r=_i[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<_i.length&&(n=_i[0],n.blockedOn===null);)Xw(n),n.blockedOn===null&&_i.shift()}var Eo=si.ReactCurrentBatchConfig,rf=!0;function Xb(e,t,n,r){var i=tt,a=Eo.transition;Eo.transition=null;try{tt=1,wm(e,t,n,r)}finally{tt=i,Eo.transition=a}}function qb(e,t,n,r){var i=tt,a=Eo.transition;Eo.transition=null;try{tt=4,wm(e,t,n,r)}finally{tt=i,Eo.transition=a}}function wm(e,t,n,r){if(rf){var i=Tp(e,t,n,r);if(i===null)sd(e,t,r,af,n),Yg(e,r);else if(Wb(i,e,t,n,r))r.stopPropagation();else if(Yg(e,r),t&4&&-1<Hb.indexOf(e)){for(;i!==null;){var a=yu(i);if(a!==null&&Vw(a),a=Tp(e,t,n,r),a===null&&sd(e,t,r,af,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else sd(e,t,r,null,n)}}var af=null;function Tp(e,t,n,r){if(af=null,e=mm(r),e=ua(e),e!==null)if(t=ka(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Iw(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return af=e,null}function qw(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ib()){case gm:return 1;case zw:return 4;case tf:case Nb:return 16;case Bw:return 536870912;default:return 16}default:return 16}}var bi=null,_m=null,zc=null;function Yw(){if(zc)return zc;var e,t=_m,n=t.length,r,i="value"in bi?bi.value:bi.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return zc=i.slice(e,1<r?1-r:void 0)}function Bc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nu(){return!0}function Zg(){return!1}function An(e){function t(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Nu:Zg,this.isPropagationStopped=Zg,this}return vt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nu)},persist:function(){},isPersistent:Nu}),t}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mm=An(ls),gu=vt({},ls,{view:0,detail:0}),Yb=An(gu),Qh,Kh,ws,wh=vt({},gu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ws&&(ws&&e.type==="mousemove"?(Qh=e.screenX-ws.screenX,Kh=e.screenY-ws.screenY):Kh=Qh=0,ws=e),Qh)},movementY:function(e){return"movementY"in e?e.movementY:Kh}}),Jg=An(wh),$b=vt({},wh,{dataTransfer:0}),Zb=An($b),Jb=vt({},gu,{relatedTarget:0}),ed=An(Jb),Qb=vt({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),Kb=An(Qb),eE=vt({},ls,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tE=An(eE),nE=vt({},ls,{data:0}),Qg=An(nE),rE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oE(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=aE[e])?!!t[e]:!1}function bm(){return oE}var sE=vt({},gu,{key:function(e){if(e.key){var t=rE[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?iE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bm,charCode:function(e){return e.type==="keypress"?Bc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lE=An(sE),uE=vt({},wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kg=An(uE),cE=vt({},gu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bm}),fE=An(cE),hE=vt({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),dE=An(hE),pE=vt({},wh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vE=An(pE),mE=[9,13,27,32],Em=$r&&"CompositionEvent"in window,Vs=null;$r&&"documentMode"in document&&(Vs=document.documentMode);var gE=$r&&"TextEvent"in window&&!Vs,$w=$r&&(!Em||Vs&&8<Vs&&11>=Vs),ey=String.fromCharCode(32),ty=!1;function Zw(e,t){switch(e){case"keyup":return mE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jw(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var no=!1;function yE(e,t){switch(e){case"compositionend":return Jw(t);case"keypress":return t.which!==32?null:(ty=!0,ey);case"textInput":return e=t.data,e===ey&&ty?null:e;default:return null}}function xE(e,t){if(no)return e==="compositionend"||!Em&&Zw(e,t)?(e=Yw(),zc=_m=bi=null,no=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $w&&t.locale!=="ko"?null:t.data;default:return null}}var wE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ny(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wE[e.type]:t==="textarea"}function Qw(e,t,n,r){Lw(r),t=of(t,"onChange"),0<t.length&&(n=new Mm("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hs=null,hl=null;function _E(e){u_(e,0)}function _h(e){var t=ao(e);if(Mw(t))return e}function ME(e,t){if(e==="change")return t}var Kw=!1;if($r){var td;if($r){var nd="oninput"in document;if(!nd){var ry=document.createElement("div");ry.setAttribute("oninput","return;"),nd=typeof ry.oninput=="function"}td=nd}else td=!1;Kw=td&&(!document.documentMode||9<document.documentMode)}function iy(){Hs&&(Hs.detachEvent("onpropertychange",e_),hl=Hs=null)}function e_(e){if(e.propertyName==="value"&&_h(hl)){var t=[];Qw(t,hl,e,mm(e)),Dw(_E,t)}}function bE(e,t,n){e==="focusin"?(iy(),Hs=t,hl=n,Hs.attachEvent("onpropertychange",e_)):e==="focusout"&&iy()}function EE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _h(hl)}function SE(e,t){if(e==="click")return _h(t)}function TE(e,t){if(e==="input"||e==="change")return _h(t)}function PE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sr=typeof Object.is=="function"?Object.is:PE;function dl(e,t){if(sr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!lp.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ay(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function oy(e,t){var n=ay(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ay(n)}}function t_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?t_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function n_(){for(var e=window,t=Qc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Qc(e.document)}return t}function Sm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function AE(e){var t=n_(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&t_(n.ownerDocument.documentElement,n)){if(r!==null&&Sm(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=oy(n,a);var o=oy(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var LE=$r&&"documentMode"in document&&11>=document.documentMode,ro=null,Pp=null,Ws=null,Ap=!1;function sy(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ap||ro==null||ro!==Qc(r)||(r=ro,"selectionStart"in r&&Sm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ws&&dl(Ws,r)||(Ws=r,r=of(Pp,"onSelect"),0<r.length&&(t=new Mm("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ro)))}function ku(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var io={animationend:ku("Animation","AnimationEnd"),animationiteration:ku("Animation","AnimationIteration"),animationstart:ku("Animation","AnimationStart"),transitionend:ku("Transition","TransitionEnd")},rd={},r_={};$r&&(r_=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function Mh(e){if(rd[e])return rd[e];if(!io[e])return e;var t=io[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in r_)return rd[e]=t[n];return e}var i_=Mh("animationend"),a_=Mh("animationiteration"),o_=Mh("animationstart"),s_=Mh("transitionend"),l_=new Map,ly="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(e,t){l_.set(e,t),Na(t,[e])}for(var id=0;id<ly.length;id++){var ad=ly[id],CE=ad.toLowerCase(),RE=ad[0].toUpperCase()+ad.slice(1);Gi(CE,"on"+RE)}Gi(i_,"onAnimationEnd");Gi(a_,"onAnimationIteration");Gi(o_,"onAnimationStart");Gi("dblclick","onDoubleClick");Gi("focusin","onFocus");Gi("focusout","onBlur");Gi(s_,"onTransitionEnd");Co("onMouseEnter",["mouseout","mouseover"]);Co("onMouseLeave",["mouseout","mouseover"]);Co("onPointerEnter",["pointerout","pointerover"]);Co("onPointerLeave",["pointerout","pointerover"]);Na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Na("onBeforeInput",["compositionend","keypress","textInput","paste"]);Na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ns));function uy(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Cb(r,t,void 0,e),e.currentTarget=null}function u_(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;uy(i,s,u),a=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;uy(i,s,u),a=l}}}if(ef)throw e=bp,ef=!1,bp=null,e}function lt(e,t){var n=t[Dp];n===void 0&&(n=t[Dp]=new Set);var r=e+"__bubble";n.has(r)||(c_(t,e,2,!1),n.add(r))}function od(e,t,n){var r=0;t&&(r|=4),c_(n,e,r,t)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function pl(e){if(!e[Fu]){e[Fu]=!0,gw.forEach(function(n){n!=="selectionchange"&&(OE.has(n)||od(n,!1,e),od(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fu]||(t[Fu]=!0,od("selectionchange",!1,t))}}function c_(e,t,n,r){switch(qw(t)){case 1:var i=Xb;break;case 4:i=qb;break;default:i=wm}n=i.bind(null,t,n,e),i=void 0,!Mp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function sd(e,t,n,r,i){var a=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=ua(s),o===null)return;if(l=o.tag,l===5||l===6){r=a=o;continue e}s=s.parentNode}}r=r.return}Dw(function(){var u=a,c=mm(n),f=[];e:{var h=l_.get(e);if(h!==void 0){var d=Mm,p=e;switch(e){case"keypress":if(Bc(n)===0)break e;case"keydown":case"keyup":d=lE;break;case"focusin":p="focus",d=ed;break;case"focusout":p="blur",d=ed;break;case"beforeblur":case"afterblur":d=ed;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Jg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Zb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=fE;break;case i_:case a_:case o_:d=Kb;break;case s_:d=dE;break;case"scroll":d=Yb;break;case"wheel":d=vE;break;case"copy":case"cut":case"paste":d=tE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Kg}var x=(t&4)!==0,y=!x&&e==="scroll",v=x?h!==null?h+"Capture":null:h;x=[];for(var m=u,w;m!==null;){w=m;var g=w.stateNode;if(w.tag===5&&g!==null&&(w=g,v!==null&&(g=ll(m,v),g!=null&&x.push(vl(m,g,w)))),y)break;m=m.return}0<x.length&&(h=new d(h,p,null,n,c),f.push({event:h,listeners:x}))}}if((t&7)===0){e:{if(h=e==="mouseover"||e==="pointerover",d=e==="mouseout"||e==="pointerout",h&&n!==wp&&(p=n.relatedTarget||n.fromElement)&&(ua(p)||p[Zr]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=u,p=p?ua(p):null,p!==null&&(y=ka(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=u),d!==p)){if(x=Jg,g="onMouseLeave",v="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(x=Kg,g="onPointerLeave",v="onPointerEnter",m="pointer"),y=d==null?h:ao(d),w=p==null?h:ao(p),h=new x(g,m+"leave",d,n,c),h.target=y,h.relatedTarget=w,g=null,ua(c)===u&&(x=new x(v,m+"enter",p,n,c),x.target=w,x.relatedTarget=y,g=x),y=g,d&&p)t:{for(x=d,v=p,m=0,w=x;w;w=za(w))m++;for(w=0,g=v;g;g=za(g))w++;for(;0<m-w;)x=za(x),m--;for(;0<w-m;)v=za(v),w--;for(;m--;){if(x===v||v!==null&&x===v.alternate)break t;x=za(x),v=za(v)}x=null}else x=null;d!==null&&cy(f,h,d,x,!1),p!==null&&y!==null&&cy(f,y,p,x,!0)}}e:{if(h=u?ao(u):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var _=ME;else if(ny(h))if(Kw)_=TE;else{_=EE;var b=bE}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=SE);if(_&&(_=_(e,u))){Qw(f,_,n,c);break e}b&&b(e,h,u),e==="focusout"&&(b=h._wrapperState)&&b.controlled&&h.type==="number"&&vp(h,"number",h.value)}switch(b=u?ao(u):window,e){case"focusin":(ny(b)||b.contentEditable==="true")&&(ro=b,Pp=u,Ws=null);break;case"focusout":Ws=Pp=ro=null;break;case"mousedown":Ap=!0;break;case"contextmenu":case"mouseup":case"dragend":Ap=!1,sy(f,n,c);break;case"selectionchange":if(LE)break;case"keydown":case"keyup":sy(f,n,c)}var E;if(Em)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else no?Zw(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&($w&&n.locale!=="ko"&&(no||S!=="onCompositionStart"?S==="onCompositionEnd"&&no&&(E=Yw()):(bi=c,_m="value"in bi?bi.value:bi.textContent,no=!0)),b=of(u,S),0<b.length&&(S=new Qg(S,e,null,n,c),f.push({event:S,listeners:b}),E?S.data=E:(E=Jw(n),E!==null&&(S.data=E)))),(E=gE?yE(e,n):xE(e,n))&&(u=of(u,"onBeforeInput"),0<u.length&&(c=new Qg("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=E))}u_(f,t)})}function vl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function of(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=ll(e,n),a!=null&&r.unshift(vl(e,a,i)),a=ll(e,t),a!=null&&r.push(vl(e,a,i))),e=e.return}return r}function za(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function cy(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,i?(l=ll(n,a),l!=null&&o.unshift(vl(n,l,s))):i||(l=ll(n,a),l!=null&&o.push(vl(n,l,s)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var DE=/\r\n?/g,IE=/\u0000|\uFFFD/g;function fy(e){return(typeof e=="string"?e:""+e).replace(DE,`
`).replace(IE,"")}function zu(e,t,n){if(t=fy(t),fy(e)!==t&&n)throw Error(J(425))}function sf(){}var Lp=null,Cp=null;function Rp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Op=typeof setTimeout=="function"?setTimeout:void 0,NE=typeof clearTimeout=="function"?clearTimeout:void 0,hy=typeof Promise=="function"?Promise:void 0,kE=typeof queueMicrotask=="function"?queueMicrotask:typeof hy<"u"?function(e){return hy.resolve(null).then(e).catch(FE)}:Op;function FE(e){setTimeout(function(){throw e})}function ld(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),fl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);fl(t)}function Li(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function dy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),mr="__reactFiber$"+us,ml="__reactProps$"+us,Zr="__reactContainer$"+us,Dp="__reactEvents$"+us,zE="__reactListeners$"+us,BE="__reactHandles$"+us;function ua(e){var t=e[mr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[mr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=dy(e);e!==null;){if(n=e[mr])return n;e=dy(e)}return t}e=n,n=e.parentNode}return null}function yu(e){return e=e[mr]||e[Zr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ao(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function bh(e){return e[ml]||null}var Ip=[],oo=-1;function Vi(e){return{current:e}}function ut(e){0>oo||(e.current=Ip[oo],Ip[oo]=null,oo--)}function at(e,t){oo++,Ip[oo]=e.current,e.current=t}var Fi={},Wt=Vi(Fi),ln=Vi(!1),xa=Fi;function Ro(e,t){var n=e.type.contextTypes;if(!n)return Fi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function un(e){return e=e.childContextTypes,e!=null}function lf(){ut(ln),ut(Wt)}function py(e,t,n){if(Wt.current!==Fi)throw Error(J(168));at(Wt,t),at(ln,n)}function f_(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(J(108,bb(e)||"Unknown",i));return vt({},n,r)}function uf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fi,xa=Wt.current,at(Wt,e),at(ln,ln.current),!0}function vy(e,t,n){var r=e.stateNode;if(!r)throw Error(J(169));n?(e=f_(e,t,xa),r.__reactInternalMemoizedMergedChildContext=e,ut(ln),ut(Wt),at(Wt,e)):ut(ln),at(ln,n)}var Gr=null,Eh=!1,ud=!1;function h_(e){Gr===null?Gr=[e]:Gr.push(e)}function UE(e){Eh=!0,h_(e)}function Hi(){if(!ud&&Gr!==null){ud=!0;var e=0,t=tt;try{var n=Gr;for(tt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Gr=null,Eh=!1}catch(i){throw Gr!==null&&(Gr=Gr.slice(e+1)),Fw(gm,Hi),i}finally{tt=t,ud=!1}}return null}var so=[],lo=0,cf=null,ff=0,Rn=[],On=0,wa=null,Wr=1,jr="";function oa(e,t){so[lo++]=ff,so[lo++]=cf,cf=e,ff=t}function d_(e,t,n){Rn[On++]=Wr,Rn[On++]=jr,Rn[On++]=wa,wa=e;var r=Wr;e=jr;var i=32-ar(r)-1;r&=~(1<<i),n+=1;var a=32-ar(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Wr=1<<32-ar(t)+i|n<<i|r,jr=a+e}else Wr=1<<a|n<<i|r,jr=e}function Tm(e){e.return!==null&&(oa(e,1),d_(e,1,0))}function Pm(e){for(;e===cf;)cf=so[--lo],so[lo]=null,ff=so[--lo],so[lo]=null;for(;e===wa;)wa=Rn[--On],Rn[On]=null,jr=Rn[--On],Rn[On]=null,Wr=Rn[--On],Rn[On]=null}var wn=null,yn=null,ft=!1,tr=null;function p_(e,t){var n=Dn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function my(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wn=e,yn=Li(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wn=e,yn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=wa!==null?{id:Wr,overflow:jr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Dn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,wn=e,yn=null,!0):!1;default:return!1}}function Np(e){return(e.mode&1)!==0&&(e.flags&128)===0}function kp(e){if(ft){var t=yn;if(t){var n=t;if(!my(e,t)){if(Np(e))throw Error(J(418));t=Li(n.nextSibling);var r=wn;t&&my(e,t)?p_(r,n):(e.flags=e.flags&-4097|2,ft=!1,wn=e)}}else{if(Np(e))throw Error(J(418));e.flags=e.flags&-4097|2,ft=!1,wn=e}}}function gy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wn=e}function Bu(e){if(e!==wn)return!1;if(!ft)return gy(e),ft=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Rp(e.type,e.memoizedProps)),t&&(t=yn)){if(Np(e))throw v_(),Error(J(418));for(;t;)p_(e,t),t=Li(t.nextSibling)}if(gy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){yn=Li(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}yn=null}}else yn=wn?Li(e.stateNode.nextSibling):null;return!0}function v_(){for(var e=yn;e;)e=Li(e.nextSibling)}function Oo(){yn=wn=null,ft=!1}function Am(e){tr===null?tr=[e]:tr.push(e)}var GE=si.ReactCurrentBatchConfig;function _s(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,e))}return e}function Uu(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yy(e){var t=e._init;return t(e._payload)}function m_(e){function t(v,m){if(e){var w=v.deletions;w===null?(v.deletions=[m],v.flags|=16):w.push(m)}}function n(v,m){if(!e)return null;for(;m!==null;)t(v,m),m=m.sibling;return null}function r(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function i(v,m){return v=Di(v,m),v.index=0,v.sibling=null,v}function a(v,m,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<m?(v.flags|=2,m):w):(v.flags|=2,m)):(v.flags|=1048576,m)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,m,w,g){return m===null||m.tag!==6?(m=md(w,v.mode,g),m.return=v,m):(m=i(m,w),m.return=v,m)}function l(v,m,w,g){var _=w.type;return _===to?c(v,m,w.props.children,g,w.key):m!==null&&(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===yi&&yy(_)===m.type)?(g=i(m,w.props),g.ref=_s(v,m,w),g.return=v,g):(g=Xc(w.type,w.key,w.props,null,v.mode,g),g.ref=_s(v,m,w),g.return=v,g)}function u(v,m,w,g){return m===null||m.tag!==4||m.stateNode.containerInfo!==w.containerInfo||m.stateNode.implementation!==w.implementation?(m=gd(w,v.mode,g),m.return=v,m):(m=i(m,w.children||[]),m.return=v,m)}function c(v,m,w,g,_){return m===null||m.tag!==7?(m=va(w,v.mode,g,_),m.return=v,m):(m=i(m,w),m.return=v,m)}function f(v,m,w){if(typeof m=="string"&&m!==""||typeof m=="number")return m=md(""+m,v.mode,w),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Lu:return w=Xc(m.type,m.key,m.props,null,v.mode,w),w.ref=_s(v,null,m),w.return=v,w;case eo:return m=gd(m,v.mode,w),m.return=v,m;case yi:var g=m._init;return f(v,g(m._payload),w)}if(Ds(m)||ms(m))return m=va(m,v.mode,w,null),m.return=v,m;Uu(v,m)}return null}function h(v,m,w,g){var _=m!==null?m.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:s(v,m,""+w,g);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Lu:return w.key===_?l(v,m,w,g):null;case eo:return w.key===_?u(v,m,w,g):null;case yi:return _=w._init,h(v,m,_(w._payload),g)}if(Ds(w)||ms(w))return _!==null?null:c(v,m,w,g,null);Uu(v,w)}return null}function d(v,m,w,g,_){if(typeof g=="string"&&g!==""||typeof g=="number")return v=v.get(w)||null,s(m,v,""+g,_);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Lu:return v=v.get(g.key===null?w:g.key)||null,l(m,v,g,_);case eo:return v=v.get(g.key===null?w:g.key)||null,u(m,v,g,_);case yi:var b=g._init;return d(v,m,w,b(g._payload),_)}if(Ds(g)||ms(g))return v=v.get(w)||null,c(m,v,g,_,null);Uu(m,g)}return null}function p(v,m,w,g){for(var _=null,b=null,E=m,S=m=0,O=null;E!==null&&S<w.length;S++){E.index>S?(O=E,E=null):O=E.sibling;var D=h(v,E,w[S],g);if(D===null){E===null&&(E=O);break}e&&E&&D.alternate===null&&t(v,E),m=a(D,m,S),b===null?_=D:b.sibling=D,b=D,E=O}if(S===w.length)return n(v,E),ft&&oa(v,S),_;if(E===null){for(;S<w.length;S++)E=f(v,w[S],g),E!==null&&(m=a(E,m,S),b===null?_=E:b.sibling=E,b=E);return ft&&oa(v,S),_}for(E=r(v,E);S<w.length;S++)O=d(E,v,S,w[S],g),O!==null&&(e&&O.alternate!==null&&E.delete(O.key===null?S:O.key),m=a(O,m,S),b===null?_=O:b.sibling=O,b=O);return e&&E.forEach(function(L){return t(v,L)}),ft&&oa(v,S),_}function x(v,m,w,g){var _=ms(w);if(typeof _!="function")throw Error(J(150));if(w=_.call(w),w==null)throw Error(J(151));for(var b=_=null,E=m,S=m=0,O=null,D=w.next();E!==null&&!D.done;S++,D=w.next()){E.index>S?(O=E,E=null):O=E.sibling;var L=h(v,E,D.value,g);if(L===null){E===null&&(E=O);break}e&&E&&L.alternate===null&&t(v,E),m=a(L,m,S),b===null?_=L:b.sibling=L,b=L,E=O}if(D.done)return n(v,E),ft&&oa(v,S),_;if(E===null){for(;!D.done;S++,D=w.next())D=f(v,D.value,g),D!==null&&(m=a(D,m,S),b===null?_=D:b.sibling=D,b=D);return ft&&oa(v,S),_}for(E=r(v,E);!D.done;S++,D=w.next())D=d(E,v,S,D.value,g),D!==null&&(e&&D.alternate!==null&&E.delete(D.key===null?S:D.key),m=a(D,m,S),b===null?_=D:b.sibling=D,b=D);return e&&E.forEach(function(R){return t(v,R)}),ft&&oa(v,S),_}function y(v,m,w,g){if(typeof w=="object"&&w!==null&&w.type===to&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Lu:e:{for(var _=w.key,b=m;b!==null;){if(b.key===_){if(_=w.type,_===to){if(b.tag===7){n(v,b.sibling),m=i(b,w.props.children),m.return=v,v=m;break e}}else if(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===yi&&yy(_)===b.type){n(v,b.sibling),m=i(b,w.props),m.ref=_s(v,b,w),m.return=v,v=m;break e}n(v,b);break}else t(v,b);b=b.sibling}w.type===to?(m=va(w.props.children,v.mode,g,w.key),m.return=v,v=m):(g=Xc(w.type,w.key,w.props,null,v.mode,g),g.ref=_s(v,m,w),g.return=v,v=g)}return o(v);case eo:e:{for(b=w.key;m!==null;){if(m.key===b)if(m.tag===4&&m.stateNode.containerInfo===w.containerInfo&&m.stateNode.implementation===w.implementation){n(v,m.sibling),m=i(m,w.children||[]),m.return=v,v=m;break e}else{n(v,m);break}else t(v,m);m=m.sibling}m=gd(w,v.mode,g),m.return=v,v=m}return o(v);case yi:return b=w._init,y(v,m,b(w._payload),g)}if(Ds(w))return p(v,m,w,g);if(ms(w))return x(v,m,w,g);Uu(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,m!==null&&m.tag===6?(n(v,m.sibling),m=i(m,w),m.return=v,v=m):(n(v,m),m=md(w,v.mode,g),m.return=v,v=m),o(v)):n(v,m)}return y}var Do=m_(!0),g_=m_(!1),hf=Vi(null),df=null,uo=null,Lm=null;function Cm(){Lm=uo=df=null}function Rm(e){var t=hf.current;ut(hf),e._currentValue=t}function Fp(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function So(e,t){df=e,Lm=uo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(on=!0),e.firstContext=null)}function Fn(e){var t=e._currentValue;if(Lm!==e)if(e={context:e,memoizedValue:t,next:null},uo===null){if(df===null)throw Error(J(308));uo=e,df.dependencies={lanes:0,firstContext:e}}else uo=uo.next=e;return t}var ca=null;function Om(e){ca===null?ca=[e]:ca.push(e)}function y_(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Om(t)):(n.next=i.next,i.next=n),t.interleaved=n,Jr(e,r)}function Jr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xi=!1;function Dm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ci(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Je&2)!==0){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Jr(e,n)}return i=r.interleaved,i===null?(t.next=t,Om(r)):(t.next=i.next,i.next=t),r.interleaved=t,Jr(e,n)}function Uc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ym(e,n)}}function xy(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function pf(e,t,n,r){var i=e.updateQueue;xi=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?a=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;o=0,c=u=l=null,s=a;do{var h=s.lane,d=s.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,x=s;switch(h=t,d=n,x.tag){case 1:if(p=x.payload,typeof p=="function"){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=x.payload,h=typeof p=="function"?p.call(d,f,h):p,h==null)break e;f=vt({},f,h);break e;case 2:xi=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=d,l=f):c=c.next=d,o|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Ma|=o,e.lanes=o,e.memoizedState=f}}function wy(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var xu={},wr=Vi(xu),gl=Vi(xu),yl=Vi(xu);function fa(e){if(e===xu)throw Error(J(174));return e}function Im(e,t){switch(at(yl,t),at(gl,e),at(wr,xu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:gp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=gp(t,e)}ut(wr),at(wr,t)}function Io(){ut(wr),ut(gl),ut(yl)}function w_(e){fa(yl.current);var t=fa(wr.current),n=gp(t,e.type);t!==n&&(at(gl,e),at(wr,n))}function Nm(e){gl.current===e&&(ut(wr),ut(gl))}var dt=Vi(0);function vf(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cd=[];function km(){for(var e=0;e<cd.length;e++)cd[e]._workInProgressVersionPrimary=null;cd.length=0}var Gc=si.ReactCurrentDispatcher,fd=si.ReactCurrentBatchConfig,_a=0,pt=null,St=null,At=null,mf=!1,js=!1,xl=0,VE=0;function Ut(){throw Error(J(321))}function Fm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function zm(e,t,n,r,i,a){if(_a=a,pt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Gc.current=e===null||e.memoizedState===null?XE:qE,e=n(r,i),js){a=0;do{if(js=!1,xl=0,25<=a)throw Error(J(301));a+=1,At=St=null,t.updateQueue=null,Gc.current=YE,e=n(r,i)}while(js)}if(Gc.current=gf,t=St!==null&&St.next!==null,_a=0,At=St=pt=null,mf=!1,t)throw Error(J(300));return e}function Bm(){var e=xl!==0;return xl=0,e}function dr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?pt.memoizedState=At=e:At=At.next=e,At}function zn(){if(St===null){var e=pt.alternate;e=e!==null?e.memoizedState:null}else e=St.next;var t=At===null?pt.memoizedState:At.next;if(t!==null)At=t,St=e;else{if(e===null)throw Error(J(310));St=e,e={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},At===null?pt.memoizedState=At=e:At=At.next=e}return At}function wl(e,t){return typeof t=="function"?t(e):t}function hd(e){var t=zn(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=St,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var s=o=null,l=null,u=a;do{var c=u.lane;if((_a&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=f,o=r):l=l.next=f,pt.lanes|=c,Ma|=c}u=u.next}while(u!==null&&u!==a);l===null?o=r:l.next=s,sr(r,t.memoizedState)||(on=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,pt.lanes|=a,Ma|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function dd(e){var t=zn(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);sr(a,t.memoizedState)||(on=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function __(){}function M_(e,t){var n=pt,r=zn(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,on=!0),r=r.queue,Um(S_.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||At!==null&&At.memoizedState.tag&1){if(n.flags|=2048,_l(9,E_.bind(null,n,r,i,t),void 0,null),Lt===null)throw Error(J(349));(_a&30)!==0||b_(n,t,i)}return i}function b_(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=pt.updateQueue,t===null?(t={lastEffect:null,stores:null},pt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function E_(e,t,n,r){t.value=n,t.getSnapshot=r,T_(t)&&P_(e)}function S_(e,t,n){return n(function(){T_(t)&&P_(e)})}function T_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch{return!0}}function P_(e){var t=Jr(e,1);t!==null&&or(t,e,1,-1)}function _y(e){var t=dr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:e},t.queue=e,e=e.dispatch=jE.bind(null,pt,e),[t.memoizedState,e]}function _l(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=pt.updateQueue,t===null?(t={lastEffect:null,stores:null},pt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function A_(){return zn().memoizedState}function Vc(e,t,n,r){var i=dr();pt.flags|=e,i.memoizedState=_l(1|t,n,void 0,r===void 0?null:r)}function Sh(e,t,n,r){var i=zn();r=r===void 0?null:r;var a=void 0;if(St!==null){var o=St.memoizedState;if(a=o.destroy,r!==null&&Fm(r,o.deps)){i.memoizedState=_l(t,n,a,r);return}}pt.flags|=e,i.memoizedState=_l(1|t,n,a,r)}function My(e,t){return Vc(8390656,8,e,t)}function Um(e,t){return Sh(2048,8,e,t)}function L_(e,t){return Sh(4,2,e,t)}function C_(e,t){return Sh(4,4,e,t)}function R_(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function O_(e,t,n){return n=n!=null?n.concat([e]):null,Sh(4,4,R_.bind(null,t,e),n)}function Gm(){}function D_(e,t){var n=zn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Fm(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function I_(e,t){var n=zn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Fm(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function N_(e,t,n){return(_a&21)===0?(e.baseState&&(e.baseState=!1,on=!0),e.memoizedState=n):(sr(n,t)||(n=Uw(),pt.lanes|=n,Ma|=n,e.baseState=!0),t)}function HE(e,t){var n=tt;tt=n!==0&&4>n?n:4,e(!0);var r=fd.transition;fd.transition={};try{e(!1),t()}finally{tt=n,fd.transition=r}}function k_(){return zn().memoizedState}function WE(e,t,n){var r=Oi(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},F_(e))z_(t,n);else if(n=y_(e,t,n,r),n!==null){var i=Zt();or(n,e,r,i),B_(n,t,r)}}function jE(e,t,n){var r=Oi(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(F_(e))z_(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=t.interleaved;l===null?(i.next=i,Om(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=y_(e,t,i,r),n!==null&&(i=Zt(),or(n,e,r,i),B_(n,t,r))}}function F_(e){var t=e.alternate;return e===pt||t!==null&&t===pt}function z_(e,t){js=mf=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function B_(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ym(e,n)}}var gf={readContext:Fn,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},XE={readContext:Fn,useCallback:function(e,t){return dr().memoizedState=[e,t===void 0?null:t],e},useContext:Fn,useEffect:My,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Vc(4194308,4,R_.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vc(4,2,e,t)},useMemo:function(e,t){var n=dr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=dr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=WE.bind(null,pt,e),[r.memoizedState,e]},useRef:function(e){var t=dr();return e={current:e},t.memoizedState=e},useState:_y,useDebugValue:Gm,useDeferredValue:function(e){return dr().memoizedState=e},useTransition:function(){var e=_y(!1),t=e[0];return e=HE.bind(null,e[1]),dr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=pt,i=dr();if(ft){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),Lt===null)throw Error(J(349));(_a&30)!==0||b_(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,My(S_.bind(null,r,a,e),[e]),r.flags|=2048,_l(9,E_.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=dr(),t=Lt.identifierPrefix;if(ft){var n=jr,r=Wr;n=(r&~(1<<32-ar(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=xl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=VE++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qE={readContext:Fn,useCallback:D_,useContext:Fn,useEffect:Um,useImperativeHandle:O_,useInsertionEffect:L_,useLayoutEffect:C_,useMemo:I_,useReducer:hd,useRef:A_,useState:function(){return hd(wl)},useDebugValue:Gm,useDeferredValue:function(e){var t=zn();return N_(t,St.memoizedState,e)},useTransition:function(){var e=hd(wl)[0],t=zn().memoizedState;return[e,t]},useMutableSource:__,useSyncExternalStore:M_,useId:k_,unstable_isNewReconciler:!1},YE={readContext:Fn,useCallback:D_,useContext:Fn,useEffect:Um,useImperativeHandle:O_,useInsertionEffect:L_,useLayoutEffect:C_,useMemo:I_,useReducer:dd,useRef:A_,useState:function(){return dd(wl)},useDebugValue:Gm,useDeferredValue:function(e){var t=zn();return St===null?t.memoizedState=e:N_(t,St.memoizedState,e)},useTransition:function(){var e=dd(wl)[0],t=zn().memoizedState;return[e,t]},useMutableSource:__,useSyncExternalStore:M_,useId:k_,unstable_isNewReconciler:!1};function Kn(e,t){if(e&&e.defaultProps){t=vt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function zp(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:vt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Th={isMounted:function(e){return(e=e._reactInternals)?ka(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zt(),i=Oi(e),a=qr(r,i);a.payload=t,n!=null&&(a.callback=n),t=Ci(e,a,i),t!==null&&(or(t,e,i,r),Uc(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zt(),i=Oi(e),a=qr(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Ci(e,a,i),t!==null&&(or(t,e,i,r),Uc(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zt(),r=Oi(e),i=qr(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ci(e,i,r),t!==null&&(or(t,e,r,n),Uc(t,e,r))}};function by(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!dl(n,r)||!dl(i,a):!0}function U_(e,t,n){var r=!1,i=Fi,a=t.contextType;return typeof a=="object"&&a!==null?a=Fn(a):(i=un(t)?xa:Wt.current,r=t.contextTypes,a=(r=r!=null)?Ro(e,i):Fi),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Th,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ey(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Th.enqueueReplaceState(t,t.state,null)}function Bp(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Dm(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Fn(a):(a=un(t)?xa:Wt.current,i.context=Ro(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(zp(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Th.enqueueReplaceState(i,i.state,null),pf(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function No(e,t){try{var n="",r=t;do n+=Mb(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function pd(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function Up(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var $E=typeof WeakMap=="function"?WeakMap:Map;function G_(e,t,n){n=qr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){xf||(xf=!0,Zp=r),Up(e,t)},n}function V_(e,t,n){n=qr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Up(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Up(e,t),typeof r!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Sy(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new $E;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=uS.bind(null,e,t,n),t.then(e,e))}function Ty(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Py(e,t,n,r,i){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=qr(-1,1),t.tag=2,Ci(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ZE=si.ReactCurrentOwner,on=!1;function $t(e,t,n,r){t.child=e===null?g_(t,null,n,r):Do(t,e.child,n,r)}function Ay(e,t,n,r,i){n=n.render;var a=t.ref;return So(t,i),r=zm(e,t,n,r,a,i),n=Bm(),e!==null&&!on?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qr(e,t,i)):(ft&&n&&Tm(t),t.flags|=1,$t(e,t,r,i),t.child)}function Ly(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!$m(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,H_(e,t,a,r,i)):(e=Xc(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,(e.lanes&i)===0){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:dl,n(o,r)&&e.ref===t.ref)return Qr(e,t,i)}return t.flags|=1,e=Di(a,r),e.ref=t.ref,e.return=t,t.child=e}function H_(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(dl(a,r)&&e.ref===t.ref)if(on=!1,t.pendingProps=r=a,(e.lanes&i)!==0)(e.flags&131072)!==0&&(on=!0);else return t.lanes=e.lanes,Qr(e,t,i)}return Gp(e,t,n,r,i)}function W_(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(fo,gn),gn|=n;else{if((n&1073741824)===0)return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,at(fo,gn),gn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,at(fo,gn),gn|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,at(fo,gn),gn|=r;return $t(e,t,i,n),t.child}function j_(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Gp(e,t,n,r,i){var a=un(n)?xa:Wt.current;return a=Ro(t,a),So(t,i),n=zm(e,t,n,r,a,i),r=Bm(),e!==null&&!on?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qr(e,t,i)):(ft&&r&&Tm(t),t.flags|=1,$t(e,t,n,i),t.child)}function Cy(e,t,n,r,i){if(un(n)){var a=!0;uf(t)}else a=!1;if(So(t,i),t.stateNode===null)Hc(e,t),U_(t,n,r),Bp(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Fn(u):(u=un(n)?xa:Wt.current,u=Ro(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==u)&&Ey(t,o,r,u),xi=!1;var h=t.memoizedState;o.state=h,pf(t,r,o,i),l=t.memoizedState,s!==r||h!==l||ln.current||xi?(typeof c=="function"&&(zp(t,n,c,r),l=t.memoizedState),(s=xi||by(t,n,s,r,h,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,x_(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Kn(t.type,s),o.props=u,f=t.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Fn(l):(l=un(n)?xa:Wt.current,l=Ro(t,l));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||h!==l)&&Ey(t,o,r,l),xi=!1,h=t.memoizedState,o.state=h,pf(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||ln.current||xi?(typeof d=="function"&&(zp(t,n,d,r),p=t.memoizedState),(u=xi||by(t,n,u,r,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Vp(e,t,n,r,a,i)}function Vp(e,t,n,r,i,a){j_(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&vy(t,n,!1),Qr(e,t,a);r=t.stateNode,ZE.current=t;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Do(t,e.child,null,a),t.child=Do(t,null,s,a)):$t(e,t,s,a),t.memoizedState=r.state,i&&vy(t,n,!0),t.child}function X_(e){var t=e.stateNode;t.pendingContext?py(e,t.pendingContext,t.pendingContext!==t.context):t.context&&py(e,t.context,!1),Im(e,t.containerInfo)}function Ry(e,t,n,r,i){return Oo(),Am(i),t.flags|=256,$t(e,t,n,r),t.child}var Hp={dehydrated:null,treeContext:null,retryLane:0};function Wp(e){return{baseLanes:e,cachePool:null,transitions:null}}function q_(e,t,n){var r=t.pendingProps,i=dt.current,a=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),at(dt,i&1),e===null)return kp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},(r&1)===0&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Lh(o,r,0,null),e=va(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Wp(n),t.memoizedState=Hp,e):Vm(t,o));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return JE(e,t,o,r,s,i,n);if(a){a=r.fallback,o=t.mode,i=e.child,s=i.sibling;var l={mode:"hidden",children:r.children};return(o&1)===0&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Di(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=Di(s,a):(a=va(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?Wp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=Hp,r}return a=e.child,e=a.sibling,r=Di(a,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Vm(e,t){return t=Lh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gu(e,t,n,r){return r!==null&&Am(r),Do(t,e.child,null,n),e=Vm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function JE(e,t,n,r,i,a,o){if(n)return t.flags&256?(t.flags&=-257,r=pd(Error(J(422))),Gu(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Lh({mode:"visible",children:r.children},i,0,null),a=va(a,i,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,(t.mode&1)!==0&&Do(t,e.child,null,o),t.child.memoizedState=Wp(o),t.memoizedState=Hp,a);if((t.mode&1)===0)return Gu(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(J(419)),r=pd(a,r,void 0),Gu(e,t,o,r)}if(s=(o&e.childLanes)!==0,on||s){if(r=Lt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|o))!==0?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Jr(e,i),or(r,e,i,-1))}return Ym(),r=pd(Error(J(421))),Gu(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=cS.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,yn=Li(i.nextSibling),wn=t,ft=!0,tr=null,e!==null&&(Rn[On++]=Wr,Rn[On++]=jr,Rn[On++]=wa,Wr=e.id,jr=e.overflow,wa=t),t=Vm(t,r.children),t.flags|=4096,t)}function Oy(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Fp(e.return,t,n)}function vd(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Y_(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if($t(e,t,r.children,n),r=dt.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Oy(e,n,t);else if(e.tag===19)Oy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(at(dt,r),(t.mode&1)===0)t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&vf(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),vd(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&vf(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}vd(t,!0,n,null,a);break;case"together":vd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hc(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ma|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=Di(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Di(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function QE(e,t,n){switch(t.tag){case 3:X_(t),Oo();break;case 5:w_(t);break;case 1:un(t.type)&&uf(t);break;case 4:Im(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;at(hf,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(at(dt,dt.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?q_(e,t,n):(at(dt,dt.current&1),e=Qr(e,t,n),e!==null?e.sibling:null);at(dt,dt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Y_(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),at(dt,dt.current),r)break;return null;case 22:case 23:return t.lanes=0,W_(e,t,n)}return Qr(e,t,n)}var $_,jp,Z_,J_;$_=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jp=function(){};Z_=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,fa(wr.current);var a=null;switch(n){case"input":i=dp(e,i),r=dp(e,r),a=[];break;case"select":i=vt({},i,{value:void 0}),r=vt({},r,{value:void 0}),a=[];break;case"textarea":i=mp(e,i),r=mp(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=sf)}yp(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ol.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(s=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ol.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&lt("scroll",e),a||s===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};J_=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ms(e,t){if(!ft)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function KE(e,t,n){var r=t.pendingProps;switch(Pm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(t),null;case 1:return un(t.type)&&lf(),Gt(t),null;case 3:return r=t.stateNode,Io(),ut(ln),ut(Wt),km(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Bu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,tr!==null&&(Kp(tr),tr=null))),jp(e,t),Gt(t),null;case 5:Nm(t);var i=fa(yl.current);if(n=t.type,e!==null&&t.stateNode!=null)Z_(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(J(166));return Gt(t),null}if(e=fa(wr.current),Bu(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[mr]=t,r[ml]=a,e=(t.mode&1)!==0,n){case"dialog":lt("cancel",r),lt("close",r);break;case"iframe":case"object":case"embed":lt("load",r);break;case"video":case"audio":for(i=0;i<Ns.length;i++)lt(Ns[i],r);break;case"source":lt("error",r);break;case"img":case"image":case"link":lt("error",r),lt("load",r);break;case"details":lt("toggle",r);break;case"input":Gg(r,a),lt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},lt("invalid",r);break;case"textarea":Hg(r,a),lt("invalid",r)}yp(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&zu(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&zu(r.textContent,s,e),i=["children",""+s]):ol.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&lt("scroll",r)}switch(n){case"input":Cu(r),Vg(r,a,!0);break;case"textarea":Cu(r),Wg(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=sf)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Sw(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[mr]=t,e[ml]=r,$_(e,t,!1,!1),t.stateNode=e;e:{switch(o=xp(n,r),n){case"dialog":lt("cancel",e),lt("close",e),i=r;break;case"iframe":case"object":case"embed":lt("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ns.length;i++)lt(Ns[i],e);i=r;break;case"source":lt("error",e),i=r;break;case"img":case"image":case"link":lt("error",e),lt("load",e),i=r;break;case"details":lt("toggle",e),i=r;break;case"input":Gg(e,r),i=dp(e,r),lt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=vt({},r,{value:void 0}),lt("invalid",e);break;case"textarea":Hg(e,r),i=mp(e,r),lt("invalid",e);break;default:i=r}yp(n,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?Aw(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Tw(e,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&sl(e,l):typeof l=="number"&&sl(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ol.hasOwnProperty(a)?l!=null&&a==="onScroll"&&lt("scroll",e):l!=null&&hm(e,a,l,o))}switch(n){case"input":Cu(e),Vg(e,r,!1);break;case"textarea":Cu(e),Wg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ki(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?_o(e,!!r.multiple,a,!1):r.defaultValue!=null&&_o(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=sf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Gt(t),null;case 6:if(e&&t.stateNode!=null)J_(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(J(166));if(n=fa(yl.current),fa(wr.current),Bu(t)){if(r=t.stateNode,n=t.memoizedProps,r[mr]=t,(a=r.nodeValue!==n)&&(e=wn,e!==null))switch(e.tag){case 3:zu(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zu(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mr]=t,t.stateNode=r}return Gt(t),null;case 13:if(ut(dt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ft&&yn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)v_(),Oo(),t.flags|=98560,a=!1;else if(a=Bu(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(J(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(J(317));a[mr]=t}else Oo(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Gt(t),a=!1}else tr!==null&&(Kp(tr),tr=null),a=!0;if(!a)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(dt.current&1)!==0?Tt===0&&(Tt=3):Ym())),t.updateQueue!==null&&(t.flags|=4),Gt(t),null);case 4:return Io(),jp(e,t),e===null&&pl(t.stateNode.containerInfo),Gt(t),null;case 10:return Rm(t.type._context),Gt(t),null;case 17:return un(t.type)&&lf(),Gt(t),null;case 19:if(ut(dt),a=t.memoizedState,a===null)return Gt(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)Ms(a,!1);else{if(Tt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=vf(e),o!==null){for(t.flags|=128,Ms(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return at(dt,dt.current&1|2),t.child}e=e.sibling}a.tail!==null&&xt()>ko&&(t.flags|=128,r=!0,Ms(a,!1),t.lanes=4194304)}else{if(!r)if(e=vf(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ms(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ft)return Gt(t),null}else 2*xt()-a.renderingStartTime>ko&&n!==1073741824&&(t.flags|=128,r=!0,Ms(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=xt(),t.sibling=null,n=dt.current,at(dt,r?n&1|2:n&1),t):(Gt(t),null);case 22:case 23:return qm(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(gn&1073741824)!==0&&(Gt(t),t.subtreeFlags&6&&(t.flags|=8192)):Gt(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function eS(e,t){switch(Pm(t),t.tag){case 1:return un(t.type)&&lf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Io(),ut(ln),ut(Wt),km(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Nm(t),null;case 13:if(ut(dt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Oo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ut(dt),null;case 4:return Io(),null;case 10:return Rm(t.type._context),null;case 22:case 23:return qm(),null;case 24:return null;default:return null}}var Vu=!1,Vt=!1,tS=typeof WeakSet=="function"?WeakSet:Set,fe=null;function co(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){gt(e,t,r)}else n.current=null}function Xp(e,t,n){try{n()}catch(r){gt(e,t,r)}}var Dy=!1;function nS(e,t){if(Lp=rf,e=n_(),Sm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,u=0,c=0,f=e,h=null;t:for(;;){for(var d;f!==n||i!==0&&f.nodeType!==3||(s=o+i),f!==a||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===e)break t;if(h===n&&++u===i&&(s=o),h===a&&++c===r&&(l=o),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cp={focusedElem:e,selectionRange:n},rf=!1,fe=t;fe!==null;)if(t=fe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fe=e;else for(;fe!==null;){t=fe;try{var p=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var x=p.memoizedProps,y=p.memoizedState,v=t.stateNode,m=v.getSnapshotBeforeUpdate(t.elementType===t.type?x:Kn(t.type,x),y);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(g){gt(t,t.return,g)}if(e=t.sibling,e!==null){e.return=t.return,fe=e;break}fe=t.return}return p=Dy,Dy=!1,p}function Xs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Xp(t,n,a)}i=i.next}while(i!==r)}}function Ph(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function qp(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Q_(e){var t=e.alternate;t!==null&&(e.alternate=null,Q_(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[mr],delete t[ml],delete t[Dp],delete t[zE],delete t[BE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function K_(e){return e.tag===5||e.tag===3||e.tag===4}function Iy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||K_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=sf));else if(r!==4&&(e=e.child,e!==null))for(Yp(e,t,n),e=e.sibling;e!==null;)Yp(e,t,n),e=e.sibling}function $p(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for($p(e,t,n),e=e.sibling;e!==null;)$p(e,t,n),e=e.sibling}var Ot=null,er=!1;function fi(e,t,n){for(n=n.child;n!==null;)e1(e,t,n),n=n.sibling}function e1(e,t,n){if(xr&&typeof xr.onCommitFiberUnmount=="function")try{xr.onCommitFiberUnmount(xh,n)}catch{}switch(n.tag){case 5:Vt||co(n,t);case 6:var r=Ot,i=er;Ot=null,fi(e,t,n),Ot=r,er=i,Ot!==null&&(er?(e=Ot,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ot.removeChild(n.stateNode));break;case 18:Ot!==null&&(er?(e=Ot,n=n.stateNode,e.nodeType===8?ld(e.parentNode,n):e.nodeType===1&&ld(e,n),fl(e)):ld(Ot,n.stateNode));break;case 4:r=Ot,i=er,Ot=n.stateNode.containerInfo,er=!0,fi(e,t,n),Ot=r,er=i;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&((a&2)!==0||(a&4)!==0)&&Xp(n,t,o),i=i.next}while(i!==r)}fi(e,t,n);break;case 1:if(!Vt&&(co(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){gt(n,t,s)}fi(e,t,n);break;case 21:fi(e,t,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,fi(e,t,n),Vt=r):fi(e,t,n);break;default:fi(e,t,n)}}function Ny(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new tS),t.forEach(function(r){var i=fS.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:Ot=s.stateNode,er=!1;break e;case 3:Ot=s.stateNode.containerInfo,er=!0;break e;case 4:Ot=s.stateNode.containerInfo,er=!0;break e}s=s.return}if(Ot===null)throw Error(J(160));e1(a,o,i),Ot=null,er=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){gt(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)t1(t,e),t=t.sibling}function t1(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xn(t,e),lr(e),r&4){try{Xs(3,e,e.return),Ph(3,e)}catch(x){gt(e,e.return,x)}try{Xs(5,e,e.return)}catch(x){gt(e,e.return,x)}}break;case 1:Xn(t,e),lr(e),r&512&&n!==null&&co(n,n.return);break;case 5:if(Xn(t,e),lr(e),r&512&&n!==null&&co(n,n.return),e.flags&32){var i=e.stateNode;try{sl(i,"")}catch(x){gt(e,e.return,x)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&bw(i,a),xp(s,o);var u=xp(s,a);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?Aw(i,f):c==="dangerouslySetInnerHTML"?Tw(i,f):c==="children"?sl(i,f):hm(i,c,f,u)}switch(s){case"input":pp(i,a);break;case"textarea":Ew(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var d=a.value;d!=null?_o(i,!!a.multiple,d,!1):h!==!!a.multiple&&(a.defaultValue!=null?_o(i,!!a.multiple,a.defaultValue,!0):_o(i,!!a.multiple,a.multiple?[]:"",!1))}i[ml]=a}catch(x){gt(e,e.return,x)}}break;case 6:if(Xn(t,e),lr(e),r&4){if(e.stateNode===null)throw Error(J(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(x){gt(e,e.return,x)}}break;case 3:if(Xn(t,e),lr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fl(t.containerInfo)}catch(x){gt(e,e.return,x)}break;case 4:Xn(t,e),lr(e);break;case 13:Xn(t,e),lr(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(jm=xt())),r&4&&Ny(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Vt=(u=Vt)||c,Xn(t,e),Vt=u):Xn(t,e),lr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&(e.mode&1)!==0)for(fe=e,c=e.child;c!==null;){for(f=fe=c;fe!==null;){switch(h=fe,d=h.child,h.tag){case 0:case 11:case 14:case 15:Xs(4,h,h.return);break;case 1:co(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(x){gt(r,n,x)}}break;case 5:co(h,h.return);break;case 22:if(h.memoizedState!==null){Fy(f);continue}}d!==null?(d.return=h,fe=d):Fy(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=Pw("display",o))}catch(x){gt(e,e.return,x)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){gt(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Xn(t,e),lr(e),r&4&&Ny(e);break;case 21:break;default:Xn(t,e),lr(e)}}function lr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(K_(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(sl(i,""),r.flags&=-33);var a=Iy(e);$p(e,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,s=Iy(e);Yp(e,s,o);break;default:throw Error(J(161))}}catch(l){gt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rS(e,t,n){fe=e,n1(e)}function n1(e,t,n){for(var r=(e.mode&1)!==0;fe!==null;){var i=fe,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Vu;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||Vt;s=Vu;var u=Vt;if(Vu=o,(Vt=l)&&!u)for(fe=i;fe!==null;)o=fe,l=o.child,o.tag===22&&o.memoizedState!==null?zy(i):l!==null?(l.return=o,fe=l):zy(i);for(;a!==null;)fe=a,n1(a),a=a.sibling;fe=i,Vu=s,Vt=u}ky(e)}else(i.subtreeFlags&8772)!==0&&a!==null?(a.return=i,fe=a):ky(e)}}function ky(e){for(;fe!==null;){var t=fe;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Vt||Ph(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Kn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&wy(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}wy(t,o,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&fl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Vt||t.flags&512&&qp(t)}catch(h){gt(t,t.return,h)}}if(t===e){fe=null;break}if(n=t.sibling,n!==null){n.return=t.return,fe=n;break}fe=t.return}}function Fy(e){for(;fe!==null;){var t=fe;if(t===e){fe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,fe=n;break}fe=t.return}}function zy(e){for(;fe!==null;){var t=fe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ph(4,t)}catch(l){gt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){gt(t,i,l)}}var a=t.return;try{qp(t)}catch(l){gt(t,a,l)}break;case 5:var o=t.return;try{qp(t)}catch(l){gt(t,o,l)}}}catch(l){gt(t,t.return,l)}if(t===e){fe=null;break}var s=t.sibling;if(s!==null){s.return=t.return,fe=s;break}fe=t.return}}var iS=Math.ceil,yf=si.ReactCurrentDispatcher,Hm=si.ReactCurrentOwner,In=si.ReactCurrentBatchConfig,Je=0,Lt=null,Mt=null,kt=0,gn=0,fo=Vi(0),Tt=0,Ml=null,Ma=0,Ah=0,Wm=0,qs=null,an=null,jm=0,ko=1/0,Br=null,xf=!1,Zp=null,Ri=null,Hu=!1,Ei=null,wf=0,Ys=0,Jp=null,Wc=-1,jc=0;function Zt(){return(Je&6)!==0?xt():Wc!==-1?Wc:Wc=xt()}function Oi(e){return(e.mode&1)===0?1:(Je&2)!==0&&kt!==0?kt&-kt:GE.transition!==null?(jc===0&&(jc=Uw()),jc):(e=tt,e!==0||(e=window.event,e=e===void 0?16:qw(e.type)),e)}function or(e,t,n,r){if(50<Ys)throw Ys=0,Jp=null,Error(J(185));mu(e,n,r),((Je&2)===0||e!==Lt)&&(e===Lt&&((Je&2)===0&&(Ah|=n),Tt===4&&Mi(e,kt)),cn(e,r),n===1&&Je===0&&(t.mode&1)===0&&(ko=xt()+500,Eh&&Hi()))}function cn(e,t){var n=e.callbackNode;Gb(e,t);var r=nf(e,e===Lt?kt:0);if(r===0)n!==null&&qg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&qg(n),t===1)e.tag===0?UE(By.bind(null,e)):h_(By.bind(null,e)),kE(function(){(Je&6)===0&&Hi()}),n=null;else{switch(Gw(r)){case 1:n=gm;break;case 4:n=zw;break;case 16:n=tf;break;case 536870912:n=Bw;break;default:n=tf}n=c1(n,r1.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function r1(e,t){if(Wc=-1,jc=0,(Je&6)!==0)throw Error(J(327));var n=e.callbackNode;if(To()&&e.callbackNode!==n)return null;var r=nf(e,e===Lt?kt:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=_f(e,r);else{t=r;var i=Je;Je|=2;var a=a1();(Lt!==e||kt!==t)&&(Br=null,ko=xt()+500,pa(e,t));do try{sS();break}catch(s){i1(e,s)}while(1);Cm(),yf.current=a,Je=i,Mt!==null?t=0:(Lt=null,kt=0,t=Tt)}if(t!==0){if(t===2&&(i=Ep(e),i!==0&&(r=i,t=Qp(e,i))),t===1)throw n=Ml,pa(e,0),Mi(e,r),cn(e,xt()),n;if(t===6)Mi(e,r);else{if(i=e.current.alternate,(r&30)===0&&!aS(i)&&(t=_f(e,r),t===2&&(a=Ep(e),a!==0&&(r=a,t=Qp(e,a))),t===1))throw n=Ml,pa(e,0),Mi(e,r),cn(e,xt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(J(345));case 2:sa(e,an,Br);break;case 3:if(Mi(e,r),(r&130023424)===r&&(t=jm+500-xt(),10<t)){if(nf(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Zt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Op(sa.bind(null,e,an,Br),t);break}sa(e,an,Br);break;case 4:if(Mi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-ar(r);a=1<<o,o=t[o],o>i&&(i=o),r&=~a}if(r=i,r=xt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iS(r/1960))-r,10<r){e.timeoutHandle=Op(sa.bind(null,e,an,Br),r);break}sa(e,an,Br);break;case 5:sa(e,an,Br);break;default:throw Error(J(329))}}}return cn(e,xt()),e.callbackNode===n?r1.bind(null,e):null}function Qp(e,t){var n=qs;return e.current.memoizedState.isDehydrated&&(pa(e,t).flags|=256),e=_f(e,t),e!==2&&(t=an,an=n,t!==null&&Kp(t)),e}function Kp(e){an===null?an=e:an.push.apply(an,e)}function aS(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mi(e,t){for(t&=~Wm,t&=~Ah,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ar(t),r=1<<n;e[n]=-1,t&=~r}}function By(e){if((Je&6)!==0)throw Error(J(327));To();var t=nf(e,0);if((t&1)===0)return cn(e,xt()),null;var n=_f(e,t);if(e.tag!==0&&n===2){var r=Ep(e);r!==0&&(t=r,n=Qp(e,r))}if(n===1)throw n=Ml,pa(e,0),Mi(e,t),cn(e,xt()),n;if(n===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sa(e,an,Br),cn(e,xt()),null}function Xm(e,t){var n=Je;Je|=1;try{return e(t)}finally{Je=n,Je===0&&(ko=xt()+500,Eh&&Hi())}}function ba(e){Ei!==null&&Ei.tag===0&&(Je&6)===0&&To();var t=Je;Je|=1;var n=In.transition,r=tt;try{if(In.transition=null,tt=1,e)return e()}finally{tt=r,In.transition=n,Je=t,(Je&6)===0&&Hi()}}function qm(){gn=fo.current,ut(fo)}function pa(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,NE(n)),Mt!==null)for(n=Mt.return;n!==null;){var r=n;switch(Pm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lf();break;case 3:Io(),ut(ln),ut(Wt),km();break;case 5:Nm(r);break;case 4:Io();break;case 13:ut(dt);break;case 19:ut(dt);break;case 10:Rm(r.type._context);break;case 22:case 23:qm()}n=n.return}if(Lt=e,Mt=e=Di(e.current,null),kt=gn=t,Tt=0,Ml=null,Wm=Ah=Ma=0,an=qs=null,ca!==null){for(t=0;t<ca.length;t++)if(n=ca[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}ca=null}return e}function i1(e,t){do{var n=Mt;try{if(Cm(),Gc.current=gf,mf){for(var r=pt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}mf=!1}if(_a=0,At=St=pt=null,js=!1,xl=0,Hm.current=null,n===null||n.return===null){Tt=1,Ml=t,Mt=null;break}e:{var a=e,o=n.return,s=n,l=t;if(t=kt,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,f=c.tag;if((c.mode&1)===0&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=Ty(o);if(d!==null){d.flags&=-257,Py(d,o,s,a,t),d.mode&1&&Sy(a,u,t),t=d,l=u;var p=t.updateQueue;if(p===null){var x=new Set;x.add(l),t.updateQueue=x}else p.add(l);break e}else{if((t&1)===0){Sy(a,u,t),Ym();break e}l=Error(J(426))}}else if(ft&&s.mode&1){var y=Ty(o);if(y!==null){(y.flags&65536)===0&&(y.flags|=256),Py(y,o,s,a,t),Am(No(l,s));break e}}a=l=No(l,s),Tt!==4&&(Tt=2),qs===null?qs=[a]:qs.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=G_(a,l,t);xy(a,v);break e;case 1:s=l;var m=a.type,w=a.stateNode;if((a.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ri===null||!Ri.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t;var g=V_(a,s,t);xy(a,g);break e}}a=a.return}while(a!==null)}s1(n)}catch(_){t=_,Mt===n&&n!==null&&(Mt=n=n.return);continue}break}while(1)}function a1(){var e=yf.current;return yf.current=gf,e===null?gf:e}function Ym(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Lt===null||(Ma&268435455)===0&&(Ah&268435455)===0||Mi(Lt,kt)}function _f(e,t){var n=Je;Je|=2;var r=a1();(Lt!==e||kt!==t)&&(Br=null,pa(e,t));do try{oS();break}catch(i){i1(e,i)}while(1);if(Cm(),Je=n,yf.current=r,Mt!==null)throw Error(J(261));return Lt=null,kt=0,Tt}function oS(){for(;Mt!==null;)o1(Mt)}function sS(){for(;Mt!==null&&!Ob();)o1(Mt)}function o1(e){var t=u1(e.alternate,e,gn);e.memoizedProps=e.pendingProps,t===null?s1(e):Mt=t,Hm.current=null}function s1(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=KE(n,t,gn),n!==null){Mt=n;return}}else{if(n=eS(n,t),n!==null){n.flags&=32767,Mt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Tt=6,Mt=null;return}}if(t=t.sibling,t!==null){Mt=t;return}Mt=t=e}while(t!==null);Tt===0&&(Tt=5)}function sa(e,t,n){var r=tt,i=In.transition;try{In.transition=null,tt=1,lS(e,t,n,r)}finally{In.transition=i,tt=r}return null}function lS(e,t,n,r){do To();while(Ei!==null);if((Je&6)!==0)throw Error(J(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(Vb(e,a),e===Lt&&(Mt=Lt=null,kt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Hu||(Hu=!0,c1(tf,function(){return To(),null})),a=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||a){a=In.transition,In.transition=null;var o=tt;tt=1;var s=Je;Je|=4,Hm.current=null,nS(e,n),t1(n,e),AE(Cp),rf=!!Lp,Cp=Lp=null,e.current=n,rS(n),Db(),Je=s,tt=o,In.transition=a}else e.current=n;if(Hu&&(Hu=!1,Ei=e,wf=i),a=e.pendingLanes,a===0&&(Ri=null),kb(n.stateNode),cn(e,xt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xf)throw xf=!1,e=Zp,Zp=null,e;return(wf&1)!==0&&e.tag!==0&&To(),a=e.pendingLanes,(a&1)!==0?e===Jp?Ys++:(Ys=0,Jp=e):Ys=0,Hi(),null}function To(){if(Ei!==null){var e=Gw(wf),t=In.transition,n=tt;try{if(In.transition=null,tt=16>e?16:e,Ei===null)var r=!1;else{if(e=Ei,Ei=null,wf=0,(Je&6)!==0)throw Error(J(331));var i=Je;for(Je|=4,fe=e.current;fe!==null;){var a=fe,o=a.child;if((fe.flags&16)!==0){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(fe=u;fe!==null;){var c=fe;switch(c.tag){case 0:case 11:case 15:Xs(8,c,a)}var f=c.child;if(f!==null)f.return=c,fe=f;else for(;fe!==null;){c=fe;var h=c.sibling,d=c.return;if(Q_(c),c===u){fe=null;break}if(h!==null){h.return=d,fe=h;break}fe=d}}}var p=a.alternate;if(p!==null){var x=p.child;if(x!==null){p.child=null;do{var y=x.sibling;x.sibling=null,x=y}while(x!==null)}}fe=a}}if((a.subtreeFlags&2064)!==0&&o!==null)o.return=a,fe=o;else e:for(;fe!==null;){if(a=fe,(a.flags&2048)!==0)switch(a.tag){case 0:case 11:case 15:Xs(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,fe=v;break e}fe=a.return}}var m=e.current;for(fe=m;fe!==null;){o=fe;var w=o.child;if((o.subtreeFlags&2064)!==0&&w!==null)w.return=o,fe=w;else e:for(o=m;fe!==null;){if(s=fe,(s.flags&2048)!==0)try{switch(s.tag){case 0:case 11:case 15:Ph(9,s)}}catch(_){gt(s,s.return,_)}if(s===o){fe=null;break e}var g=s.sibling;if(g!==null){g.return=s.return,fe=g;break e}fe=s.return}}if(Je=i,Hi(),xr&&typeof xr.onPostCommitFiberRoot=="function")try{xr.onPostCommitFiberRoot(xh,e)}catch{}r=!0}return r}finally{tt=n,In.transition=t}}return!1}function Uy(e,t,n){t=No(n,t),t=G_(e,t,1),e=Ci(e,t,1),t=Zt(),e!==null&&(mu(e,1,t),cn(e,t))}function gt(e,t,n){if(e.tag===3)Uy(e,e,n);else for(;t!==null;){if(t.tag===3){Uy(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ri===null||!Ri.has(r))){e=No(n,e),e=V_(t,e,1),t=Ci(t,e,1),e=Zt(),t!==null&&(mu(t,1,e),cn(t,e));break}}t=t.return}}function uS(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Zt(),e.pingedLanes|=e.suspendedLanes&n,Lt===e&&(kt&n)===n&&(Tt===4||Tt===3&&(kt&130023424)===kt&&500>xt()-jm?pa(e,0):Wm|=n),cn(e,t)}function l1(e,t){t===0&&((e.mode&1)===0?t=1:(t=Du,Du<<=1,(Du&130023424)===0&&(Du=4194304)));var n=Zt();e=Jr(e,t),e!==null&&(mu(e,t,n),cn(e,n))}function cS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),l1(e,n)}function fS(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(t),l1(e,n)}var u1;u1=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ln.current)on=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return on=!1,QE(e,t,n);on=(e.flags&131072)!==0}else on=!1,ft&&(t.flags&1048576)!==0&&d_(t,ff,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hc(e,t),e=t.pendingProps;var i=Ro(t,Wt.current);So(t,n),i=zm(null,t,r,e,i,n);var a=Bm();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,un(r)?(a=!0,uf(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Dm(t),i.updater=Th,t.stateNode=i,i._reactInternals=t,Bp(t,r,e,n),t=Vp(null,t,r,!0,a,n)):(t.tag=0,ft&&a&&Tm(t),$t(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hc(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=dS(r),e=Kn(r,e),i){case 0:t=Gp(null,t,r,e,n);break e;case 1:t=Cy(null,t,r,e,n);break e;case 11:t=Ay(null,t,r,e,n);break e;case 14:t=Ly(null,t,r,Kn(r.type,e),n);break e}throw Error(J(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Kn(r,i),Gp(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Kn(r,i),Cy(e,t,r,i,n);case 3:e:{if(X_(t),e===null)throw Error(J(387));r=t.pendingProps,a=t.memoizedState,i=a.element,x_(e,t),pf(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=No(Error(J(423)),t),t=Ry(e,t,r,n,i);break e}else if(r!==i){i=No(Error(J(424)),t),t=Ry(e,t,r,n,i);break e}else for(yn=Li(t.stateNode.containerInfo.firstChild),wn=t,ft=!0,tr=null,n=g_(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oo(),r===i){t=Qr(e,t,n);break e}$t(e,t,r,n)}t=t.child}return t;case 5:return w_(t),e===null&&kp(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,Rp(r,i)?o=null:a!==null&&Rp(r,a)&&(t.flags|=32),j_(e,t),$t(e,t,o,n),t.child;case 6:return e===null&&kp(t),null;case 13:return q_(e,t,n);case 4:return Im(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Do(t,null,r,n):$t(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Kn(r,i),Ay(e,t,r,i,n);case 7:return $t(e,t,t.pendingProps,n),t.child;case 8:return $t(e,t,t.pendingProps.children,n),t.child;case 12:return $t(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,at(hf,r._currentValue),r._currentValue=o,a!==null)if(sr(a.value,o)){if(a.children===i.children&&!ln.current){t=Qr(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=qr(-1,n&-n),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Fp(a.return,n,t),s.lanes|=n;break}l=l.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(J(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),Fp(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}$t(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,So(t,n),i=Fn(i),r=r(i),t.flags|=1,$t(e,t,r,n),t.child;case 14:return r=t.type,i=Kn(r,t.pendingProps),i=Kn(r.type,i),Ly(e,t,r,i,n);case 15:return H_(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Kn(r,i),Hc(e,t),t.tag=1,un(r)?(e=!0,uf(t)):e=!1,So(t,n),U_(t,r,i),Bp(t,r,i,n),Vp(null,t,r,!0,e,n);case 19:return Y_(e,t,n);case 22:return W_(e,t,n)}throw Error(J(156,t.tag))};function c1(e,t){return Fw(e,t)}function hS(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(e,t,n,r){return new hS(e,t,n,r)}function $m(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dS(e){if(typeof e=="function")return $m(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pm)return 11;if(e===vm)return 14}return 2}function Di(e,t){var n=e.alternate;return n===null?(n=Dn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Xc(e,t,n,r,i,a){var o=2;if(r=e,typeof e=="function")$m(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case to:return va(n.children,i,a,t);case dm:o=8,i|=8;break;case up:return e=Dn(12,n,t,i|2),e.elementType=up,e.lanes=a,e;case cp:return e=Dn(13,n,t,i),e.elementType=cp,e.lanes=a,e;case fp:return e=Dn(19,n,t,i),e.elementType=fp,e.lanes=a,e;case ww:return Lh(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yw:o=10;break e;case xw:o=9;break e;case pm:o=11;break e;case vm:o=14;break e;case yi:o=16,r=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=Dn(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function va(e,t,n,r){return e=Dn(7,e,r,t),e.lanes=n,e}function Lh(e,t,n,r){return e=Dn(22,e,r,t),e.elementType=ww,e.lanes=n,e.stateNode={isHidden:!1},e}function md(e,t,n){return e=Dn(6,e,null,t),e.lanes=n,e}function gd(e,t,n){return t=Dn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function pS(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jh(0),this.expirationTimes=Jh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zm(e,t,n,r,i,a,o,s,l){return e=new pS(e,t,n,s,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Dn(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dm(a),e}function vS(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function f1(e){if(!e)return Fi;e=e._reactInternals;e:{if(ka(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(un(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var n=e.type;if(un(n))return f_(e,n,t)}return t}function h1(e,t,n,r,i,a,o,s,l){return e=Zm(n,r,!0,e,i,a,o,s,l),e.context=f1(null),n=e.current,r=Zt(),i=Oi(n),a=qr(r,i),a.callback=t!=null?t:null,Ci(n,a,i),e.current.lanes=i,mu(e,i,r),cn(e,r),e}function Ch(e,t,n,r){var i=t.current,a=Zt(),o=Oi(i);return n=f1(n),t.context===null?t.context=n:t.pendingContext=n,t=qr(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ci(i,t,o),e!==null&&(or(e,i,o,a),Uc(e,i,o)),o}function Mf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Jm(e,t){Gy(e,t),(e=e.alternate)&&Gy(e,t)}function mS(){return null}var d1=typeof reportError=="function"?reportError:function(e){console.error(e)};function Qm(e){this._internalRoot=e}Rh.prototype.render=Qm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));Ch(e,t,null,null)};Rh.prototype.unmount=Qm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ba(function(){Ch(null,e,null,null)}),t[Zr]=null}};function Rh(e){this._internalRoot=e}Rh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ww();e={blockedOn:null,target:e,priority:t};for(var n=0;n<_i.length&&t!==0&&t<_i[n].priority;n++);_i.splice(n,0,e),n===0&&Xw(e)}};function Km(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Oh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Vy(){}function gS(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=Mf(o);a.call(u)}}var o=h1(t,r,e,0,null,!1,!1,"",Vy);return e._reactRootContainer=o,e[Zr]=o.current,pl(e.nodeType===8?e.parentNode:e),ba(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var u=Mf(l);s.call(u)}}var l=Zm(e,0,!1,null,null,!1,!1,"",Vy);return e._reactRootContainer=l,e[Zr]=l.current,pl(e.nodeType===8?e.parentNode:e),ba(function(){Ch(t,l,n,r)}),l}function Dh(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=Mf(o);s.call(l)}}Ch(t,o,e,i)}else o=gS(n,t,e,i,r);return Mf(o)}Vw=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Is(t.pendingLanes);n!==0&&(ym(t,n|1),cn(t,xt()),(Je&6)===0&&(ko=xt()+500,Hi()))}break;case 13:ba(function(){var r=Jr(e,1);if(r!==null){var i=Zt();or(r,e,1,i)}}),Jm(e,1)}};xm=function(e){if(e.tag===13){var t=Jr(e,134217728);if(t!==null){var n=Zt();or(t,e,134217728,n)}Jm(e,134217728)}};Hw=function(e){if(e.tag===13){var t=Oi(e),n=Jr(e,t);if(n!==null){var r=Zt();or(n,e,t,r)}Jm(e,t)}};Ww=function(){return tt};jw=function(e,t){var n=tt;try{return tt=e,t()}finally{tt=n}};_p=function(e,t,n){switch(t){case"input":if(pp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bh(r);if(!i)throw Error(J(90));Mw(r),pp(r,i)}}}break;case"textarea":Ew(e,n);break;case"select":t=n.value,t!=null&&_o(e,!!n.multiple,t,!1)}};Rw=Xm;Ow=ba;var yS={usingClientEntryPoint:!1,Events:[yu,ao,bh,Lw,Cw,Xm]},bs={findFiberByHostInstance:ua,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xS={bundleType:bs.bundleType,version:bs.version,rendererPackageName:bs.rendererPackageName,rendererConfig:bs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:si.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Nw(e),e===null?null:e.stateNode},findFiberByHostInstance:bs.findFiberByHostInstance||mS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wu.isDisabled&&Wu.supportsFiber)try{xh=Wu.inject(xS),xr=Wu}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yS;Pn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Km(t))throw Error(J(200));return vS(e,t,null,n)};Pn.createRoot=function(e,t){if(!Km(e))throw Error(J(299));var n=!1,r="",i=d1;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Zm(e,1,!1,null,null,n,!1,r,i),e[Zr]=t.current,pl(e.nodeType===8?e.parentNode:e),new Qm(t)};Pn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=Nw(t),e=e===null?null:e.stateNode,e};Pn.flushSync=function(e){return ba(e)};Pn.hydrate=function(e,t,n){if(!Oh(t))throw Error(J(200));return Dh(null,e,t,!0,n)};Pn.hydrateRoot=function(e,t,n){if(!Km(e))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=d1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=h1(t,null,e,1,n!=null?n:null,i,!1,a,o),e[Zr]=t.current,pl(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Rh(t)};Pn.render=function(e,t,n){if(!Oh(t))throw Error(J(200));return Dh(null,e,t,!1,n)};Pn.unmountComponentAtNode=function(e){if(!Oh(e))throw Error(J(40));return e._reactRootContainer?(ba(function(){Dh(null,null,e,!1,function(){e._reactRootContainer=null,e[Zr]=null})}),!0):!1};Pn.unstable_batchedUpdates=Xm;Pn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Oh(n))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return Dh(e,t,n,!1,r)};Pn.version="18.3.1-next-f1338f8080-20240426";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}t(),e.exports=Pn})(pw);let Cn=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:globalThis||(typeof am<"u"?am:{});Cn.requestAnimationFrame;let p1=Cn.cancelAnimationFrame||(e=>Cn.clearTimeout(e));const gi=function(){if(typeof process<"u"&&process.hrtime!==void 0&&(!process.versions||process.versions.electron===void 0))return function(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6};if(Cn.performance!==void 0&&Cn.performance.now!==void 0)return Cn.performance.now.bind(Cn.performance);{const e=Cn.performance&&Cn.performance.timing&&Cn.performance.timing.navigationStart?Cn.performance.timing.navigationStart:Date.now();return function(){return Date.now()-e}}}();/**
 * Lightweight, effecient and modular ES6 version of tween.js
 * @copyright 2019 @dalisoft and es6-tween contributors
 * @license MIT
 * @namespace TWEEN
 * @example
 * // ES6
 * const {add, remove, isRunning, autoPlay} = TWEEN
 */const nr=[];let eg=!1,Hy=[],qc=0,wS=120,v1,m1=!0;const _S=()=>{for(let e=0;e<Hy.length;e++)Hy[e]()},ju=e=>{let t=nr.indexOf(e);t>-1&&nr.splice(t,1),nr.push(e),qc=0},ks=e=>{const t=nr.indexOf(e);t!==-1&&nr.splice(t,1),nr.length===0&&(p1(v1),eg=!1)},MS=(e=gi(),t)=>{if(qc>=wS&&m1)return eg=!1,qc=0,p1(v1),!1;_S(),nr.length||qc++;let n=0,r=nr.length;for(;n<r;)nr[n++].update(e,t),r>nr.length&&n--,r=nr.length;return!0},bS=()=>eg,ES=()=>m1,Dr={},$s={Linear:{None(e){return e}},Quadratic:{In(e){return Math.pow(e,2)},Out(e){return e*(2-e)},InOut(e){return(e*=2)<1?.5*Math.pow(e,2):-.5*(--e*(e-2)-1)}},Cubic:{In(e){return Math.pow(e,3)},Out(e){return--e*e*e+1},InOut(e){return(e*=2)<1?.5*Math.pow(e,3):.5*((e-=2)*e*e+2)}},Quartic:{In(e){return Math.pow(e,4)},Out(e){return 1- --e*e*e*e},InOut(e){return(e*=2)<1?.5*Math.pow(e,4):-.5*((e-=2)*e*e*e-2)}},Quintic:{In(e){return Math.pow(e,5)},Out(e){return--e*e*e*e*e+1},InOut(e){return(e*=2)<1?.5*Math.pow(e,5):.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In(e){return 1-Math.cos(e*Math.PI/2)},Out(e){return Math.sin(e*Math.PI/2)},InOut(e){return .5*(1-Math.cos(Math.PI*e))}},Exponential:{In(e){return e===0?0:Math.pow(1024,e-1)},Out(e){return e===1?1:1-Math.pow(2,-10*e)},InOut(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In(e){return 1-Math.sqrt(1-e*e)},Out(e){return Math.sqrt(1- --e*e)},InOut(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}},Back:{In(e){return e*e*((1.70158+1)*e-1.70158)},Out(e){return--e*e*((1.70158+1)*e+1.70158)+1},InOut(e){const t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In(e){return 1-$s.Bounce.Out(1-e)},Out(e){let t=2.75,n=7.5625;return e<1/t?n*e*e:e<2/t?n*(e-=1.5/t)*e+.75:e<2.5/t?n*(e-=2.25/t)*e+.9375:n*(e-=2.625/t)*e+.984375},InOut(e){return e<.5?$s.Bounce.In(e*2)*.5:$s.Bounce.Out(e*2-1)*.5+.5}},Stepped:{steps:e=>t=>(t*e|0)/e}},SS=50/3,TS=250,Wy="_chainedTweens",Xu="Callback",PS="update",AS="complete",LS="start",CS="repeat",RS="reverse",OS="pause",DS="play",IS="restart",NS="stop",kS="seek",ha="STRING_PROP",FS=/\s+|([A-Za-z?().,{}:""[\]#%]+)|([-+]=+)?([-+]+)?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]=?\d+)?/g;function g1(e){if(e&&e.nodeType||e===void 0||typeof e!="object")return e;if(Array.isArray(e))return[].concat(e);if(typeof e=="object"){let t={};for(let n in e)t[n]=g1(e[n]);return t}return e}const zS=e=>isNaN(+e)||(e[0]==="+"||e[0]==="-")&&e[1]==="="||e===""||e===" ",BS=/^#([0-9a-f]{6}|[0-9a-f]{3})$/gi,US=(e,t)=>{let n,r,i;t.length===3&&(n=t[0],r=t[1],i=t[2],t=n+n+r+r+i+i);let a=parseInt(t,16);return n=a>>16&255,r=a>>8&255,i=a&255,"rgb("+n+", "+r+", "+i+")"};function Fs(e){if(e&&e.splice&&e.isString||typeof e!="string"||e.charAt(1)==="=")return e;const t=e.replace(BS,US).match(FS).map(n=>zS(n)?n:+n);return t.isString=!0,t}function Zs(e,t,n,r){const i=n[e],a=r[e];if(i===a)return!0;if(Array.isArray(i)&&Array.isArray(a)&&i.length===a.length)for(let o=0,s=a.length;o<s;o++){const l=i[o],u=a[o];l===u||typeof l=="number"&&typeof u=="number"||Zs(o,t[e],i,a)}if(!(typeof i=="number"&&typeof a=="number")){if(!(i&&i.splice&&i.isString&&a&&a.splice&&a.isString)){if(typeof i=="string"&&Array.isArray(a)){const o=Fs(i),s=a.map(Fs);return n[e]=o,r[e]=s,!0}else if(typeof i=="string"||typeof a=="string"){let o=Array.isArray(i)&&i[0]===ha?i:Fs(i),s=Array.isArray(a)&&a[0]===ha?a:Fs(a);if(o===void 0)return;let l=1;for(;l<o.length;)o[l]===s[l]&&typeof o[l-1]=="string"?(o.splice(l-1,2,o[l-1]+o[l]),s.splice(l-1,2,s[l-1]+s[l])):l++;return l=0,o[0]===ha&&o.shift(),s[0]===ha&&s.shift(),n[e]=o,r[e]=s,!0}else if(typeof i=="object"&&typeof a=="object"){if(Array.isArray(i)&&!i.isString)return i.map((o,s)=>Zs(s,t[e],i,a));for(let o in a)Zs(o,t[e],i,a);return!0}}}return!1}const GS="rgb(",ev="rgba(",ho=(e,t,n=GS)=>typeof e[t]=="number"&&(e[t-1]===n||e[t-3]===n||e[t-5]===n);function tv(e,t,n,r,i,a,o){const s=o?n:n[e];let l=o?r:r[e];if(l===void 0)return s;if(s===void 0||typeof s=="string"||s===l)return l;if(typeof s=="object"&&typeof l=="object"){if(!s||!l)return t[e];if(typeof s=="object"&&!!s&&s.isString&&l&&l.splice&&l.isString){let u="";for(let c=0,f=s.length;c<f;c++)if(s[c]!==l[c]||typeof s[c]!="number"||typeof l[c]=="number"){const h=typeof s[c]=="number"&&typeof l[c]=="string"&&l[c][1]==="=";let d=typeof s[c]!="number"?s[c]:h?s[c]+parseFloat(l[c][0]+l[c].substr(2))*i:s[c]+(l[c]-s[c])*i;(ho(s,c)||ho(s,c,ev))&&(d|=0),u+=d,h&&a===1&&(s[c]=s[c]+parseFloat(l[c][0]+l[c].substr(2)))}else u+=s[c];return o||(t[e]=u),u}else if(Array.isArray(s)&&s[0]!==ha)for(let u=0,c=s.length;u<c;u++)s[u]===l[u]||typeof t[e]=="string"||tv(u,t[e],s,l,i,a);else if(typeof s=="object"&&!!s&&!s.isString)for(let u in s)s[u]!==l[u]&&tv(u,t[e],s,l,i,a)}else if(typeof s=="number"){const u=typeof l=="string";t[e]=u?s+parseFloat(l[0]+l.substr(2))*i:s+(l-s)*i,u&&a===1&&(n[e]=t[e])}else typeof l=="function"&&(t[e]=l(i));return t[e]}const VS=/([.[])/g,HS=/\]/g,yd=function(e,t){const n=e[t],r=t.replace(HS,"").split(VS),i=r.length-1;let a=Array.isArray(e),o=typeof e=="object"&&!a;return o?(e[t]=null,delete e[t]):a&&e.splice(t,1),r.reduce((s,l,u)=>{a&&l!=="."&&l!=="["&&(l*=1);let f=r[u+1]==="[";if(l==="."||l==="[")return l==="."?(o=!0,a=!1):l==="["&&(o=!1,a=!0),s;if(s[l]===void 0){if(a||o)return s[l]=u===i?n:a||f?[]:o?{}:null,o=a=!1,s[l]}else if(s[l]!==void 0)return u===i&&(s[l]=n),s[l];return s},e)},jy=function(e){if(typeof e=="object"&&!!e){for(let t in e)if(t.indexOf(".")!==-1||t.indexOf("[")!==-1)yd(e,t);else if(typeof e[t]=="object"&&!!e[t]){let n=e[t];for(let r in n)if(r.indexOf(".")!==-1||r.indexOf("[")!==-1)yd(n,r);else if(typeof n[r]=="object"&&!!n[r]){let i=n[r];for(let a in i)(a.indexOf(".")!==-1||a.indexOf("[")!==-1)&&yd(i,a)}}}return e},nn={Linear(e,t,n){const r=e.length-1,i=r*t,a=Math.floor(i),o=nn.Utils.Linear;return t<0?o(e[0],e[1],i,n):t>1?o(e[r],e[r-1],r-i,n):o(e[a],e[a+1>r?r:a+1],i-a,n)},Bezier(e,t,n){let r=nn.Utils.Reset(n),i=e.length-1,a=Math.pow,o=nn.Utils.Bernstein,s=Array.isArray(r);for(let l=0;l<=i;l++)if(typeof r=="number")r+=a(1-t,i-l)*a(t,l)*e[l]*o(i,l);else if(s)for(let u=0,c=r.length;u<c;u++)typeof r[u]=="number"?r[u]+=a(1-t,i-l)*a(t,l)*e[l][u]*o(i,l):r[u]=e[l][u];else if(typeof r=="object")for(let u in r)typeof r[u]=="number"?r[u]+=a(1-t,i-l)*a(t,l)*e[l][u]*o(i,l):r[u]=e[l][u];else if(typeof r=="string"){let u="",c=Math.round(i*t),f=e[c];for(let h=1,d=f.length;h<d;h++)u+=f[h];return u}return r},CatmullRom(e,t,n){const r=e.length-1;let i=r*t,a=Math.floor(i);const o=nn.Utils.CatmullRom;return e[0]===e[r]?(t<0&&(a=Math.floor(i=r*(1+t))),o(e[(a-1+r)%r],e[a],e[(a+1)%r],e[(a+2)%r],i-a,n)):t<0?o(e[1],e[1],e[0],e[0],-t,n):t>1?o(e[r-1],e[r-1],e[r],e[r],(t|0)-t,n):o(e[a?a-1:0],e[a],e[r<a+1?r:a+1],e[r<a+2?r:a+2],i-a,n)},Utils:{Linear(e,t,n,r){if(e===t||typeof e=="string"){if(t.length&&t.splice&&t.isString){t="";for(let i=0,a=e.length;i<a;i++)t+=e[i]}return t}else{if(typeof e=="number")return typeof e=="function"?e(n):e+(t-e)*n;if(typeof e=="object"){if(e.length!==void 0){const i=typeof e[0]=="string"||e.isString;if(i||e[0]===ha){let a="";for(let o=i?0:1,s=e.length;o<s;o++){let l=n===0?e[o]:n===1?t[o]:typeof e[o]=="number"?e[o]+(t[o]-e[o])*n:t[o];(n>0&&n<1&&ho(e,o)||ho(e,o,ev))&&(l|=0),a+=l}return a}else if(r&&r.length&&r.splice)for(let a=0,o=r.length;a<o;a++)r[a]=nn.Utils.Linear(e[a],t[a],n,r[a])}else for(const i in r)r[i]=nn.Utils.Linear(e[i],t[i],n,r[i]);return r}}},Reset(e){if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)e[t]=nn.Utils.Reset(e[t]);return e}else if(typeof e=="object"){for(let t in e)e[t]=nn.Utils.Reset(e[t]);return e}else if(typeof e=="number")return 0;return e},Bernstein(e,t){const n=nn.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){const e=[1];return t=>{let n=1;if(e[t])return e[t];for(let r=t;r>1;r--)n*=r;return e[t]=n,n}}(),CatmullRom(e,t,n,r,i,a){if(typeof e=="string")return t;if(typeof e=="number"){const o=(n-e)*.5,s=(r-t)*.5,l=i*i,u=i*l;return(2*t-2*n+o+s)*u+(-3*t+3*n-2*o-s)*l+o*i+t}else if(typeof e=="object"){if(e.length!==void 0){if(e[0]===ha){let o="";for(let s=1,l=e.length;s<l;s++){let u=typeof e[s]=="number"?nn.Utils.CatmullRom(e[s],t[s],n[s],r[s],i):r[s];(ho(e,s)||ho(e,s,ev))&&(u|=0),o+=u}return o}for(let o=0,s=a.length;o<s;o++)a[o]=nn.Utils.CatmullRom(e[o],t[o],n[o],r[o],i,a[o])}else for(const o in a)a[o]=nn.Utils.CatmullRom(e[o],t[o],n[o],r[o],i,a[o]);return a}}}},Js={};function Xy(e,t,n){if(!e||!e.nodeType)return t;const r=e.queueID||"q_"+Date.now();e.queueID||(e.queueID=r);const i=Js[r];if(i){if(i.object===t&&e===i.tween.node&&n._startTime===i.tween._startTime)ks(i.tween);else if(typeof t=="object"&&!!t&&!!i.object){for(let a in t)a in i.object&&(n._startTime===i.tween._startTime?delete i.object[a]:i.propNormaliseRequired=!0);Object.assign(i.object,t)}return i.object}return typeof t=="object"&&!!t?(Js[r]={tween:n,object:t,propNormaliseRequired:!1},Js[r].object):t}function WS(e,t,n){return t?e?typeof window<"u"&&e===window||typeof document<"u"&&e===document?[e]:typeof e=="string"?!!document.querySelectorAll&&document.querySelectorAll(e):Array.isArray(e)?e:e.nodeType?[e]:n?e:[]:null:e?typeof window<"u"&&e===window||typeof document<"u"&&e===document?e:typeof e=="string"?!!document.querySelector&&document.querySelector(e):Array.isArray(e)?e[0]:e.nodeType||n?e:null:null}let qy=0;const xd=$s.Linear.None;class Jn{static fromTo(t,n,r,i={}){i.quickRender=i.quickRender?i.quickRender:!r;const a=new Jn(t,n).to(r,i);return i.quickRender&&(a.render().update(a._startTime),a._rendered=!1,a._onStartCallbackFired=!1),a}static to(t,n,r){return Jn.fromTo(t,null,n,r)}static from(t,n,r){return Jn.fromTo(t,n,null,r)}constructor(t,n){return this.id=qy++,!!t&&typeof t=="object"&&!n&&!t.nodeType?(n=this.object=t,t=null):!!t&&(t.nodeType||t.length||typeof t=="string")&&(t=this.node=WS(t),n=this.object=Xy(t,n,this)),this._valuesEnd=null,this._valuesStart=Array.isArray(n)?[]:{},this._duration=1e3,this._easingFunction=xd,this._easingReverse=xd,this._interpolationFunction=nn.Linear,this._startTime=0,this._initTime=0,this._delayTime=0,this._repeat=0,this._r=0,this._isPlaying=!1,this._yoyo=!1,this._reversed=!1,this._onStartCallbackFired=!1,this._pausedTime=null,this._isFinite=!0,this._maxListener=15,this._chainedTweensCount=0,this._prevTime=null,this}setMaxListener(t=15){return this._maxListener=t,this}on(t,n){const{_maxListener:r}=this,i=t+Xu;for(let a=0;a<r;a++){const o=i+a;if(!this[o]){this[o]=n;break}}return this}once(t,n){const{_maxListener:r}=this,i=t+Xu;for(let a=0;a<r;a++){const o=i+a;if(!this[o]){this[o]=(...s)=>{n.apply(this,s),this[o]=null};break}}return this}off(t,n){const{_maxListener:r}=this,i=t+Xu;for(let a=0;a<r;a++){const o=i+a;this[o]===n&&(this[o]=null)}return this}emit(t,n,r,i){const{_maxListener:a}=this,o=t+Xu;if(!this[o+0])return this;for(let s=0;s<a;s++){const l=o+s;this[l]&&this[l](n,r,i)}return this}isPlaying(){return this._isPlaying}isStarted(){return this._onStartCallbackFired}reverse(t){const{_reversed:n}=this;return this._reversed=t!==void 0?t:!n,this}reversed(){return this._reversed}pause(){return this._isPlaying?(this._isPlaying=!1,ks(this),this._pausedTime=gi(),this.emit(OS,this.object)):this}play(){return this._isPlaying?this:(this._isPlaying=!0,this._startTime+=gi()-this._pausedTime,this._initTime=this._startTime,ju(this),this._pausedTime=gi(),this.emit(DS,this.object))}restart(t){return this._repeat=this._r,this.reassignValues(),ju(this),this.emit(IS,this.object)}seek(t,n){const{_duration:r,_initTime:i,_startTime:a,_reversed:o}=this;let s=i+t;return this._isPlaying=!0,s<a&&a>=i&&(this._startTime-=r,this._reversed=!o),this.update(t,!1),this.emit(kS,t,this.object),n?this:this.pause()}duration(t){return this._duration=typeof t=="function"?t(this._duration):t,this}to(t,n=1e3,r){if(this._valuesEnd=t,typeof n=="number"||typeof n=="function")this._duration=typeof n=="function"?n(this._duration):n;else if(typeof n=="object"){for(const i in n)if(typeof this[i]=="function"){const[a=null,o=null,s=null,l=null]=Array.isArray(n[i])?n[i]:[n[i]];this[i](a,o,s,l)}}return this}render(){if(this._rendered)return this;let{_valuesStart:t,_valuesEnd:n,object:r,node:i,InitialValues:a}=this;if(jy(r),jy(n),i&&i.queueID&&Js[i.queueID]){const o=Js[i.queueID];if(o.propNormaliseRequired&&o.tween!==this){for(const s in n)o.tween._valuesEnd[s];o.normalisedProp=!0,o.propNormaliseRequired=!1}}if(i&&a&&(!r||Object.keys(r).length===0?r=this.object=Xy(i,a(i,n),this):(!n||Object.keys(n).length===0)&&(n=this._valuesEnd=a(i,r))),!t.processed){for(const o in n){let s=r&&r[o]&&g1(r[o]),l=n[o];if(!(Dr[o]&&Dr[o].init&&(Dr[o].init.call(this,s,l,o,r),s===void 0&&t[o]&&(s=t[o]),Dr[o].skipProcess))&&!(typeof s=="number"&&isNaN(s)||s===null||l===null||s===!1||l===!1||s===void 0||l===void 0||s===l)){if(t[o]=s,Array.isArray(l))if(Array.isArray(s))l.isString&&r[o].isString&&!s.isString?s.isString=!0:Zs(o,r,t,n);else{l.unshift(s);for(let u=0,c=l.length;u<c;u++)typeof l[u]=="string"&&(l[u]=Fs(l[u]))}else Zs(o,r,t,n);typeof s=="number"&&typeof l=="string"&&l[1]}}t.processed=!0}return Jn.Renderer&&this.node&&Jn.Renderer.init&&(Jn.Renderer.init.call(this,r,t,n),this.__render=!0),this._rendered=!0,this}start(t){return this._startTime=t!==void 0?typeof t=="string"?gi()+parseFloat(t):t:gi(),this._startTime+=this._delayTime,this._initTime=this._prevTime=this._startTime,this._onStartCallbackFired=!1,this._rendered=!1,this._isPlaying=!0,ju(this),this}stop(){let{_isPlaying:t,_isFinite:n,object:r,_startTime:i,_duration:a,_r:o,_yoyo:s,_reversed:l}=this;if(!t)return this;let u=n?(o+1)%2===1:!l;return this._reversed=!1,s&&u?this.update(i):this.update(i+a),ks(this),this.emit(NS,r)}delay(t){return this._delayTime=typeof t=="function"?t(this._delayTime):t,this}chainedTweens(){if(this._chainedTweensCount=arguments.length,!this._chainedTweensCount)return this;for(let t=0,n=this._chainedTweensCount;t<n;t++)this[Wy+t]=arguments[t];return this}repeat(t){return this._repeat=this._duration?typeof t=="function"?t(this._repeat):t:0,this._r=this._repeat,this._isFinite=isFinite(t),this}reverseDelay(t){return this._reverseDelayTime=typeof t=="function"?t(this._reverseDelayTime):t,this}yoyo(t,n){return this._yoyo=typeof t=="function"?t(this._yoyo):t===null?this._yoyo:t,t||(this._reversed=!1),this._easingReverse=n||null,this}easing(t){return this._easingFunction=t,this}interpolation(t){return typeof t=="function"&&(this._interpolationFunction=t),this}reassignValues(t){const{_valuesStart:n,object:r,_delayTime:i}=this;this._isPlaying=!0,this._startTime=t!==void 0?t:gi(),this._startTime+=i,this._reversed=!1,ju(this);for(const a in n){const o=n[a];r[a]=o}return this}update(t,n,r){let{_onStartCallbackFired:i,_easingFunction:a,_interpolationFunction:o,_easingReverse:s,_repeat:l,_delayTime:u,_reverseDelayTime:c,_yoyo:f,_reversed:h,_startTime:d,_prevTime:p,_duration:x,_valuesStart:y,_valuesEnd:v,object:m,_isFinite:w,_isPlaying:g,__render:_,_chainedTweensCount:b}=this,E,S,O,D=0;if(!x)E=1,l=0;else{t=t!==void 0?t:gi();let L=t-p;if(this._prevTime=t,L>TS&&bS()&&ES()&&(t-=L-SS),!g||t<d&&!r)return!0;E=(t-d)/x,E=E>1?1:E,E=h?1-E:E}if(i||(this._rendered||(this.render(),this._rendered=!0),this.emit(LS,m),this._onStartCallbackFired=!0),S=h&&s||a,!m)return!0;for(O in v){const L=y[O];if(L==null&&!(Dr[O]&&Dr[O].update))continue;const R=v[O],N=S[O]?S[O](E):typeof S=="function"?S(E):xd(E),B=o[O]?o[O]:typeof o=="function"?o:nn.Linear;typeof R=="number"?m[O]=L+(R-L)*N:Array.isArray(R)&&!R.isString&&!Array.isArray(L)?m[O]=B(R,N,m[O]):R&&R.update?R.update(N):typeof R=="function"?m[O]=R(N):typeof R=="string"&&typeof L=="number"?m[O]=L+parseFloat(R[0]+R.substr(2))*N:tv(O,m,y,v,N,E),Dr[O]&&Dr[O].update&&Dr[O].update.call(this,m[O],L,R,N,E,O),D++}if(!D)return ks(this),!1;if(_&&Jn.Renderer&&Jn.Renderer.update&&Jn.Renderer.update.call(this,m,E),this.emit(PS,m,E,t),E===1||h&&E===0)if(l>0&&x>0){if(w&&this._repeat--,f)this._reversed=!h;else for(O in v){let L=v[O];typeof L=="string"&&typeof y[O]=="number"&&(y[O]+=parseFloat(L[0]+L.substr(2)))}return this.emit(f&&!h?RS:CS,m),h&&c?this._startTime=t-c:this._startTime=t+u,!0}else{if(n||(this._isPlaying=!1,ks(this),qy--),this.emit(AS,m),this._repeat=this._r,b)for(let L=0;L<b;L++)this[Wy+L].start(t+x);return!1}return!0}}Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e});Math.sign===void 0&&(Math.sign=function(e){return e<0?-1:e>0?1:+e});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t});var jS="109",pr={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},wi={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},XS=0,Yy=1,qS=2,y1=1,YS=2,zs=3,wu=0,Et=1,Ih=2,x1=1,w1=0,$S=1,_u=2,Qs=0,Ks=1,$y=2,Zy=3,Jy=4,ZS=5,po=100,JS=101,QS=102,wd=103,_d=104,KS=200,eT=201,tT=202,nT=203,_1=204,M1=205,rT=206,iT=207,aT=208,oT=209,sT=210,lT=0,uT=1,cT=2,nv=3,fT=4,hT=5,dT=6,pT=7,Nh=0,vT=1,mT=2,Yc=0,b1=1,gT=2,yT=3,xT=4,wT=5,tg=300,ng=301,rg=302,E1=303,ig=304,S1=305,ag=306,og=307,bf=1e3,sn=1001,Ef=1002,Ht=1003,sg=1004,lg=1005,Ft=1006,T1=1007,kh=1008,ug=1009,_T=1010,MT=1011,Sf=1012,bT=1013,P1=1014,bl=1015,cg=1016,ET=1017,ST=1018,TT=1019,Tf=1020,PT=1021,Ea=1022,Kr=1023,AT=1024,LT=1025,Po=1026,El=1027,CT=1028,Qy=33776,Ky=33777,e0=33778,t0=33779,n0=35840,r0=35841,i0=35842,a0=35843,RT=36196,OT=37808,DT=37809,IT=37810,NT=37811,kT=37812,FT=37813,zT=37814,BT=37815,UT=37816,GT=37817,VT=37818,HT=37819,WT=37820,jT=37821,XT=2200,qT=2201,YT=2202,Pf=2300,$c=2301,Md=2302,Fo=2400,vo=2401,Af=2402,fg=0,$T=1,ZT=2,Lf=3e3,JT=3001,A1=3007,QT=3002,KT=3003,e2=3004,t2=3005,n2=3006,r2=3200,i2=3201,Mu=0,a2=1,bd=7680,o2=519;function Pt(){}Object.assign(Pt.prototype,{addEventListener:function(e,t){this._listeners===void 0&&(this._listeners={});var n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)},hasEventListener:function(e,t){if(this._listeners===void 0)return!1;var n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(this._listeners!==void 0){var n=this._listeners,r=n[e];if(r!==void 0){var i=r.indexOf(t);i!==-1&&r.splice(i,1)}}},dispatchEvent:function(e){if(this._listeners!==void 0){var t=this._listeners,n=t[e.type];if(n!==void 0){e.target=this;for(var r=n.slice(0),i=0,a=r.length;i<a;i++)r[i].call(this,e)}}}});var Rt=[];for(var Es=0;Es<256;Es++)Rt[Es]=(Es<16?"0":"")+Es.toString(16);var Be={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Rt[e&255]+Rt[e>>8&255]+Rt[e>>16&255]+Rt[e>>24&255]+"-"+Rt[t&255]+Rt[t>>8&255]+"-"+Rt[t>>16&15|64]+Rt[t>>24&255]+"-"+Rt[n&63|128]+Rt[n>>8&255]+"-"+Rt[n>>16&255]+Rt[n>>24&255]+Rt[r&255]+Rt[r>>8&255]+Rt[r>>16&255]+Rt[r>>24&255];return i.toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(e*6-15)+10))},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Be.DEG2RAD},radToDeg:function(e){return e*Be.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)===0&&e!==0},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function X(e,t){this.x=e||0,this.y=t||0}Object.defineProperties(X.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}});Object.assign(X.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}});function Bt(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=r!==void 0?r:1}Object.assign(Bt,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,a,o){var s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],f=i[a+0],h=i[a+1],d=i[a+2],p=i[a+3];if(c!==p||s!==f||l!==h||u!==d){var x=1-o,y=s*f+l*h+u*d+c*p,v=y>=0?1:-1,m=1-y*y;if(m>Number.EPSILON){var w=Math.sqrt(m),g=Math.atan2(w,y*v);x=Math.sin(x*g)/w,o=Math.sin(o*g)/w}var _=o*v;if(s=s*x+f*_,l=l*x+h*_,u=u*x+d*_,c=c*x+p*_,x===1-o){var b=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=b,l*=b,u*=b,c*=b}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}});Object.defineProperties(Bt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}});Object.assign(Bt.prototype,{isQuaternion:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e.order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(r/2),c=o(i/2),f=s(n/2),h=s(r/2),d=s(i/2);return a==="XYZ"?(this._x=f*u*c+l*h*d,this._y=l*h*c-f*u*d,this._z=l*u*d+f*h*c,this._w=l*u*c-f*h*d):a==="YXZ"?(this._x=f*u*c+l*h*d,this._y=l*h*c-f*u*d,this._z=l*u*d-f*h*c,this._w=l*u*c+f*h*d):a==="ZXY"?(this._x=f*u*c-l*h*d,this._y=l*h*c+f*u*d,this._z=l*u*d+f*h*c,this._w=l*u*c-f*h*d):a==="ZYX"?(this._x=f*u*c-l*h*d,this._y=l*h*c+f*u*d,this._z=l*u*d-f*h*c,this._w=l*u*c+f*h*d):a==="YZX"?(this._x=f*u*c+l*h*d,this._y=l*h*c+f*u*d,this._z=l*u*d-f*h*c,this._w=l*u*c-f*h*d):a==="XZY"&&(this._x=f*u*c-l*h*d,this._y=l*h*c-f*u*d,this._z=l*u*d+f*h*c,this._w=l*u*c+f*h*d),t!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],f=n+o+c,h;return f>0?(h=.5/Math.sqrt(f+1),this._w=.25/h,this._x=(u-s)*h,this._y=(i-l)*h,this._z=(a-r)*h):n>o&&n>c?(h=2*Math.sqrt(1+n-o-c),this._w=(u-s)/h,this._x=.25*h,this._y=(r+a)/h,this._z=(i+l)/h):o>c?(h=2*Math.sqrt(1+o-n-c),this._w=(i-l)/h,this._x=(r+a)/h,this._y=.25*h,this._z=(s+u)/h):(h=2*Math.sqrt(1+c-n-o),this._w=(a-r)/h,this._x=(i+l)/h,this._y=(s+u)/h,this._z=.25*h),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=1e-6,r=e.dot(t)+1;return r<n?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(Be.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(n===0)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+a*o+r*l-i*s,this._y=r*u+a*s+i*o-n*l,this._z=i*u+a*l+n*s-r*o,this._w=a*u-n*o-r*s-i*l,this._onChangeCallback(),this},slerp:function(e,t){if(t===0)return this;if(t===1)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-t;return this._w=l*a+t*this._w,this._x=l*n+t*this._x,this._y=l*r+t*this._y,this._z=l*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,o),f=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=a*f+this._w*h,this._x=n*f+this._x*h,this._y=r*f+this._y*h,this._z=i*f+this._z*h,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return t===void 0&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var Ed=new A,o0=new Bt;function A(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}Object.assign(A.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(o0.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(o0.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*r-o*n,u=s*n+o*t-i*r,c=s*r+i*n-a*t,f=-i*t-a*n-o*r;return this.x=l*s+f*-i+u*-o-c*-a,this.y=u*s+f*-a+c*-i-l*-o,this.z=c*s+f*-o+l*-a-u*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(e){return Ed.copy(this).projectOnVector(e),this.sub(Ed)},reflect:function(e){return this.sub(Ed.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());t===0&&console.error("THREE.Vector3: angleTo() can't handle zero length vectors.");var n=this.dot(e)/t;return Math.acos(Be.clamp(n,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,t*4)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});var Yi=new A;function Ct(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Ct.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,a,o,s,l){var u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(e){for(var t=0,n=e.count;t<n;t++)Yi.x=e.getX(t),Yi.y=e.getY(t),Yi.z=e.getZ(t),Yi.applyMatrix3(this),e.setXYZ(t,Yi.x,Yi.y,Yi.z);return e},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],f=n[2],h=n[5],d=n[8],p=r[0],x=r[3],y=r[6],v=r[1],m=r[4],w=r[7],g=r[2],_=r[5],b=r[8];return i[0]=a*p+o*v+s*g,i[3]=a*x+o*m+s*_,i[6]=a*y+o*w+s*b,i[1]=l*p+u*v+c*g,i[4]=l*x+u*m+c*_,i[7]=l*y+u*w+c*b,i[2]=f*p+h*v+d*g,i[5]=f*x+h*m+d*_,i[8]=f*y+h*w+d*b,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-n*i*u+n*o*s+r*i*l-r*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],f=n[7],h=n[8],d=h*l-u*f,p=u*c-h*s,x=f*s-l*c,y=i*d+a*p+o*x;if(y===0){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(t===!0)throw new Error(v);return console.warn(v),this.identity()}var m=1/y;return r[0]=d*m,r[1]=(o*f-h*a)*m,r[2]=(u*a-o*l)*m,r[3]=p*m,r[4]=(h*i-o*c)*m,r[5]=(o*s-u*i)*m,r[6]=x*m,r[7]=(a*c-f*i)*m,r[8]=(l*i-a*s)*m,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,a,o){var s=Math.cos(i),l=Math.sin(i);this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],l=r[4],u=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*l,r[6]=t*o+n*u,r[1]=-n*i+t*s,r[4]=-n*a+t*l,r[7]=-n*o+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Ba,Sa={getDataURL:function(e){var t;if(typeof HTMLCanvasElement>"u")return e.src;if(e instanceof HTMLCanvasElement)t=e;else{Ba===void 0&&(Ba=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Ba.width=e.width,Ba.height=e.height;var n=Ba.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Ba}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},s2=0;function it(e,t,n,r,i,a,o,s,l,u){Object.defineProperty(this,"id",{value:s2++}),this.uuid=Be.generateUUID(),this.name="",this.image=e!==void 0?e:it.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=t!==void 0?t:it.DEFAULT_MAPPING,this.wrapS=n!==void 0?n:sn,this.wrapT=r!==void 0?r:sn,this.magFilter=i!==void 0?i:Ft,this.minFilter=a!==void 0?a:kh,this.anisotropy=l!==void 0?l:1,this.format=o!==void 0?o:Kr,this.type=s!==void 0?s:ug,this.offset=new X(0,0),this.repeat=new X(1,1),this.center=new X(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ct,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u!==void 0?u:Lf,this.version=0,this.onUpdate=null}it.DEFAULT_IMAGE=void 0;it.DEFAULT_MAPPING=tg;it.prototype=Object.assign(Object.create(Pt.prototype),{constructor:it,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var r=this.image;if(r.uuid===void 0&&(r.uuid=Be.generateUUID()),!t&&e.images[r.uuid]===void 0){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)i.push(Sa.getDataURL(r[a]))}else i=Sa.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==tg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case bf:e.x=e.x-Math.floor(e.x);break;case sn:e.x=e.x<0?0:1;break;case Ef:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case bf:e.y=e.y-Math.floor(e.y);break;case sn:e.y=e.y<0?0:1;break;case Ef:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}});Object.defineProperty(it.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});function et(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=r!==void 0?r:1}Object.defineProperties(et.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}});Object.assign(et.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,l=s[0],u=s[4],c=s[8],f=s[1],h=s[5],d=s[9],p=s[2],x=s[6],y=s[10];if(Math.abs(u-f)<a&&Math.abs(c-p)<a&&Math.abs(d-x)<a){if(Math.abs(u+f)<o&&Math.abs(c+p)<o&&Math.abs(d+x)<o&&Math.abs(l+h+y-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var v=(l+1)/2,m=(h+1)/2,w=(y+1)/2,g=(u+f)/4,_=(c+p)/4,b=(d+x)/4;return v>m&&v>w?v<a?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(v),r=g/n,i=_/n):m>w?m<a?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(m),n=g/r,i=b/r):w<a?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(w),n=_/i,r=b/i),this.set(n,r,i,t),this}var E=Math.sqrt((x-d)*(x-d)+(c-p)*(c-p)+(f-u)*(f-u));return Math.abs(E)<.001&&(E=1),this.x=(x-d)/E,this.y=(c-p)/E,this.z=(f-u)/E,this.w=Math.acos((l+h+y-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}});function fn(e,t,n){this.width=e,this.height=t,this.scissor=new et(0,0,e,t),this.scissorTest=!1,this.viewport=new et(0,0,e,t),n=n||{},this.texture=new it(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Ft,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!0,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}fn.prototype=Object.assign(Object.create(Pt.prototype),{constructor:fn,isWebGLRenderTarget:!0,setSize:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function s0(e,t,n){fn.call(this,e,t,n),this.samples=4}s0.prototype=Object.assign(Object.create(fn.prototype),{constructor:s0,isWebGLMultisampleRenderTarget:!0,copy:function(e){return fn.prototype.copy.call(this,e),this.samples=e.samples,this}});var pn=new A,qn=new Ge,l2=new A(0,0,0),u2=new A(1,1,1),hi=new A,qu=new A,vn=new A;function Ge(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Ge.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,a,o,s,l,u,c,f,h,d,p,x){var y=this.elements;return y[0]=e,y[4]=t,y[8]=n,y[12]=r,y[1]=i,y[5]=a,y[9]=o,y[13]=s,y[2]=l,y[6]=u,y[10]=c,y[14]=f,y[3]=h,y[7]=d,y[11]=p,y[15]=x,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Ge().fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,n=e.elements,r=1/pn.setFromMatrixColumn(e,0).length(),i=1/pn.setFromMatrixColumn(e,1).length(),a=1/pn.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if(e.order==="XYZ"){var f=a*u,h=a*c,d=o*u,p=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=h+d*l,t[5]=f-p*l,t[9]=-o*s,t[2]=p-f*l,t[6]=d+h*l,t[10]=a*s}else if(e.order==="YXZ"){var x=s*u,y=s*c,v=l*u,m=l*c;t[0]=x+m*o,t[4]=v*o-y,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=y*o-v,t[6]=m+x*o,t[10]=a*s}else if(e.order==="ZXY"){var x=s*u,y=s*c,v=l*u,m=l*c;t[0]=x-m*o,t[4]=-a*c,t[8]=v+y*o,t[1]=y+v*o,t[5]=a*u,t[9]=m-x*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if(e.order==="ZYX"){var f=a*u,h=a*c,d=o*u,p=o*c;t[0]=s*u,t[4]=d*l-h,t[8]=f*l+p,t[1]=s*c,t[5]=p*l+f,t[9]=h*l-d,t[2]=-l,t[6]=o*s,t[10]=a*s}else if(e.order==="YZX"){var w=a*s,g=a*l,_=o*s,b=o*l;t[0]=s*u,t[4]=b-w*c,t[8]=_*c+g,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=g*c+_,t[10]=w-b*c}else if(e.order==="XZY"){var w=a*s,g=a*l,_=o*s,b=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=w*c+b,t[5]=a*u,t[9]=g*c-_,t[2]=_*c-g,t[6]=o*u,t[10]=b*c+w}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(l2,e,u2)},lookAt:function(e,t,n){var r=this.elements;return vn.subVectors(e,t),vn.lengthSq()===0&&(vn.z=1),vn.normalize(),hi.crossVectors(n,vn),hi.lengthSq()===0&&(Math.abs(n.z)===1?vn.x+=1e-4:vn.z+=1e-4,vn.normalize(),hi.crossVectors(n,vn)),hi.normalize(),qu.crossVectors(vn,hi),r[0]=hi.x,r[4]=qu.x,r[8]=vn.x,r[1]=hi.y,r[5]=qu.y,r[9]=vn.y,r[2]=hi.z,r[6]=qu.z,r[10]=vn.z,this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],f=n[9],h=n[13],d=n[2],p=n[6],x=n[10],y=n[14],v=n[3],m=n[7],w=n[11],g=n[15],_=r[0],b=r[4],E=r[8],S=r[12],O=r[1],D=r[5],L=r[9],R=r[13],N=r[2],B=r[6],G=r[10],W=r[14],Y=r[3],z=r[7],V=r[11],j=r[15];return i[0]=a*_+o*O+s*N+l*Y,i[4]=a*b+o*D+s*B+l*z,i[8]=a*E+o*L+s*G+l*V,i[12]=a*S+o*R+s*W+l*j,i[1]=u*_+c*O+f*N+h*Y,i[5]=u*b+c*D+f*B+h*z,i[9]=u*E+c*L+f*G+h*V,i[13]=u*S+c*R+f*W+h*j,i[2]=d*_+p*O+x*N+y*Y,i[6]=d*b+p*D+x*B+y*z,i[10]=d*E+p*L+x*G+y*V,i[14]=d*S+p*R+x*W+y*j,i[3]=v*_+m*O+w*N+g*Y,i[7]=v*b+m*D+w*B+g*z,i[11]=v*E+m*L+w*G+g*V,i[15]=v*S+m*R+w*W+g*j,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(e){for(var t=0,n=e.count;t<n;t++)pn.x=e.getX(t),pn.y=e.getY(t),pn.z=e.getZ(t),pn.applyMatrix4(this),e.setXYZ(t,pn.x,pn.y,pn.z);return e},determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],f=e[10],h=e[14],d=e[3],p=e[7],x=e[11],y=e[15];return d*(+i*s*c-r*l*c-i*o*f+n*l*f+r*o*h-n*s*h)+p*(+t*s*h-t*l*f+i*a*f-r*a*h+r*l*u-i*s*u)+x*(+t*l*c-t*o*h-i*a*c+n*a*h+i*o*u-n*l*u)+y*(-r*o*u-t*s*c+t*o*f+r*a*c-n*a*f+n*s*u)},transpose:function(){var e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],f=r[7],h=r[8],d=r[9],p=r[10],x=r[11],y=r[12],v=r[13],m=r[14],w=r[15],g=d*m*f-v*p*f+v*c*x-u*m*x-d*c*w+u*p*w,_=y*p*f-h*m*f-y*c*x+l*m*x+h*c*w-l*p*w,b=h*v*f-y*d*f+y*u*x-l*v*x-h*u*w+l*d*w,E=y*d*c-h*v*c-y*u*p+l*v*p+h*u*m-l*d*m,S=i*g+a*_+o*b+s*E;if(S===0){var O="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(t===!0)throw new Error(O);return console.warn(O),this.identity()}var D=1/S;return n[0]=g*D,n[1]=(v*p*s-d*m*s-v*o*x+a*m*x+d*o*w-a*p*w)*D,n[2]=(u*m*s-v*c*s+v*o*f-a*m*f-u*o*w+a*c*w)*D,n[3]=(d*c*s-u*p*s-d*o*f+a*p*f+u*o*x-a*c*x)*D,n[4]=_*D,n[5]=(h*m*s-y*p*s+y*o*x-i*m*x-h*o*w+i*p*w)*D,n[6]=(y*c*s-l*m*s-y*o*f+i*m*f+l*o*w-i*c*w)*D,n[7]=(l*p*s-h*c*s+h*o*f-i*p*f-l*o*x+i*c*x)*D,n[8]=b*D,n[9]=(y*d*s-h*v*s-y*a*x+i*v*x+h*a*w-i*d*w)*D,n[10]=(l*v*s-y*u*s+y*a*f-i*v*f-l*a*w+i*u*w)*D,n[11]=(h*u*s-l*d*s-h*a*f+i*d*f+l*a*x-i*u*x)*D,n[12]=E*D,n[13]=(h*v*o-y*d*o+y*a*p-i*v*p-h*a*m+i*d*m)*D,n[14]=(y*u*o-l*v*o-y*a*c+i*v*c+l*a*m-i*u*m)*D,n[15]=(l*d*o-h*u*o+h*a*c-i*d*c-l*a*p+i*u*p)*D,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,l=i*a,u=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,u*o+n,u*s-r*a,0,l*s-r*o,u*s+r*a,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,l=i+i,u=a+a,c=o+o,f=i*l,h=i*u,d=i*c,p=a*u,x=a*c,y=o*c,v=s*l,m=s*u,w=s*c,g=n.x,_=n.y,b=n.z;return r[0]=(1-(p+y))*g,r[1]=(h+w)*g,r[2]=(d-m)*g,r[3]=0,r[4]=(h-w)*_,r[5]=(1-(f+y))*_,r[6]=(x+v)*_,r[7]=0,r[8]=(d+m)*b,r[9]=(x-v)*b,r[10]=(1-(f+p))*b,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(e,t,n){var r=this.elements,i=pn.set(r[0],r[1],r[2]).length(),a=pn.set(r[4],r[5],r[6]).length(),o=pn.set(r[8],r[9],r[10]).length(),s=this.determinant();s<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],qn.copy(this);var l=1/i,u=1/a,c=1/o;return qn.elements[0]*=l,qn.elements[1]*=l,qn.elements[2]*=l,qn.elements[4]*=u,qn.elements[5]*=u,qn.elements[6]*=u,qn.elements[8]*=c,qn.elements[9]*=c,qn.elements[10]*=c,t.setFromRotationMatrix(qn),n.x=i,n.y=a,n.z=o,this},makePerspective:function(e,t,n,r,i,a){a===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(t-e),l=2*i/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),f=-(a+i)/(a-i),h=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),l=1/(n-r),u=1/(a-i),c=(t+e)*s,f=(n+r)*l,h=(a+i)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});var l0=new Ge,u0=new Bt;function cs(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||cs.DefaultOrder}cs.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];cs.DefaultOrder="XYZ";Object.defineProperties(cs.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}});Object.assign(cs.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Be.clamp,i=e.elements,a=i[0],o=i[4],s=i[8],l=i[1],u=i[5],c=i[9],f=i[2],h=i[6],d=i[10];return t=t||this._order,t==="XYZ"?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(h,u),this._z=0)):t==="YXZ"?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,a),this._z=0)):t==="ZXY"?(this._x=Math.asin(r(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a))):t==="ZYX"?(this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u))):t==="YZX"?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(s,d))):t==="XZY"?(this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,n!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return l0.makeRotationFromQuaternion(e),this.setFromRotationMatrix(l0,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return u0.setFromEuler(this),this.setFromQuaternion(u0,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new A(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});function L1(){this.mask=1}Object.assign(L1.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return(this.mask&e.mask)!==0}});var c2=0,c0=new A,Ua=new Bt,Ir=new Ge,Yu=new A,Ss=new A,f2=new A,h2=new Bt,f0=new A(1,0,0),h0=new A(0,1,0),d0=new A(0,0,1),d2={type:"added"},p2={type:"removed"};function re(){Object.defineProperty(this,"id",{value:c2++}),this.uuid=Be.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=re.DefaultUp.clone();var e=new A,t=new cs,n=new Bt,r=new A(1,1,1);function i(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(i),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ge},normalMatrix:{value:new Ct}}),this.matrix=new Ge,this.matrixWorld=new Ge,this.matrixAutoUpdate=re.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new L1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}re.DefaultUp=new A(0,1,0);re.DefaultMatrixAutoUpdate=!0;re.prototype=Object.assign(Object.create(Pt.prototype),{constructor:re,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Ua.setFromAxisAngle(e,t),this.quaternion.multiply(Ua),this},rotateOnWorldAxis:function(e,t){return Ua.setFromAxisAngle(e,t),this.quaternion.premultiply(Ua),this},rotateX:function(e){return this.rotateOnAxis(f0,e)},rotateY:function(e){return this.rotateOnAxis(h0,e)},rotateZ:function(e){return this.rotateOnAxis(d0,e)},translateOnAxis:function(e,t){return c0.copy(e).applyQuaternion(this.quaternion),this.position.add(c0.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(f0,e)},translateY:function(e){return this.translateOnAxis(h0,e)},translateZ:function(e){return this.translateOnAxis(d0,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Ir.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?Yu.copy(e):Yu.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Ss.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ir.lookAt(Ss,Yu,this.up):Ir.lookAt(Yu,Ss,this.up),this.quaternion.setFromRotationMatrix(Ir),r&&(Ir.extractRotation(r.matrixWorld),Ua.setFromRotationMatrix(Ir),this.quaternion.premultiply(Ua.inverse()))},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(d2)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(p2)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),Ir.getInverse(this.matrixWorld),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ir.multiply(e.parent.matrixWorld)),e.applyMatrix(Ir),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],a=i.getObjectByProperty(e,t);if(a!==void 0)return a}},getWorldPosition:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new A),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Bt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ss,e,f2),e},getWorldScale:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new A),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ss,h2,e),e},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new A),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==fg&&(r.drawMode=this.drawMode);function i(y,v){return y[v.uuid]===void 0&&(y[v.uuid]=v.toJSON(e)),v.uuid}if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var u=o[s];i(e.shapes,u)}else i(e.shapes,o)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var c=[],s=0,l=this.material.length;s<l;s++)c.push(i(e.materials,this.material[s]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object)}if(t){var f=x(e.geometries),h=x(e.materials),d=x(e.textures),p=x(e.images),o=x(e.shapes);f.length>0&&(n.geometries=f),h.length>0&&(n.materials=h),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),o.length>0&&(n.shapes=o)}return n.object=r,n;function x(y){var v=[];for(var m in y){var w=y[m];delete w.metadata,v.push(w)}return v}},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,t){if(t===void 0&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}});function Sl(){re.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Sl.prototype=Object.assign(Object.create(re.prototype),{constructor:Sl,isScene:!0,copy:function(e,t){return re.prototype.copy.call(this,e,t),e.background!==null&&(this.background=e.background.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=re.prototype.toJSON.call(this,e);return this.background!==null&&(t.object.background=this.background.toJSON(e)),this.fog!==null&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Nr=[new A,new A,new A,new A,new A,new A,new A,new A],ur=new A,Ga=new A,Va=new A,Ha=new A,di=new A,pi=new A,$i=new A,Ts=new A,$u=new A,Zu=new A,Zi=new A;function li(e,t){this.min=e!==void 0?e:new A(1/0,1/0,1/0),this.max=t!==void 0?t:new A(-1/0,-1/0,-1/0)}Object.assign(li.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],f=e[s+2];u<t&&(t=u),c<n&&(n=c),f<r&&(r=f),u>i&&(i=u),c>a&&(a=c),f>o&&(o=f)}return this.min.set(t,n,r),this.max.set(i,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),f=e.getZ(s);u<t&&(t=u),c<n&&(n=c),f<r&&(r=f),u>i&&(i=u),c>a&&(a=c),f>o&&(o=f)}return this.min.set(t,n,r),this.max.set(i,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=ur.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new A),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new A),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){var t,n;e.updateWorldMatrix(!1,!1);var r=e.geometry;if(r!==void 0){if(r.isGeometry){var i=r.vertices;for(t=0,n=i.length;t<n;t++)ur.copy(i[t]),ur.applyMatrix4(e.matrixWorld),this.expandByPoint(ur)}else if(r.isBufferGeometry){var a=r.attributes.position;if(a!==void 0)for(t=0,n=a.count;t<n;t++)ur.fromBufferAttribute(a,t).applyMatrix4(e.matrixWorld),this.expandByPoint(ur)}}var o=e.children;for(t=0,n=o.length;t<n;t++)this.expandByObject(o[t]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return t===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new A),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,ur),ur.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(Ts),$u.subVectors(this.max,Ts),Ga.subVectors(e.a,Ts),Va.subVectors(e.b,Ts),Ha.subVectors(e.c,Ts),di.subVectors(Va,Ga),pi.subVectors(Ha,Va),$i.subVectors(Ga,Ha);var t=[0,-di.z,di.y,0,-pi.z,pi.y,0,-$i.z,$i.y,di.z,0,-di.x,pi.z,0,-pi.x,$i.z,0,-$i.x,-di.y,di.x,0,-pi.y,pi.x,0,-$i.y,$i.x,0];return!Sd(t,Ga,Va,Ha,$u)||(t=[1,0,0,0,1,0,0,0,1],!Sd(t,Ga,Va,Ha,$u))?!1:(Zu.crossVectors(di,pi),t=[Zu.x,Zu.y,Zu.z],Sd(t,Ga,Va,Ha,$u))},clampPoint:function(e,t){return t===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new A),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){var t=ur.copy(e).clamp(this.min,this.max);return t.sub(e).length()},getBoundingSphere:function(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=this.getSize(ur).length()*.5,e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()?this:(Nr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Nr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Nr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Nr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Nr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Nr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Nr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Nr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Nr),this)},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function Sd(e,t,n,r,i){var a,o;for(a=0,o=e.length-3;a<=o;a+=3){Zi.fromArray(e,a);var s=i.x*Math.abs(Zi.x)+i.y*Math.abs(Zi.y)+i.z*Math.abs(Zi.z),l=t.dot(Zi),u=n.dot(Zi),c=r.dot(Zi);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}var v2=new li;function Wi(e,t){this.center=e!==void 0?e:new A,this.radius=t!==void 0?t:0}Object.assign(Wi.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){var n=this.center;t!==void 0?n.copy(t):v2.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return t===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new A),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new li),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var kr=new A,Td=new A,Ju=new A,vi=new A,Pd=new A,Qu=new A,Ad=new A;function fs(e,t){this.origin=e!==void 0?e:new A,this.direction=t!==void 0?t:new A}Object.assign(fs.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return t===void 0&&(console.warn("THREE.Ray: .at() target is now required"),t=new A),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,kr)),this},closestPointToPoint:function(e,t){t===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new A),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=kr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(kr.copy(this.direction).multiplyScalar(t).add(this.origin),kr.distanceToSquared(e))},distanceSqToSegment:function(e,t,n,r){Td.copy(e).add(t).multiplyScalar(.5),Ju.copy(t).sub(e).normalize(),vi.copy(this.origin).sub(Td);var i=e.distanceTo(t)*.5,a=-this.direction.dot(Ju),o=vi.dot(this.direction),s=-vi.dot(Ju),l=vi.lengthSq(),u=Math.abs(1-a*a),c,f,h,d;if(u>0)if(c=a*s-o,f=a*o-s,d=i*u,c>=0)if(f>=-d)if(f<=d){var p=1/u;c*=p,f*=p,h=c*(c+a*f+2*o)+f*(a*c+f+2*s)+l}else f=i,c=Math.max(0,-(a*f+o)),h=-c*c+f*(f+2*s)+l;else f=-i,c=Math.max(0,-(a*f+o)),h=-c*c+f*(f+2*s)+l;else f<=-d?(c=Math.max(0,-(-a*i+o)),f=c>0?-i:Math.min(Math.max(-i,-s),i),h=-c*c+f*(f+2*s)+l):f<=d?(c=0,f=Math.min(Math.max(-i,-s),i),h=f*(f+2*s)+l):(c=Math.max(0,-(a*i+o)),f=c>0?i:Math.min(Math.max(-i,-s),i),h=-c*c+f*(f+2*s)+l);else f=a>0?-i:i,c=Math.max(0,-(a*f+o)),h=-c*c+f*(f+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(c).add(this.origin),r&&r.copy(Ju).multiplyScalar(f).add(Td),h},intersectSphere:function(e,t){kr.subVectors(e.center,this.origin);var n=kr.dot(this.direction),r=kr.dot(kr)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return n===null?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(t===0)return!0;var n=e.normal.dot(this.direction);return n*t<0},intersectBox:function(e,t){var n,r,i,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,f=this.origin;return l>=0?(n=(e.min.x-f.x)*l,r=(e.max.x-f.x)*l):(n=(e.max.x-f.x)*l,r=(e.min.x-f.x)*l),u>=0?(i=(e.min.y-f.y)*u,a=(e.max.y-f.y)*u):(i=(e.max.y-f.y)*u,a=(e.min.y-f.y)*u),n>a||i>r||((i>n||n!==n)&&(n=i),(a<r||r!==r)&&(r=a),c>=0?(o=(e.min.z-f.z)*c,s=(e.max.z-f.z)*c):(o=(e.max.z-f.z)*c,s=(e.min.z-f.z)*c),n>s||o>r)||((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0)?null:this.at(n>=0?n:r,t)},intersectsBox:function(e){return this.intersectBox(e,kr)!==null},intersectTriangle:function(e,t,n,r,i){Pd.subVectors(t,e),Qu.subVectors(n,e),Ad.crossVectors(Pd,Qu);var a=this.direction.dot(Ad),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;vi.subVectors(this.origin,e);var s=o*this.direction.dot(Qu.crossVectors(vi,Qu));if(s<0)return null;var l=o*this.direction.dot(Pd.cross(vi));if(l<0||s+l>a)return null;var u=-o*vi.dot(Ad);return u<0?null:this.at(u/a,i)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var Qn=new A,Ur=new A,Ld=new A,Fr=new A,Wa=new A,ja=new A,p0=new A,Cd=new A,Rd=new A,Od=new A;function It(e,t,n){this.a=e!==void 0?e:new A,this.b=t!==void 0?t:new A,this.c=n!==void 0?n:new A}Object.assign(It,{getNormal:function(e,t,n,r){r===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new A),r.subVectors(n,t),Qn.subVectors(e,t),r.cross(Qn);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)},getBarycoord:function(e,t,n,r,i){Qn.subVectors(r,t),Ur.subVectors(n,t),Ld.subVectors(e,t);var a=Qn.dot(Qn),o=Qn.dot(Ur),s=Qn.dot(Ld),l=Ur.dot(Ur),u=Ur.dot(Ld),c=a*l-o*o;if(i===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new A),c===0)return i.set(-2,-1,-1);var f=1/c,h=(l*s-o*u)*f,d=(a*u-o*s)*f;return i.set(1-h-d,d,h)},containsPoint:function(e,t,n,r){return It.getBarycoord(e,t,n,r,Fr),Fr.x>=0&&Fr.y>=0&&Fr.x+Fr.y<=1},getUV:function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,Fr),s.set(0,0),s.addScaledVector(i,Fr.x),s.addScaledVector(a,Fr.y),s.addScaledVector(o,Fr.z),s},isFrontFacing:function(e,t,n,r){return Qn.subVectors(n,t),Ur.subVectors(e,t),Qn.cross(Ur).dot(r)<0}});Object.assign(It.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return Qn.subVectors(this.c,this.b),Ur.subVectors(this.a,this.b),Qn.cross(Ur).length()*.5},getMidpoint:function(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new A),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return It.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new A),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return It.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,r,i){return It.getUV(e,this.a,this.b,this.c,t,n,r,i)},containsPoint:function(e){return It.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return It.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){t===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new A);var n=this.a,r=this.b,i=this.c,a,o;Wa.subVectors(r,n),ja.subVectors(i,n),Cd.subVectors(e,n);var s=Wa.dot(Cd),l=ja.dot(Cd);if(s<=0&&l<=0)return t.copy(n);Rd.subVectors(e,r);var u=Wa.dot(Rd),c=ja.dot(Rd);if(u>=0&&c<=u)return t.copy(r);var f=s*c-u*l;if(f<=0&&s>=0&&u<=0)return a=s/(s-u),t.copy(n).addScaledVector(Wa,a);Od.subVectors(e,i);var h=Wa.dot(Od),d=ja.dot(Od);if(d>=0&&h<=d)return t.copy(i);var p=h*l-s*d;if(p<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(n).addScaledVector(ja,o);var x=u*d-h*c;if(x<=0&&c-u>=0&&h-d>=0)return p0.subVectors(i,r),o=(c-u)/(c-u+(h-d)),t.copy(r).addScaledVector(p0,o);var y=1/(x+p+f);return a=p*y,o=f*y,t.copy(n).addScaledVector(Wa,a).addScaledVector(ja,o)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var m2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Yn={h:0,s:0,l:0},Ku={h:0,s:0,l:0};function he(e,t,n){return t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}function Dd(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*6*(2/3-n):e}function Id(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function Nd(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}Object.assign(he.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(e=Be.euclideanModulo(e,1),t=Be.clamp(t,0,1),n=Be.clamp(n,0,1),t===0)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Dd(i,r,e+1/3),this.g=Dd(i,r,e),this.b=Dd(i,r,e-1/3)}return this},setStyle:function(e){function t(f){f!==void 0&&parseFloat(f)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(o,s,l)}break}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=n[1],c=u.length;if(c===3)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(c===6)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}if(e&&e.length>0){var u=m2[e];u!==void 0?this.setHex(u):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return t===void 0&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){t===void 0&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=Id(e.r),this.g=Id(e.g),this.b=Id(e.b),this},copyLinearToSRGB:function(e){return this.r=Nd(e.r),this.g=Nd(e.g),this.b=Nd(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){e===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),a=Math.min(t,n,r),o,s,l=(a+i)/2;if(a===i)o=0,s=0;else{var u=i-a;switch(s=l<=.5?u/(i+a):u/(2-i-a),i){case t:o=(n-r)/u+(n<r?6:0);break;case n:o=(r-t)/u+2;break;case r:o=(t-n)/u+4;break}o/=6}return e.h=o,e.s=s,e.l=l,e},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(e,t,n){return this.getHSL(Yn),Yn.h+=e,Yn.s+=t,Yn.l+=n,this.setHSL(Yn.h,Yn.s,Yn.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(Yn),e.getHSL(Ku);var n=Be.lerp(Yn.h,Ku.h,t),r=Be.lerp(Yn.s,Ku.s,t),i=Be.lerp(Yn.l,Ku.l,t);return this.setHSL(n,r,i),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return t===void 0&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});function Tl(e,t,n,r,i,a){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new A,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new he,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=a!==void 0?a:0}Object.assign(Tl.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var g2=0;function Ne(){Object.defineProperty(this,"id",{value:g2++}),this.uuid=Be.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=Ks,this.side=wu,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=w1,this.opacity=1,this.transparent=!1,this.blendSrc=_1,this.blendDst=M1,this.blendEquation=po,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=nv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=o2,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=bd,this.stencilZFail=bd,this.stencilZPass=bd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.needsUpdate=!0}Ne.prototype=Object.assign(Object.create(Pt.prototype),{constructor:Ne,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(e!==void 0)for(var t in e){var n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===x1;continue}var r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}},toJSON:function(e){var t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,this.combine!==void 0&&(n.combine=this.combine),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.size!==void 0&&(n.size=this.size),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Ks&&(n.blending=this.blending),this.flatShading===!0&&(n.flatShading=this.flatShading),this.side!==wu&&(n.side=this.side),this.vertexColors!==w1&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(n.morphTargets=!0),this.morphNormals===!0&&(n.morphNormals=!0),this.skinning===!0&&(n.skinning=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function r(o){var s=[];for(var l in o){var u=o[l];delete u.metadata,s.push(u)}return s}if(t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWrite=e.stencilWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(t!==null){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Qt(e){Ne.call(this),this.type="MeshBasicMaterial",this.color=new he(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Nh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}Qt.prototype=Object.create(Ne.prototype);Qt.prototype.constructor=Qt;Qt.prototype.isMeshBasicMaterial=!0;Qt.prototype.copy=function(e){return Ne.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};function Ie(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(Ie.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(Ie.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new he),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new X),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new A),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new et),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function rv(e,t,n){Ie.call(this,new Int8Array(e),t,n)}rv.prototype=Object.create(Ie.prototype);rv.prototype.constructor=rv;function iv(e,t,n){Ie.call(this,new Uint8Array(e),t,n)}iv.prototype=Object.create(Ie.prototype);iv.prototype.constructor=iv;function av(e,t,n){Ie.call(this,new Uint8ClampedArray(e),t,n)}av.prototype=Object.create(Ie.prototype);av.prototype.constructor=av;function ov(e,t,n){Ie.call(this,new Int16Array(e),t,n)}ov.prototype=Object.create(Ie.prototype);ov.prototype.constructor=ov;function Pl(e,t,n){Ie.call(this,new Uint16Array(e),t,n)}Pl.prototype=Object.create(Ie.prototype);Pl.prototype.constructor=Pl;function sv(e,t,n){Ie.call(this,new Int32Array(e),t,n)}sv.prototype=Object.create(Ie.prototype);sv.prototype.constructor=sv;function Al(e,t,n){Ie.call(this,new Uint32Array(e),t,n)}Al.prototype=Object.create(Ie.prototype);Al.prototype.constructor=Al;function ie(e,t,n){Ie.call(this,new Float32Array(e),t,n)}ie.prototype=Object.create(Ie.prototype);ie.prototype.constructor=ie;function lv(e,t,n){Ie.call(this,new Float64Array(e),t,n)}lv.prototype=Object.create(Ie.prototype);lv.prototype.constructor=lv;function C1(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(C1.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,a=0;a<i.length;a++){var o=i[a];o.materialIndex!==r&&(r=o.materialIndex,t!==void 0&&(t.count=a*3-t.start,n.push(t)),t={start:a*3,materialIndex:r})}t!==void 0&&(t.count=a*3-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t=e.faces,n=e.vertices,r=e.faceVertexUvs,i=r[0]&&r[0].length>0,a=r[1]&&r[1].length>0,o=e.morphTargets,s=o.length,l;if(s>0){l=[];for(var u=0;u<s;u++)l[u]={name:o[u].name,data:[]};this.morphTargets.position=l}var c=e.morphNormals,f=c.length,h;if(f>0){h=[];for(var u=0;u<f;u++)h[u]={name:c[u].name,data:[]};this.morphTargets.normal=h}var d=e.skinIndices,p=e.skinWeights,x=d.length===n.length,y=p.length===n.length;n.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var u=0;u<t.length;u++){var v=t[u];this.vertices.push(n[v.a],n[v.b],n[v.c]);var m=v.vertexNormals;if(m.length===3)this.normals.push(m[0],m[1],m[2]);else{var w=v.normal;this.normals.push(w,w,w)}var g=v.vertexColors;if(g.length===3)this.colors.push(g[0],g[1],g[2]);else{var _=v.color;this.colors.push(_,_,_)}if(i===!0){var b=r[0][u];b!==void 0?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new X,new X,new X))}if(a===!0){var b=r[1][u];b!==void 0?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new X,new X,new X))}for(var E=0;E<s;E++){var S=o[E].vertices;l[E].data.push(S[v.a],S[v.b],S[v.c])}for(var E=0;E<f;E++){var O=c[E].vertexNormals[u];h[E].data.push(O.a,O.b,O.c)}x&&this.skinIndices.push(d[v.a],d[v.b],d[v.c]),y&&this.skinWeights.push(p[v.a],p[v.b],p[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}});function R1(e){if(e.length===0)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}var y2=1,cr=new Ge,kd=new re,ec=new A,Ji=new li,Fd=new li,$n=new A;function se(){Object.defineProperty(this,"id",{value:y2+=2}),this.uuid=Be.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}se.prototype=Object.assign(Object.create(Pt.prototype),{constructor:se,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(R1(e)>65535?Al:Pl)(e,1):this.index=e},addAttribute:function(e,t){return!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new Ie(arguments[1],arguments[2]))):e==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t)},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n!==void 0?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;t!==void 0&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;if(n!==void 0){var r=new Ct().getNormalMatrix(e);r.applyToBufferAttribute(n),n.needsUpdate=!0}var i=this.attributes.tangent;if(i!==void 0){var r=new Ct().getNormalMatrix(e);r.applyToBufferAttribute(i),i.needsUpdate=!0}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(e){return cr.makeRotationX(e),this.applyMatrix(cr),this},rotateY:function(e){return cr.makeRotationY(e),this.applyMatrix(cr),this},rotateZ:function(e){return cr.makeRotationZ(e),this.applyMatrix(cr),this},translate:function(e,t,n){return cr.makeTranslation(e,t,n),this.applyMatrix(cr),this},scale:function(e,t,n){return cr.makeScale(e,t,n),this.applyMatrix(cr),this},lookAt:function(e){return kd.lookAt(e),kd.updateMatrix(),this.applyMatrix(kd.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ec).negate(),this.translate(ec.x,ec.y,ec.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new ie(t.vertices.length*3,3),r=new ie(t.colors.length*3,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new ie(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new ie(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(t.elementsNeedUpdate===!0&&(n=void 0,t.elementsNeedUpdate=!1),n===void 0)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}var r;return t.verticesNeedUpdate===!0&&(r=this.attributes.position,r!==void 0&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1),t.normalsNeedUpdate===!0&&(r=this.attributes.normal,r!==void 0&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1),t.colorsNeedUpdate===!0&&(r=this.attributes.color,r!==void 0&&(r.copyColorsArray(t.colors),r.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(r=this.attributes.uv,r!==void 0&&(r.copyVector2sArray(t.uvs),r.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,r!==void 0&&(r.copyArray(t.lineDistances),r.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new C1().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(e.vertices.length*3);if(this.addAttribute("position",new Ie(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(e.normals.length*3);this.addAttribute("normal",new Ie(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(e.colors.length*3);this.addAttribute("color",new Ie(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(e.uvs.length*2);this.addAttribute("uv",new Ie(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(e.uvs2.length*2);this.addAttribute("uv2",new Ie(a,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(var o in e.morphTargets){for(var s=[],l=e.morphTargets[o],u=0,c=l.length;u<c;u++){var f=l[u],h=new ie(f.data.length*3,3);h.name=f.name,s.push(h.copyVector3sArray(f.data))}this.morphAttributes[o]=s}if(e.skinIndices.length>0){var d=new ie(e.skinIndices.length*4,4);this.addAttribute("skinIndex",d.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new ie(e.skinWeights.length*4,4);this.addAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new li);var e=this.attributes.position,t=this.morphAttributes.position;if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];Ji.setFromBufferAttribute(i),this.boundingBox.expandByPoint(Ji.min),this.boundingBox.expandByPoint(Ji.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Wi);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var n=this.boundingSphere.center;if(Ji.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];Fd.setFromBufferAttribute(a),Ji.expandByPoint(Fd.min),Ji.expandByPoint(Fd.max)}Ji.getCenter(n);for(var o=0,r=0,i=e.count;r<i;r++)$n.fromBufferAttribute(e,r),o=Math.max(o,n.distanceToSquared($n));if(t)for(var r=0,i=t.length;r<i;r++)for(var a=t[r],s=0,l=a.count;s<l;s++)$n.fromBufferAttribute(a,s),o=Math.max(o,n.distanceToSquared($n));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(t.normal===void 0)this.addAttribute("normal",new Ie(new Float32Array(n.length),3));else for(var r=t.normal.array,i=0,a=r.length;i<a;i++)r[i]=0;var o=t.normal.array,s,l,u,c=new A,f=new A,h=new A,d=new A,p=new A;if(e)for(var x=e.array,i=0,a=e.count;i<a;i+=3)s=x[i+0]*3,l=x[i+1]*3,u=x[i+2]*3,c.fromArray(n,s),f.fromArray(n,l),h.fromArray(n,u),d.subVectors(h,f),p.subVectors(c,f),d.cross(p),o[s]+=d.x,o[s+1]+=d.y,o[s+2]+=d.z,o[l]+=d.x,o[l+1]+=d.y,o[l+2]+=d.z,o[u]+=d.x,o[u+1]+=d.y,o[u+2]+=d.z;else for(var i=0,a=n.length;i<a;i+=9)c.fromArray(n,i),f.fromArray(n,i+3),h.fromArray(n,i+6),d.subVectors(h,f),p.subVectors(c,f),d.cross(p),o[i]=d.x,o[i+1]=d.y,o[i+2]=d.z,o[i+3]=d.x,o[i+4]=d.y,o[i+5]=d.z,o[i+6]=d.x,o[i+7]=d.y,o[i+8]=d.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(e.attributes[r]!==void 0)for(var i=n[r],a=i.array,o=e.attributes[r],s=o.array,l=o.itemSize*t,u=Math.min(s.length,a.length-l),c=0,f=l;c<u;c++,f++)a[f]=s[c];return this},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)$n.x=e.getX(t),$n.y=e.getY(t),$n.z=e.getZ(t),$n.normalize(),e.setXYZ(t,$n.x,$n.y,$n.z)},toNonIndexed:function(){function e(x,y){for(var v=x.array,m=x.itemSize,w=new v.constructor(y.length*m),g=0,_=0,b=0,E=y.length;b<E;b++){g=y[b]*m;for(var S=0;S<m;S++)w[_++]=v[g++]}return new Ie(w,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new se,n=this.index.array,r=this.attributes;for(var i in r){var a=r[i],o=e(a,n);t.addAttribute(i,o)}var s=this.morphAttributes;for(i in s){for(var l=[],u=s[i],c=0,f=u.length;c<f;c++){var a=u[c],o=e(a,n);l.push(o)}t.morphAttributes[i]=l}for(var h=this.groups,c=0,d=h.length;c<d;c++){var p=h[c];t.addGroup(p.start,p.count,p.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){var t=this.parameters;for(var n in t)t[n]!==void 0&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;r!==null&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var n in i){var a=i[n],o=a.toJSON();a.name!==""&&(o.name=a.name),e.data.attributes[n]=o}var s={},l=!1;for(var n in this.morphAttributes){for(var u=this.morphAttributes[n],c=[],f=0,h=u.length;f<h;f++){var a=u[f],o=a.toJSON();a.name!==""&&(o.name=a.name),c.push(o)}c.length>0&&(s[n]=c,l=!0)}l&&(e.data.morphAttributes=s);var d=this.groups;d.length>0&&(e.data.groups=JSON.parse(JSON.stringify(d)));var p=this.boundingSphere;return p!==null&&(e.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),e},clone:function(){return new se().copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;i!==null&&this.setIndex(i.clone());var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var l=[],u=s[t];for(n=0,r=u.length;n<r;n++)l.push(u[n].clone());this.morphAttributes[t]=l}var c=e.groups;for(n=0,r=c.length;n<r;n++){var f=c[n];this.addGroup(f.start,f.count,f.materialIndex)}var h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());var d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var v0=new Ge,Qi=new fs,zd=new Wi,Ki=new A,ea=new A,ta=new A,m0=new A,g0=new A,y0=new A,Bd=new A,Ud=new A,Gd=new A,mo=new X,go=new X,yo=new X,el=new A,tc=new A;function ot(e,t){re.call(this),this.type="Mesh",this.geometry=e!==void 0?e:new se,this.material=t!==void 0?t:new Qt({color:Math.random()*16777215}),this.drawMode=fg,this.updateMorphTargets()}ot.prototype=Object.assign(Object.create(re.prototype),{constructor:ot,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return re.prototype.copy.call(this,e),this.drawMode=e.drawMode,e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e=this.geometry,t,n,r;if(e.isBufferGeometry){var i=e.morphAttributes,a=Object.keys(i);if(a.length>0){var o=i[a[0]];if(o!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,n=o.length;t<n;t++)r=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}else{var s=e.morphTargets;s!==void 0&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){var n=this.geometry,r=this.material,i=this.matrixWorld;if(r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),zd.copy(n.boundingSphere),zd.applyMatrix4(i),e.ray.intersectsSphere(zd)!==!1&&(v0.getInverse(i),Qi.copy(e.ray).applyMatrix4(v0),!(n.boundingBox!==null&&Qi.intersectsBox(n.boundingBox)===!1)))){var a;if(n.isBufferGeometry){var o,s,l,u=n.index,c=n.attributes.position,f=n.morphAttributes.position,h=n.attributes.uv,d=n.attributes.uv2,p=n.groups,x=n.drawRange,y,v,m,w,g,_,b,E;if(u!==null)if(Array.isArray(r))for(y=0,m=p.length;y<m;y++)for(g=p[y],_=r[g.materialIndex],b=Math.max(g.start,x.start),E=Math.min(g.start+g.count,x.start+x.count),v=b,w=E;v<w;v+=3)o=u.getX(v),s=u.getX(v+1),l=u.getX(v+2),a=nc(this,_,e,Qi,c,f,h,d,o,s,l),a&&(a.faceIndex=Math.floor(v/3),a.face.materialIndex=g.materialIndex,t.push(a));else for(b=Math.max(0,x.start),E=Math.min(u.count,x.start+x.count),y=b,m=E;y<m;y+=3)o=u.getX(y),s=u.getX(y+1),l=u.getX(y+2),a=nc(this,r,e,Qi,c,f,h,d,o,s,l),a&&(a.faceIndex=Math.floor(y/3),t.push(a));else if(c!==void 0)if(Array.isArray(r))for(y=0,m=p.length;y<m;y++)for(g=p[y],_=r[g.materialIndex],b=Math.max(g.start,x.start),E=Math.min(g.start+g.count,x.start+x.count),v=b,w=E;v<w;v+=3)o=v,s=v+1,l=v+2,a=nc(this,_,e,Qi,c,f,h,d,o,s,l),a&&(a.faceIndex=Math.floor(v/3),a.face.materialIndex=g.materialIndex,t.push(a));else for(b=Math.max(0,x.start),E=Math.min(c.count,x.start+x.count),y=b,m=E;y<m;y+=3)o=y,s=y+1,l=y+2,a=nc(this,r,e,Qi,c,f,h,d,o,s,l),a&&(a.faceIndex=Math.floor(y/3),t.push(a))}else if(n.isGeometry){var S,O,D,L=Array.isArray(r),R=n.vertices,N=n.faces,B,G=n.faceVertexUvs[0];G.length>0&&(B=G);for(var W=0,Y=N.length;W<Y;W++){var z=N[W],V=L?r[z.materialIndex]:r;if(V!==void 0&&(S=R[z.a],O=R[z.b],D=R[z.c],a=O1(this,V,e,Qi,S,O,D,el),a)){if(B&&B[W]){var j=B[W];mo.copy(j[0]),go.copy(j[1]),yo.copy(j[2]),a.uv=It.getUV(el,S,O,D,mo,go,yo,new X)}a.face=z,a.faceIndex=W,t.push(a)}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function O1(e,t,n,r,i,a,o,s){var l;if(t.side===Et?l=r.intersectTriangle(o,a,i,!0,s):l=r.intersectTriangle(i,a,o,t.side!==Ih,s),l===null)return null;tc.copy(s),tc.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(tc);return u<n.near||u>n.far?null:{distance:u,point:tc.clone(),object:e}}function nc(e,t,n,r,i,a,o,s,l,u,c){Ki.fromBufferAttribute(i,l),ea.fromBufferAttribute(i,u),ta.fromBufferAttribute(i,c);var f=e.morphTargetInfluences;if(t.morphTargets&&a&&f){Bd.set(0,0,0),Ud.set(0,0,0),Gd.set(0,0,0);for(var h=0,d=a.length;h<d;h++){var p=f[h],x=a[h];p!==0&&(m0.fromBufferAttribute(x,l),g0.fromBufferAttribute(x,u),y0.fromBufferAttribute(x,c),Bd.addScaledVector(m0.sub(Ki),p),Ud.addScaledVector(g0.sub(ea),p),Gd.addScaledVector(y0.sub(ta),p))}Ki.add(Bd),ea.add(Ud),ta.add(Gd)}var y=O1(e,t,n,r,Ki,ea,ta,el);if(y){o&&(mo.fromBufferAttribute(o,l),go.fromBufferAttribute(o,u),yo.fromBufferAttribute(o,c),y.uv=It.getUV(el,Ki,ea,ta,mo,go,yo,new X)),s&&(mo.fromBufferAttribute(s,l),go.fromBufferAttribute(s,u),yo.fromBufferAttribute(s,c),y.uv2=It.getUV(el,Ki,ea,ta,mo,go,yo,new X));var v=new Tl(l,u,c);It.getNormal(Ki,ea,ta,v.normal),y.face=v}return y}var x2=0,fr=new Ge,Vd=new re,rc=new A;function Oe(){Object.defineProperty(this,"id",{value:x2+=2}),this.uuid=Be.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Oe.prototype=Object.assign(Object.create(Pt.prototype),{constructor:Oe,isGeometry:!0,applyMatrix:function(e){for(var t=new Ct().getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n];i.applyMatrix4(e)}for(var n=0,r=this.faces.length;n<r;n++){var a=this.faces[n];a.normal.applyMatrix3(t).normalize();for(var o=0,s=a.vertexNormals.length;o<s;o++)a.vertexNormals[o].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return fr.makeRotationX(e),this.applyMatrix(fr),this},rotateY:function(e){return fr.makeRotationY(e),this.applyMatrix(fr),this},rotateZ:function(e){return fr.makeRotationZ(e),this.applyMatrix(fr),this},translate:function(e,t,n){return fr.makeTranslation(e,t,n),this.applyMatrix(fr),this},scale:function(e,t,n){return fr.makeScale(e,t,n),this.applyMatrix(fr),this},lookAt:function(e){return Vd.lookAt(e),Vd.updateMatrix(),this.applyMatrix(Vd.matrix),this},fromBufferGeometry:function(e){var t=this,n=e.index!==null?e.index.array:void 0,r=e.attributes;if(r.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=r.position.array,a=r.normal!==void 0?r.normal.array:void 0,o=r.color!==void 0?r.color.array:void 0,s=r.uv!==void 0?r.uv.array:void 0,l=r.uv2!==void 0?r.uv2.array:void 0;l!==void 0&&(this.faceVertexUvs[1]=[]);for(var u=0;u<i.length;u+=3)t.vertices.push(new A().fromArray(i,u)),o!==void 0&&t.colors.push(new he().fromArray(o,u));function c(v,m,w,g){var _=o===void 0?[]:[t.colors[v].clone(),t.colors[m].clone(),t.colors[w].clone()],b=a===void 0?[]:[new A().fromArray(a,v*3),new A().fromArray(a,m*3),new A().fromArray(a,w*3)],E=new Tl(v,m,w,b,_,g);t.faces.push(E),s!==void 0&&t.faceVertexUvs[0].push([new X().fromArray(s,v*2),new X().fromArray(s,m*2),new X().fromArray(s,w*2)]),l!==void 0&&t.faceVertexUvs[1].push([new X().fromArray(l,v*2),new X().fromArray(l,m*2),new X().fromArray(l,w*2)])}var f=e.groups;if(f.length>0)for(var u=0;u<f.length;u++)for(var h=f[u],d=h.start,p=h.count,x=d,y=d+p;x<y;x+=3)n!==void 0?c(n[x],n[x+1],n[x+2],h.materialIndex):c(x,x+1,x+2,h.materialIndex);else if(n!==void 0)for(var u=0;u<n.length;u+=3)c(n[u],n[u+1],n[u+2]);else for(var u=0;u<i.length/3;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(rc).negate(),this.translate(rc.x,rc.y,rc.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=t===0?1:1/t,r=new Ge;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new A,t=new A,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){e===void 0&&(e=!0);var t,n,r,i,a,o;for(o=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)o[t]=new A;if(e){var s,l,u,c=new A,f=new A;for(r=0,i=this.faces.length;r<i;r++)a=this.faces[r],s=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c],c.subVectors(u,l),f.subVectors(s,l),c.cross(f),o[a.a].add(c),o[a.b].add(c),o[a.c].add(c)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a=this.faces[r],o[a.a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,n=this.vertices.length;t<n;t++)o[t].normalize();for(r=0,i=this.faces.length;r<i;r++){a=this.faces[r];var h=a.vertexNormals;h.length===3?(h[0].copy(o[a.a]),h[1].copy(o[a.b]),h[2].copy(o[a.c])):(h[0]=o[a.a].clone(),h[1]=o[a.b].clone(),h[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){n=this.faces[e];var r=n.vertexNormals;r.length===3?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var a=new Oe;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals,u,c;for(n=0,r=this.faces.length;n<r;n++)u=new A,c={a:new A,b:new A,c:new A},o.push(u),s.push(c)}var l=this.morphNormals[e];a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals();var u,c;for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],u=l.faceNormals[n],c=l.vertexNormals[n],u.copy(i.normal),c.a.copy(i.vertexNormals[0]),c.b.copy(i.vertexNormals[1]),c.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new li),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Wi),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}var r,i=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,u=this.colors,c=e.colors;n===void 0&&(n=0),t!==void 0&&(r=new Ct().getNormalMatrix(t));for(var f=0,h=o.length;f<h;f++){var d=o[f],p=d.clone();t!==void 0&&p.applyMatrix4(t),a.push(p)}for(var f=0,h=c.length;f<h;f++)u.push(c[f].clone());for(f=0,h=l.length;f<h;f++){var x=l[f],y,v,m,w=x.vertexNormals,g=x.vertexColors;y=new Tl(x.a+i,x.b+i,x.c+i),y.normal.copy(x.normal),r!==void 0&&y.normal.applyMatrix3(r).normalize();for(var _=0,b=w.length;_<b;_++)v=w[_].clone(),r!==void 0&&v.applyMatrix3(r).normalize(),y.vertexNormals.push(v);y.color.copy(x.color);for(var _=0,b=g.length;_<b;_++)m=g[_],y.vertexColors.push(m.clone());y.materialIndex=x.materialIndex+n,s.push(y)}for(var f=0,h=e.faceVertexUvs.length;f<h;f++){var E=e.faceVertexUvs[f];this.faceVertexUvs[f]===void 0&&(this.faceVertexUvs[f]=[]);for(var _=0,b=E.length;_<b;_++){for(var S=E[_],O=[],D=0,L=S.length;D<L;D++)O.push(S[D].clone());this.faceVertexUvs[f].push(O)}}},mergeMesh:function(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e={},t=[],n=[],r,i,a=4,o=Math.pow(10,a),s,l,u,c,f,h;for(s=0,l=this.vertices.length;s<l;s++)r=this.vertices[s],i=Math.round(r.x*o)+"_"+Math.round(r.y*o)+"_"+Math.round(r.z*o),e[i]===void 0?(e[i]=s,t.push(this.vertices[s]),n[s]=t.length-1):n[s]=n[e[i]];var d=[];for(s=0,l=this.faces.length;s<l;s++){u=this.faces[s],u.a=n[u.a],u.b=n[u.b],u.c=n[u.c],c=[u.a,u.b,u.c];for(var p=0;p<3;p++)if(c[p]===c[(p+1)%3]){d.push(s);break}}for(s=d.length-1;s>=0;s--){var x=d[s];for(this.faces.splice(x,1),f=0,h=this.faceVertexUvs.length;f<h;f++)this.faceVertexUvs[f].splice(x,1)}var y=this.vertices.length-t.length;return this.vertices=t,y},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new A(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;function r(u,c){return u.materialIndex-c.materialIndex}e.sort(r);var i=this.faceVertexUvs[0],a=this.faceVertexUvs[1],o,s;i&&i.length===t&&(o=[]),a&&a.length===t&&(s=[]);for(var n=0;n<t;n++){var l=e[n]._id;o&&o.push(i[l]),s&&s.push(a[l])}o&&(this.faceVertexUvs[0]=o),s&&(this.faceVertexUvs[1]=s)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){var t=this.parameters;for(var n in t)t[n]!==void 0&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var a=this.vertices[i];r.push(a.x,a.y,a.z)}for(var o=[],s=[],l={},u=[],c={},f=[],h={},i=0;i<this.faces.length;i++){var d=this.faces[i],p=!0,x=!1,y=this.faceVertexUvs[0][i]!==void 0,v=d.normal.length()>0,m=d.vertexNormals.length>0,w=d.color.r!==1||d.color.g!==1||d.color.b!==1,g=d.vertexColors.length>0,_=0;if(_=O(_,0,0),_=O(_,1,p),_=O(_,2,x),_=O(_,3,y),_=O(_,4,v),_=O(_,5,m),_=O(_,6,w),_=O(_,7,g),o.push(_),o.push(d.a,d.b,d.c),o.push(d.materialIndex),y){var b=this.faceVertexUvs[0][i];o.push(R(b[0]),R(b[1]),R(b[2]))}if(v&&o.push(D(d.normal)),m){var E=d.vertexNormals;o.push(D(E[0]),D(E[1]),D(E[2]))}if(w&&o.push(L(d.color)),g){var S=d.vertexColors;o.push(L(S[0]),L(S[1]),L(S[2]))}}function O(N,B,G){return G?N|1<<B:N&~(1<<B)}function D(N){var B=N.x.toString()+N.y.toString()+N.z.toString();return l[B]!==void 0||(l[B]=s.length/3,s.push(N.x,N.y,N.z)),l[B]}function L(N){var B=N.r.toString()+N.g.toString()+N.b.toString();return c[B]!==void 0||(c[B]=u.length,u.push(N.getHex())),c[B]}function R(N){var B=N.x.toString()+N.y.toString();return h[B]!==void 0||(h[B]=f.length/2,f.push(N.x,N.y)),h[B]}return e.data={},e.data.vertices=r,e.data.normals=s,u.length>0&&(e.data.colors=u),f.length>0&&(e.data.uvs=[f]),e.data.faces=o,e},clone:function(){return new Oe().copy(this)},copy:function(e){var t,n,r,i,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());var u=e.faces;for(t=0,n=u.length;t<n;t++)this.faces.push(u[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(this.faceVertexUvs[t]===void 0&&(this.faceVertexUvs[t]=[]),r=0,i=c.length;r<i;r++){var f=c[r],h=[];for(a=0,o=f.length;a<o;a++){var d=f[a];h.push(d.clone())}this.faceVertexUvs[t].push(h)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var x={};if(x.name=p[t].name,p[t].vertices!==void 0)for(x.vertices=[],r=0,i=p[t].vertices.length;r<i;r++)x.vertices.push(p[t].vertices[r].clone());if(p[t].normals!==void 0)for(x.normals=[],r=0,i=p[t].normals.length;r<i;r++)x.normals.push(p[t].normals[r].clone());this.morphTargets.push(x)}var y=e.morphNormals;for(t=0,n=y.length;t<n;t++){var v={};if(y[t].vertexNormals!==void 0)for(v.vertexNormals=[],r=0,i=y[t].vertexNormals.length;r<i;r++){var m=y[t].vertexNormals[r],w={};w.a=m.a.clone(),w.b=m.b.clone(),w.c=m.c.clone(),v.vertexNormals.push(w)}if(y[t].faceNormals!==void 0)for(v.faceNormals=[],r=0,i=y[t].faceNormals.length;r<i;r++)v.faceNormals.push(y[t].faceNormals[r].clone());this.morphNormals.push(v)}var g=e.skinWeights;for(t=0,n=g.length;t<n;t++)this.skinWeights.push(g[t].clone());var _=e.skinIndices;for(t=0,n=_.length;t<n;t++)this.skinIndices.push(_[t].clone());var b=e.lineDistances;for(t=0,n=b.length;t<n;t++)this.lineDistances.push(b[t]);var E=e.boundingBox;E!==null&&(this.boundingBox=E.clone());var S=e.boundingSphere;return S!==null&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class D1 extends Oe{constructor(t,n,r,i,a,o){super(),this.type="BoxGeometry",this.parameters={width:t,height:n,depth:r,widthSegments:i,heightSegments:a,depthSegments:o},this.fromBufferGeometry(new Fh(t,n,r,i,a,o)),this.mergeVertices()}}class Fh extends se{constructor(t,n,r,i,a,o){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:n,depth:r,widthSegments:i,heightSegments:a,depthSegments:o};var s=this;t=t||1,n=n||1,r=r||1,i=Math.floor(i)||1,a=Math.floor(a)||1,o=Math.floor(o)||1;var l=[],u=[],c=[],f=[],h=0,d=0;p("z","y","x",-1,-1,r,n,t,o,a,0),p("z","y","x",1,-1,r,n,-t,o,a,1),p("x","z","y",1,1,t,r,n,i,o,2),p("x","z","y",1,-1,t,r,-n,i,o,3),p("x","y","z",1,-1,t,n,r,i,a,4),p("x","y","z",-1,-1,t,n,-r,i,a,5),this.setIndex(l),this.addAttribute("position",new ie(u,3)),this.addAttribute("normal",new ie(c,3)),this.addAttribute("uv",new ie(f,2));function p(x,y,v,m,w,g,_,b,E,S,O){var D=g/E,L=_/S,R=g/2,N=_/2,B=b/2,G=E+1,W=S+1,Y=0,z=0,V,j,q=new A;for(j=0;j<W;j++){var K=j*L-N;for(V=0;V<G;V++){var Pe=V*D-R;q[x]=Pe*m,q[y]=K*w,q[v]=B,u.push(q.x,q.y,q.z),q[x]=0,q[y]=0,q[v]=b>0?1:-1,c.push(q.x,q.y,q.z),f.push(V/E),f.push(1-j/S),Y+=1}}for(j=0;j<S;j++)for(V=0;V<E;V++){var H=h+V+G*j,ue=h+V+G*(j+1),te=h+(V+1)+G*(j+1),de=h+(V+1)+G*j;l.push(H,ue,de),l.push(ue,te,de),z+=6}s.addGroup(d,z,O),d+=z,h+=Y}}}function zo(e){var t={};for(var n in e){t[n]={};for(var r in e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function mn(e){for(var t={},n=0;n<e.length;n++){var r=zo(e[n]);for(var i in r)t[i]=r[i]}return t}var w2=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,_2=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function jt(e){Ne.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=w2,this.fragmentShader=_2,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}jt.prototype=Object.create(Ne.prototype);jt.prototype.constructor=jt;jt.prototype.isShaderMaterial=!0;jt.prototype.copy=function(e){return Ne.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zo(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this};jt.prototype.toJSON=function(e){var t=Ne.prototype.toJSON.call(this,e);t.uniforms={};for(var n in this.uniforms){var r=this.uniforms[n],i=r.value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)this.extensions[o]===!0&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t};function ei(){re.call(this),this.type="Camera",this.matrixWorldInverse=new Ge,this.projectionMatrix=new Ge,this.projectionMatrixInverse=new Ge}ei.prototype=Object.assign(Object.create(re.prototype),{constructor:ei,isCamera:!0,copy:function(e,t){return re.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new A),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){re.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function wt(e,t,n,r){ei.call(this),this.type="PerspectiveCamera",this.fov=e!==void 0?e:50,this.zoom=1,this.near=n!==void 0?n:.1,this.far=r!==void 0?r:2e3,this.focus=10,this.aspect=t!==void 0?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}wt.prototype=Object.assign(Object.create(ei.prototype),{constructor:wt,isPerspectiveCamera:!0,copy:function(e,t){return ei.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=Be.RAD2DEG*2*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(Be.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return Be.RAD2DEG*2*Math.atan(Math.tan(Be.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(Be.DEG2RAD*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(this.view!==null&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var l=this.filmOffset;l!==0&&(i+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=re.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});var Xa=90,qa=1;function Ll(e,t,n,r){re.call(this),this.type="CubeCamera";var i=new wt(Xa,qa,e,t);i.up.set(0,-1,0),i.lookAt(new A(1,0,0)),this.add(i);var a=new wt(Xa,qa,e,t);a.up.set(0,-1,0),a.lookAt(new A(-1,0,0)),this.add(a);var o=new wt(Xa,qa,e,t);o.up.set(0,0,1),o.lookAt(new A(0,1,0)),this.add(o);var s=new wt(Xa,qa,e,t);s.up.set(0,0,-1),s.lookAt(new A(0,-1,0)),this.add(s);var l=new wt(Xa,qa,e,t);l.up.set(0,-1,0),l.lookAt(new A(0,0,1)),this.add(l);var u=new wt(Xa,qa,e,t);u.up.set(0,-1,0),u.lookAt(new A(0,0,-1)),this.add(u),r=r||{format:Ea,magFilter:Ft,minFilter:Ft},this.renderTarget=new Ta(n,n,r),this.renderTarget.texture.name="CubeCamera",this.update=function(c,f){this.parent===null&&this.updateMatrixWorld();var h=c.getRenderTarget(),d=this.renderTarget,p=d.texture.generateMipmaps;d.texture.generateMipmaps=!1,c.setRenderTarget(d,0),c.render(f,i),c.setRenderTarget(d,1),c.render(f,a),c.setRenderTarget(d,2),c.render(f,o),c.setRenderTarget(d,3),c.render(f,s),c.setRenderTarget(d,4),c.render(f,l),d.texture.generateMipmaps=p,c.setRenderTarget(d,5),c.render(f,u),c.setRenderTarget(h)},this.clear=function(c,f,h,d){for(var p=c.getRenderTarget(),x=this.renderTarget,y=0;y<6;y++)c.setRenderTarget(x,y),c.clear(f,h,d);c.setRenderTarget(p)}}Ll.prototype=Object.create(re.prototype);Ll.prototype.constructor=Ll;function Ta(e,t,n){fn.call(this,e,t,n)}Ta.prototype=Object.create(fn.prototype);Ta.prototype.constructor=Ta;Ta.prototype.isWebGLRenderTargetCube=!0;Ta.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var n=new Sl,r={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV;","	sampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},i=new jt({type:"CubemapFromEquirect",uniforms:zo(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Et,blending:Qs});i.uniforms.tEquirect.value=t;var a=new ot(new Fh(5,5,5),i);n.add(a);var o=new Ll(1,10,1);return o.renderTarget=this,o.renderTarget.texture.name="CubeCameraTexture",o.update(e,n),a.geometry.dispose(),a.material.dispose(),this};function Bo(e,t,n,r,i,a,o,s,l,u,c,f){it.call(this,null,a,o,s,l,u,r,i,c,f),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=l!==void 0?l:Ht,this.minFilter=u!==void 0?u:Ht,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}Bo.prototype=Object.create(it.prototype);Bo.prototype.constructor=Bo;Bo.prototype.isDataTexture=!0;var Hd=new A,M2=new A,b2=new Ct;function Vr(e,t){this.normal=e!==void 0?e:new A(1,0,0),this.constant=t!==void 0?t:0}Object.assign(Vr.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){var r=Hd.subVectors(n,t).cross(M2.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return t===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new A),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){t===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new A);var n=e.delta(Hd),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):void 0;var i=-(e.start.dot(this.normal)+this.constant)/r;if(!(i<0||i>1))return t.copy(n).multiplyScalar(i).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new A),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){var n=t||b2.getNormalMatrix(e),r=this.coplanarPoint(Hd).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var Ya=new Wi,ic=new A;function zh(e,t,n,r,i,a){this.planes=[e!==void 0?e:new Vr,t!==void 0?t:new Vr,n!==void 0?n:new Vr,r!==void 0?r:new Vr,i!==void 0?i:new Vr,a!==void 0?a:new Vr]}Object.assign(zh.prototype,{set:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],f=n[8],h=n[9],d=n[10],p=n[11],x=n[12],y=n[13],v=n[14],m=n[15];return t[0].setComponents(o-r,c-s,p-f,m-x).normalize(),t[1].setComponents(o+r,c+s,p+f,m+x).normalize(),t[2].setComponents(o+i,c+l,p+h,m+y).normalize(),t[3].setComponents(o-i,c-l,p-h,m-y).normalize(),t[4].setComponents(o-a,c-u,p-d,m-v).normalize(),t[5].setComponents(o+a,c+u,p+d,m+v).normalize(),this},intersectsObject:function(e){var t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Ya.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ya)},intersectsSprite:function(e){return Ya.center.set(0,0,0),Ya.radius=.7071067811865476,Ya.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ya)},intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){var a=t[i].distanceToPoint(n);if(a<r)return!1}return!0},intersectsBox:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(ic.x=r.normal.x>0?e.max.x:e.min.x,ic.y=r.normal.y>0?e.max.y:e.min.y,ic.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(ic)<0)return!1}return!0},containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var E2=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,S2=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,T2=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,P2=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,A2=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,L2="vec3 transformed = vec3( position );",C2=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,R2=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,O2=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,D2=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;
	}
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;
		}
		if ( clipped ) discard;
	#endif
#endif`,I2=`#if NUM_CLIPPING_PLANES > 0
	#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )
		varying vec3 vViewPosition;
	#endif
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,N2=`#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )
	varying vec3 vViewPosition;
#endif`,k2=`#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )
	vViewPosition = - mvPosition.xyz;
#endif`,F2=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,z2=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,B2=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,U2=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,G2=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}`,V2=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_textureSize (1024.0)
int getFaceFromDirection(vec3 direction) {
	vec3 absDirection = abs(direction);
	int face = -1;
	if( absDirection.x > absDirection.z ) {
		if(absDirection.x > absDirection.y )
			face = direction.x > 0.0 ? 0 : 3;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	else {
		if(absDirection.z > absDirection.y )
			face = direction.z > 0.0 ? 2 : 5;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	return face;
}
#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)
#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))
vec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {
	float scale = exp2(cubeUV_maxLods1 - roughnessLevel);
	float dxRoughness = dFdx(roughness);
	float dyRoughness = dFdy(roughness);
	vec3 dx = dFdx( vec * scale * dxRoughness );
	vec3 dy = dFdy( vec * scale * dyRoughness );
	float d = max( dot( dx, dx ), dot( dy, dy ) );
	d = clamp(d, 1.0, cubeUV_rangeClamp);
	float mipLevel = 0.5 * log2(d);
	return vec2(floor(mipLevel), fract(mipLevel));
}
#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)
#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)
vec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {
	mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;
	float a = 16.0 * cubeUV_rcpTextureSize;
	vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );
	vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;
	float powScale = exp2_packed.x * exp2_packed.y;
	float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;
	float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;
	bool bRes = mipLevel == 0.0;
	scale =  bRes && (scale < a) ? a : scale;
	vec3 r;
	vec2 offset;
	int face = getFaceFromDirection(direction);
	float rcpPowScale = 1.0 / powScale;
	if( face == 0) {
		r = vec3(direction.x, -direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 1) {
		r = vec3(direction.y, direction.x, direction.z);
		offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 2) {
		r = vec3(direction.z, direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 3) {
		r = vec3(direction.x, direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else if( face == 4) {
		r = vec3(direction.y, direction.x, -direction.z);
		offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else {
		r = vec3(direction.z, -direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	r = normalize(r);
	float texelOffset = 0.5 * cubeUV_rcpTextureSize;
	vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;
	vec2 base = offset + vec2( texelOffset );
	return base + s * ( scale - 2.0 * texelOffset );
}
#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)
vec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {
	float roughnessVal = roughness* cubeUV_maxLods3;
	float r1 = floor(roughnessVal);
	float r2 = r1 + 1.0;
	float t = fract(roughnessVal);
	vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);
	float s = mipInfo.y;
	float level0 = mipInfo.x;
	float level1 = level0 + 1.0;
	level1 = level1 > 5.0 ? 5.0 : level1;
	level0 += min( floor( s + 0.5 ), 5.0 );
	vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);
	vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));
	vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);
	vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));
	vec4 result = mix(color10, color20, t);
	return vec4(result.rgb, 1.0);
}
#endif`,H2=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	transformedNormal = mat3( instanceMatrix ) * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = normalMatrix * objectTangent;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,W2=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,j2=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,X2=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,q2=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Y2="gl_FragColor = linearToOutputTexel( gl_FragColor );",$2=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = min( floor( D ) / 255.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,Z2=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToVertex, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		vec2 sampleUV;
		reflectVec = normalize( reflectVec );
		sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
		sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	envColor = envMapTexelToLinear( envColor );
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,J2=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Q2=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,K2=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,eP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,tP=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,nP=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,rP=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,iP=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,aP=`#ifdef TOON
	uniform sampler2D gradientMap;
	vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
		float dotNL = dot( normal, lightDirection );
		vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
		#ifdef USE_GRADIENTMAP
			return texture2D( gradientMap, coord ).rgb;
		#else
			return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
		#endif
	}
#endif`,oP=`#ifdef USE_LIGHTMAP
	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
#endif`,sP=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lP=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
#endif`,uP=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
		float shadowCameraNear;
		float shadowCameraFar;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,cP=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			vec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			vec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV;
			sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
			sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,fP=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,hP=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	#ifdef TOON
		vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#else
		float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
		vec3 irradiance = dotNL * directLight.color;
	#endif
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,dP=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = saturate( clearcoat );	material.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,pP=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,vP=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		directLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		directLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,mP=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,gP=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,yP=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 1.0 ? log2( vFragDepth ) * logDepthBufFC * 0.5 : gl_FragCoord.z;
#endif`,xP=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,wP=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,_P=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,MP=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,bP=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,EP=`#ifdef USE_MAP
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif`,SP=`#ifdef USE_MAP
	uniform mat3 uvTransform;
	uniform sampler2D map;
#endif`,TP=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,PP=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,AP=`#ifdef USE_MORPHNORMALS
	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];
	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];
	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];
	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];
#endif`,LP=`#ifdef USE_MORPHTARGETS
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,CP=`#ifdef USE_MORPHTARGETS
	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];
	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];
	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];
	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];
	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];
	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];
	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];
	#endif
#endif`,RP=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,OP=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	#ifdef USE_TANGENT
		mat3 vTBN = mat3( tangent, bitangent, normal );
		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
		mapN.xy = normalScale * mapN.xy;
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, normalScale, normalMap );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,DP=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 normalScale, in sampler2D normalMap ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
		mapN.xy *= normalScale;
		#ifdef DOUBLE_SIDED
			bool frontFacing = dot( cross( S, T ), N ) > 0.0;
			mapN.xy *= ( float( frontFacing ) * 2.0 - 1.0 );
		#else
			mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		mat3 tsn = mat3( S, T, N );
		return normalize( tsn * mapN );
	}
#endif`,IP=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,NP=`#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 vTBN = mat3( tangent, bitangent, clearcoatNormal );
		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
		mapN.xy = clearcoatNormalScale * mapN.xy;
		clearcoatNormal = normalize( vTBN * mapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatNormalScale, clearcoatNormalMap );
	#endif
#endif`,kP=`#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,FP=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 encodeHalfRGBA ( vec2 v ) {
	vec4 encoded = vec4( 0.0 );
	const vec2 offset = vec2( 1.0 / 255.0, 0.0 );
	encoded.xy = vec2( v.x, fract( v.x * 255.0 ) );
	encoded.xy = encoded.xy - ( encoded.yy * offset );
	encoded.zw = vec2( v.y, fract( v.y * 255.0 ) );
	encoded.zw = encoded.zw - ( encoded.ww * offset );
	return encoded;
}
vec2 decodeHalfRGBA( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,zP=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,BP=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,UP=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,GP=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,VP=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,HP=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,WP=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return decodeHalfRGBA( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {
		const vec2 offset = vec2( 0.0, 1.0 );
		vec2 texelSize = vec2( 1.0 ) / size;
		vec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;
		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );
		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );
		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );
		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );
		vec2 f = fract( uv * size + 0.5 );
		float a = mix( lb, lt, f.y );
		float b = mix( rb, rt, f.y );
		float c = mix( a, b, f.x );
		return c;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			shadow = (
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,jP=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,XP=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#endif
#endif`,qP=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLight directionalLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLights[ i ];
		shadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLight spotLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLights[ i ];
		shadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLight pointLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLights[ i ];
		shadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#endif
	#endif
	return shadow;
}`,YP=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,$P=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,ZP=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,JP=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,QP=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,KP=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,eA=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tA=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,nA=`#ifdef USE_UV
	varying vec2 vUv;
#endif`,rA=`#ifdef USE_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif`,iA=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,aA=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,oA=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
#endif`,sA=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = uv2;
#endif`,lA=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,uA=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cA=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fA=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = mapTexelToLinear( texColor );
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,hA=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,dA=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( gl_FragCoord.z );
	#endif
}`,pA=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
}`,vA=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,mA=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,gA=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV;
	sampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,yA=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,xA=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,wA=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	vLineDistance = scale * lineDistance;
	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_A=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,MA=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,bA=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EA=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SA=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,TA=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,PA=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AA=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,LA=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CA=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RA=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,OA=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,DA=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,IA=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,NA=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <fog_fragment>
}`,kA=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FA=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,zA=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ze={alphamap_fragment:E2,alphamap_pars_fragment:S2,alphatest_fragment:T2,aomap_fragment:P2,aomap_pars_fragment:A2,begin_vertex:L2,beginnormal_vertex:C2,bsdfs:R2,bumpmap_pars_fragment:O2,clipping_planes_fragment:D2,clipping_planes_pars_fragment:I2,clipping_planes_pars_vertex:N2,clipping_planes_vertex:k2,color_fragment:F2,color_pars_fragment:z2,color_pars_vertex:B2,color_vertex:U2,common:G2,cube_uv_reflection_fragment:V2,defaultnormal_vertex:H2,displacementmap_pars_vertex:W2,displacementmap_vertex:j2,emissivemap_fragment:X2,emissivemap_pars_fragment:q2,encodings_fragment:Y2,encodings_pars_fragment:$2,envmap_fragment:Z2,envmap_common_pars_fragment:J2,envmap_pars_fragment:Q2,envmap_pars_vertex:K2,envmap_physical_pars_fragment:cP,envmap_vertex:eP,fog_vertex:tP,fog_pars_vertex:nP,fog_fragment:rP,fog_pars_fragment:iP,gradientmap_pars_fragment:aP,lightmap_fragment:oP,lightmap_pars_fragment:sP,lights_lambert_vertex:lP,lights_pars_begin:uP,lights_phong_fragment:fP,lights_phong_pars_fragment:hP,lights_physical_fragment:dP,lights_physical_pars_fragment:pP,lights_fragment_begin:vP,lights_fragment_maps:mP,lights_fragment_end:gP,logdepthbuf_fragment:yP,logdepthbuf_pars_fragment:xP,logdepthbuf_pars_vertex:wP,logdepthbuf_vertex:_P,map_fragment:MP,map_pars_fragment:bP,map_particle_fragment:EP,map_particle_pars_fragment:SP,metalnessmap_fragment:TP,metalnessmap_pars_fragment:PP,morphnormal_vertex:AP,morphtarget_pars_vertex:LP,morphtarget_vertex:CP,normal_fragment_begin:RP,normal_fragment_maps:OP,normalmap_pars_fragment:DP,clearcoat_normal_fragment_begin:IP,clearcoat_normal_fragment_maps:NP,clearcoat_normalmap_pars_fragment:kP,packing:FP,premultiplied_alpha_fragment:zP,project_vertex:BP,dithering_fragment:UP,dithering_pars_fragment:GP,roughnessmap_fragment:VP,roughnessmap_pars_fragment:HP,shadowmap_pars_fragment:WP,shadowmap_pars_vertex:jP,shadowmap_vertex:XP,shadowmask_pars_fragment:qP,skinbase_vertex:YP,skinning_pars_vertex:$P,skinning_vertex:ZP,skinnormal_vertex:JP,specularmap_fragment:QP,specularmap_pars_fragment:KP,tonemapping_fragment:eA,tonemapping_pars_fragment:tA,uv_pars_fragment:nA,uv_pars_vertex:rA,uv_vertex:iA,uv2_pars_fragment:aA,uv2_pars_vertex:oA,uv2_vertex:sA,worldpos_vertex:lA,background_frag:uA,background_vert:cA,cube_frag:fA,cube_vert:hA,depth_frag:dA,depth_vert:pA,distanceRGBA_frag:vA,distanceRGBA_vert:mA,equirect_frag:gA,equirect_vert:yA,linedashed_frag:xA,linedashed_vert:wA,meshbasic_frag:_A,meshbasic_vert:MA,meshlambert_frag:bA,meshlambert_vert:EA,meshmatcap_frag:SA,meshmatcap_vert:TA,meshphong_frag:PA,meshphong_vert:AA,meshphysical_frag:LA,meshphysical_vert:CA,normal_frag:RA,normal_vert:OA,points_frag:DA,points_vert:IA,shadow_frag:NA,shadow_vert:kA,sprite_frag:FA,sprite_vert:zA},ye={common:{diffuse:{value:new he(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ct},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new X(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new he(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new he(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Ct}},sprite:{diffuse:{value:new he(15658734)},opacity:{value:1},center:{value:new X(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new Ct}}},Hr={basic:{uniforms:mn([ye.common,ye.specularmap,ye.envmap,ye.aomap,ye.lightmap,ye.fog]),vertexShader:Ze.meshbasic_vert,fragmentShader:Ze.meshbasic_frag},lambert:{uniforms:mn([ye.common,ye.specularmap,ye.envmap,ye.aomap,ye.lightmap,ye.emissivemap,ye.fog,ye.lights,{emissive:{value:new he(0)}}]),vertexShader:Ze.meshlambert_vert,fragmentShader:Ze.meshlambert_frag},phong:{uniforms:mn([ye.common,ye.specularmap,ye.envmap,ye.aomap,ye.lightmap,ye.emissivemap,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.gradientmap,ye.fog,ye.lights,{emissive:{value:new he(0)},specular:{value:new he(1118481)},shininess:{value:30}}]),vertexShader:Ze.meshphong_vert,fragmentShader:Ze.meshphong_frag},standard:{uniforms:mn([ye.common,ye.envmap,ye.aomap,ye.lightmap,ye.emissivemap,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.roughnessmap,ye.metalnessmap,ye.fog,ye.lights,{emissive:{value:new he(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Ze.meshphysical_vert,fragmentShader:Ze.meshphysical_frag},matcap:{uniforms:mn([ye.common,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.fog,{matcap:{value:null}}]),vertexShader:Ze.meshmatcap_vert,fragmentShader:Ze.meshmatcap_frag},points:{uniforms:mn([ye.points,ye.fog]),vertexShader:Ze.points_vert,fragmentShader:Ze.points_frag},dashed:{uniforms:mn([ye.common,ye.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ze.linedashed_vert,fragmentShader:Ze.linedashed_frag},depth:{uniforms:mn([ye.common,ye.displacementmap]),vertexShader:Ze.depth_vert,fragmentShader:Ze.depth_frag},normal:{uniforms:mn([ye.common,ye.bumpmap,ye.normalmap,ye.displacementmap,{opacity:{value:1}}]),vertexShader:Ze.normal_vert,fragmentShader:Ze.normal_frag},sprite:{uniforms:mn([ye.sprite,ye.fog]),vertexShader:Ze.sprite_vert,fragmentShader:Ze.sprite_frag},background:{uniforms:{uvTransform:{value:new Ct},t2D:{value:null}},vertexShader:Ze.background_vert,fragmentShader:Ze.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ze.cube_vert,fragmentShader:Ze.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ze.equirect_vert,fragmentShader:Ze.equirect_frag},distanceRGBA:{uniforms:mn([ye.common,ye.displacementmap,{referencePosition:{value:new A},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ze.distanceRGBA_vert,fragmentShader:Ze.distanceRGBA_frag},shadow:{uniforms:mn([ye.lights,ye.fog,{color:{value:new he(0)},opacity:{value:1}}]),vertexShader:Ze.shadow_vert,fragmentShader:Ze.shadow_frag}};Hr.physical={uniforms:mn([Hr.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new he(0)},clearcoatNormalScale:{value:new X(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:Ze.meshphysical_vert,fragmentShader:Ze.meshphysical_frag};function hg(){var e=null,t=!1,n=null;function r(i,a){t!==!1&&(n(i,a),e.requestAnimationFrame(r))}return{start:function(){t!==!0&&n!==null&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(i){n=i},setContext:function(i){e=i}}}function BA(e){var t=new WeakMap;function n(s,l){var u=s.array,c=s.dynamic?35048:35044,f=e.createBuffer();e.bindBuffer(l,f),e.bufferData(l,u,c),s.onUploadCallback();var h=5126;return u instanceof Float32Array?h=5126:u instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):u instanceof Uint16Array?h=5123:u instanceof Int16Array?h=5122:u instanceof Uint32Array?h=5125:u instanceof Int32Array?h=5124:u instanceof Int8Array?h=5120:u instanceof Uint8Array&&(h=5121),{buffer:f,type:h,bytesPerElement:u.BYTES_PER_ELEMENT,version:s.version}}function r(s,l,u){var c=l.array,f=l.updateRange;e.bindBuffer(u,s),l.dynamic===!1?e.bufferData(u,c,35044):f.count===-1?e.bufferSubData(u,0,c):f.count===0?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(u,f.offset*c.BYTES_PER_ELEMENT,c.subarray(f.offset,f.offset+f.count)),f.count=-1)}function i(s){return s.isInterleavedBufferAttribute&&(s=s.data),t.get(s)}function a(s){s.isInterleavedBufferAttribute&&(s=s.data);var l=t.get(s);l&&(e.deleteBuffer(l.buffer),t.delete(s))}function o(s,l){s.isInterleavedBufferAttribute&&(s=s.data);var u=t.get(s);u===void 0?t.set(s,n(s,l)):u.version<s.version&&(r(u.buffer,s,l),u.version=s.version)}return{get:i,remove:a,update:o}}function Cf(e,t,n,r){Oe.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Uo(e,t,n,r)),this.mergeVertices()}Cf.prototype=Object.create(Oe.prototype);Cf.prototype.constructor=Cf;function Uo(e,t,n,r){se.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},e=e||1,t=t||1;var i=e/2,a=t/2,o=Math.floor(n)||1,s=Math.floor(r)||1,l=o+1,u=s+1,c=e/o,f=t/s,h,d,p=[],x=[],y=[],v=[];for(d=0;d<u;d++){var m=d*f-a;for(h=0;h<l;h++){var w=h*c-i;x.push(w,-m,0),y.push(0,0,1),v.push(h/o),v.push(1-d/s)}}for(d=0;d<s;d++)for(h=0;h<o;h++){var g=h+l*d,_=h+l*(d+1),b=h+1+l*(d+1),E=h+1+l*d;p.push(g,_,E),p.push(_,b,E)}this.setIndex(p),this.addAttribute("position",new ie(x,3)),this.addAttribute("normal",new ie(y,3)),this.addAttribute("uv",new ie(v,2))}Uo.prototype=Object.create(se.prototype);Uo.prototype.constructor=Uo;function UA(e,t,n,r){var i=new he(0),a=0,o,s,l=null,u=0;function c(h,d,p,x){var y=d.background,v=e.vr,m=v.getSession&&v.getSession();if(m&&m.environmentBlendMode==="additive"&&(y=null),y===null?(f(i,a),l=null,u=0):y&&y.isColor&&(f(y,1),x=!0,l=null,u=0),(e.autoClear||x)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),y&&(y.isCubeTexture||y.isWebGLRenderTargetCube)){s===void 0&&(s=new ot(new Fh(1,1,1),new jt({type:"BackgroundCubeMaterial",uniforms:zo(Hr.cube.uniforms),vertexShader:Hr.cube.vertexShader,fragmentShader:Hr.cube.fragmentShader,side:Et,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.removeAttribute("normal"),s.geometry.removeAttribute("uv"),s.onBeforeRender=function(g,_,b){this.matrixWorld.copyPosition(b.matrixWorld)},Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(s));var w=y.isWebGLRenderTargetCube?y.texture:y;s.material.uniforms.tCube.value=w,s.material.uniforms.tFlip.value=y.isWebGLRenderTargetCube?1:-1,(l!==y||u!==w.version)&&(s.material.needsUpdate=!0,l=y,u=w.version),h.unshift(s,s.geometry,s.material,0,0,null)}else y&&y.isTexture&&(o===void 0&&(o=new ot(new Uo(2,2),new jt({type:"BackgroundMaterial",uniforms:zo(Hr.background.uniforms),vertexShader:Hr.background.vertexShader,fragmentShader:Hr.background.fragmentShader,side:wu,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.removeAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(o)),o.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),o.material.uniforms.uvTransform.value.copy(y.matrix),(l!==y||u!==y.version)&&(o.material.needsUpdate=!0,l=y,u=y.version),h.unshift(o,o.geometry,o.material,0,0,null))}function f(h,d){t.buffers.color.setClear(h.r,h.g,h.b,d,r)}return{getClearColor:function(){return i},setClearColor:function(h,d){i.set(h),a=d!==void 0?d:1,f(i,a)},getClearAlpha:function(){return a},setClearAlpha:function(h){a=h,f(i,a)},render:c}}function GA(e,t,n,r){var i;function a(l){i=l}function o(l,u){e.drawArrays(i,l,u),n.update(u,i)}function s(l,u,c,f){if(f!==0){var h,d;if(r.isWebGL2)h=e,d="drawArraysInstanced";else if(h=t.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[d](i,u,c,f),n.update(c,i,f)}}this.setMode=a,this.render=o,this.renderInstances=s}function VA(e,t,n){var r;function i(){if(r!==void 0)return r;var b=t.get("EXT_texture_filter_anisotropic");return b!==null?r=e.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT):r=0,r}function a(b){if(b==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";b="mediump"}return b==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,s=n.precision!==void 0?n.precision:"highp",l=a(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);var u=n.logarithmicDepthBuffer===!0,c=e.getParameter(34930),f=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),x=e.getParameter(36347),y=e.getParameter(36348),v=e.getParameter(36349),m=f>0,w=o||!!t.get("OES_texture_float"),g=m&&w,_=o?e.getParameter(36183):0;return{isWebGL2:o,getMaxAnisotropy:i,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:x,maxVaryings:y,maxFragmentUniforms:v,vertexTextures:m,floatFragmentTextures:w,floatVertexTextures:g,maxSamples:_}}function HA(){var e=this,t=null,n=0,r=!1,i=!1,a=new Vr,o=new Ct,s={value:null,needsUpdate:!1};this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(c,f,h){var d=c.length!==0||f||n!==0||r;return r=f,t=u(c,h,0),n=c.length,d},this.beginShadows=function(){i=!0,u(null)},this.endShadows=function(){i=!1,l()},this.setState=function(c,f,h,d,p,x){if(!r||c===null||c.length===0||i&&!h)i?u(null):l();else{var y=i?0:n,v=y*4,m=p.clippingState||null;s.value=m,m=u(c,d,v,x);for(var w=0;w!==v;++w)m[w]=t[w];p.clippingState=m,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=y}};function l(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(c,f,h,d){var p=c!==null?c.length:0,x=null;if(p!==0){if(x=s.value,d!==!0||x===null){var y=h+p*4,v=f.matrixWorldInverse;o.getNormalMatrix(v),(x===null||x.length<y)&&(x=new Float32Array(y));for(var m=0,w=h;m!==p;++m,w+=4)a.copy(c[m]).applyMatrix4(v,o),a.normal.toArray(x,w),x[w+3]=a.constant}s.value=x,s.needsUpdate=!0}return e.numPlanes=p,x}}function WA(e){var t={};return{get:function(n){if(t[n]!==void 0)return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function jA(e,t,n){var r=new WeakMap,i=new WeakMap;function a(c){var f=c.target,h=r.get(f);h.index!==null&&t.remove(h.index);for(var d in h.attributes)t.remove(h.attributes[d]);f.removeEventListener("dispose",a),r.delete(f);var p=i.get(h);p&&(t.remove(p),i.delete(h)),n.memory.geometries--}function o(c,f){var h=r.get(f);return h||(f.addEventListener("dispose",a),f.isBufferGeometry?h=f:f.isGeometry&&(f._bufferGeometry===void 0&&(f._bufferGeometry=new se().setFromObject(c)),h=f._bufferGeometry),r.set(f,h),n.memory.geometries++,h)}function s(c){var f=c.index,h=c.attributes;f!==null&&t.update(f,34963);for(var d in h)t.update(h[d],34962);var p=c.morphAttributes;for(var d in p)for(var x=p[d],y=0,v=x.length;y<v;y++)t.update(x[y],34962)}function l(c){var f=[],h=c.index,d=c.attributes.position,p=0;if(h!==null){var x=h.array;p=h.version;for(var y=0,v=x.length;y<v;y+=3){var m=x[y+0],w=x[y+1],g=x[y+2];f.push(m,w,w,g,g,m)}}else{var x=d.array;p=d.version;for(var y=0,v=x.length/3-1;y<v;y+=3){var m=y+0,w=y+1,g=y+2;f.push(m,w,w,g,g,m)}}var _=new(R1(f)>65535?Al:Pl)(f,1);_.version=p,t.update(_,34963);var b=i.get(c);b&&t.remove(b),i.set(c,_)}function u(c){var f=i.get(c);if(f){var h=c.index;h!==null&&f.version<h.version&&l(c)}else l(c);return i.get(c)}return{get:o,update:s,getWireframeAttribute:u}}function XA(e,t,n,r){var i;function a(f){i=f}var o,s;function l(f){o=f.type,s=f.bytesPerElement}function u(f,h){e.drawElements(i,h,o,f*s),n.update(h,i)}function c(f,h,d,p){if(p!==0){var x,y;if(r.isWebGL2)x=e,y="drawElementsInstanced";else if(x=t.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[y](i,d,o,h*s,p),n.update(d,i,p)}}this.setMode=a,this.setIndex=l,this.render=u,this.renderInstances=c}function qA(e){var t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,o,s){switch(s=s||1,n.calls++,o){case 4:n.triangles+=s*(a/3);break;case 5:case 6:n.triangles+=s*(a-2);break;case 1:n.lines+=s*(a/2);break;case 3:n.lines+=s*(a-1);break;case 2:n.lines+=s*a;break;case 0:n.points+=s*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:i,update:r}}function YA(e,t){return Math.abs(t[1])-Math.abs(e[1])}function $A(e){var t={},n=new Float32Array(8);function r(i,a,o,s){var l=i.morphTargetInfluences,u=l.length,c=t[a.id];if(c===void 0){c=[];for(var f=0;f<u;f++)c[f]=[f,0];t[a.id]=c}for(var h=o.morphTargets&&a.morphAttributes.position,d=o.morphNormals&&a.morphAttributes.normal,f=0;f<u;f++){var p=c[f];p[1]!==0&&(h&&a.removeAttribute("morphTarget"+f),d&&a.removeAttribute("morphNormal"+f))}for(var f=0;f<u;f++){var p=c[f];p[0]=f,p[1]=l[f]}c.sort(YA);for(var f=0;f<8;f++){var p=c[f];if(p){var x=p[0],y=p[1];if(y){h&&a.addAttribute("morphTarget"+f,h[x]),d&&a.addAttribute("morphNormal"+f,d[x]),n[f]=y;continue}}n[f]=0}s.getUniforms().setValue(e,"morphTargetInfluences",n)}return{update:r}}function ZA(e,t,n,r){var i={};function a(s){var l=r.render.frame,u=s.geometry,c=t.get(s,u);return i[c.id]!==l&&(u.isGeometry&&c.updateFromObject(s),t.update(c),i[c.id]=l),s.isInstancedMesh&&n.update(s.instanceMatrix,34962),c}function o(){i={}}return{update:a,dispose:o}}function zi(e,t,n,r,i,a,o,s,l,u){e=e!==void 0?e:[],t=t!==void 0?t:ng,o=o!==void 0?o:Ea,it.call(this,e,t,n,r,i,a,o,s,l,u),this.flipY=!1}zi.prototype=Object.create(it.prototype);zi.prototype.constructor=zi;zi.prototype.isCubeTexture=!0;Object.defineProperty(zi.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});function Cl(e,t,n,r){it.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=Ht,this.minFilter=Ht,this.wrapR=sn,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Cl.prototype=Object.create(it.prototype);Cl.prototype.constructor=Cl;Cl.prototype.isDataTexture2DArray=!0;function Rl(e,t,n,r){it.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=Ht,this.minFilter=Ht,this.wrapR=sn,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Rl.prototype=Object.create(it.prototype);Rl.prototype.constructor=Rl;Rl.prototype.isDataTexture3D=!0;var I1=new it,JA=new Cl,QA=new Rl,N1=new zi,x0=[],w0=[],_0=new Float32Array(16),M0=new Float32Array(9),b0=new Float32Array(4);function hs(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=x0[i];if(a===void 0&&(a=new Float32Array(i),x0[i]=a),t!==0){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function Bn(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Mn(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function k1(e,t){var n=w0[t];n===void 0&&(n=new Int32Array(t),w0[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function KA(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function eL(e,t){var n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Bn(n,t))return;e.uniform2fv(this.addr,t),Mn(n,t)}}function tL(e,t){var n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(t.r!==void 0)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Bn(n,t))return;e.uniform3fv(this.addr,t),Mn(n,t)}}function nL(e,t){var n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Bn(n,t))return;e.uniform4fv(this.addr,t),Mn(n,t)}}function rL(e,t){var n=this.cache,r=t.elements;if(r===void 0){if(Bn(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Mn(n,t)}else{if(Bn(n,r))return;b0.set(r),e.uniformMatrix2fv(this.addr,!1,b0),Mn(n,r)}}function iL(e,t){var n=this.cache,r=t.elements;if(r===void 0){if(Bn(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Mn(n,t)}else{if(Bn(n,r))return;M0.set(r),e.uniformMatrix3fv(this.addr,!1,M0),Mn(n,r)}}function aL(e,t){var n=this.cache,r=t.elements;if(r===void 0){if(Bn(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Mn(n,t)}else{if(Bn(n,r))return;_0.set(r),e.uniformMatrix4fv(this.addr,!1,_0),Mn(n,r)}}function oL(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||I1,i)}function sL(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||JA,i)}function lL(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||QA,i)}function uL(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||N1,i)}function cL(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function fL(e,t){var n=this.cache;Bn(n,t)||(e.uniform2iv(this.addr,t),Mn(n,t))}function hL(e,t){var n=this.cache;Bn(n,t)||(e.uniform3iv(this.addr,t),Mn(n,t))}function dL(e,t){var n=this.cache;Bn(n,t)||(e.uniform4iv(this.addr,t),Mn(n,t))}function pL(e){switch(e){case 5126:return KA;case 35664:return eL;case 35665:return tL;case 35666:return nL;case 35674:return rL;case 35675:return iL;case 35676:return aL;case 35678:case 36198:return oL;case 35679:return lL;case 35680:return uL;case 36289:return sL;case 5124:case 35670:return cL;case 35667:case 35671:return fL;case 35668:case 35672:return hL;case 35669:case 35673:return dL}}function vL(e,t){e.uniform1fv(this.addr,t)}function mL(e,t){e.uniform1iv(this.addr,t)}function gL(e,t){e.uniform2iv(this.addr,t)}function yL(e,t){e.uniform3iv(this.addr,t)}function xL(e,t){e.uniform4iv(this.addr,t)}function wL(e,t){var n=hs(t,this.size,2);e.uniform2fv(this.addr,n)}function _L(e,t){var n=hs(t,this.size,3);e.uniform3fv(this.addr,n)}function ML(e,t){var n=hs(t,this.size,4);e.uniform4fv(this.addr,n)}function bL(e,t){var n=hs(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function EL(e,t){var n=hs(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function SL(e,t){var n=hs(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function TL(e,t,n){var r=t.length,i=k1(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTexture2D(t[a]||I1,i[a])}function PL(e,t,n){var r=t.length,i=k1(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTextureCube(t[a]||N1,i[a])}function AL(e){switch(e){case 5126:return vL;case 35664:return wL;case 35665:return _L;case 35666:return ML;case 35674:return bL;case 35675:return EL;case 35676:return SL;case 35678:return TL;case 35680:return PL;case 5124:case 35670:return mL;case 35667:case 35671:return gL;case 35668:case 35672:return yL;case 35669:case 35673:return xL}}function LL(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=pL(t.type)}function F1(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=AL(t.type)}F1.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Mn(t,e)};function z1(e){this.id=e,this.seq=[],this.map={}}z1.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}};var Wd=/([\w\d_]+)(\])?(\[|\.)?/g;function E0(e,t){e.seq.push(t),e.map[t.id]=t}function CL(e,t,n){var r=e.name,i=r.length;for(Wd.lastIndex=0;;){var a=Wd.exec(r),o=Wd.lastIndex,s=a[1],l=a[2]==="]",u=a[3];if(l&&(s=s|0),u===void 0||u==="["&&o+2===i){E0(n,u===void 0?new LL(s,e,t):new F1(s,e,t));break}else{var c=n.map,f=c[s];f===void 0&&(f=new z1(s),E0(n,f)),n=f}}}function Ii(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r),a=e.getUniformLocation(t,i.name);CL(i,a,this)}}Ii.prototype.setValue=function(e,t,n,r){var i=this.map[t];i!==void 0&&i.setValue(e,n,r)};Ii.prototype.setOptional=function(e,t,n){var r=t[n];r!==void 0&&this.setValue(e,n,r)};Ii.upload=function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];s.needsUpdate!==!1&&o.setValue(e,s.value,r)}};Ii.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n};function S0(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}var RL=0;function OL(e){for(var t=e.split(`
`),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join(`
`)}function B1(e){switch(e){case Lf:return["Linear","( value )"];case JT:return["sRGB","( value )"];case QT:return["RGBE","( value )"];case e2:return["RGBM","( value, 7.0 )"];case t2:return["RGBM","( value, 16.0 )"];case n2:return["RGBD","( value, 256.0 )"];case A1:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case KT:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+e)}}function T0(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&i==="")return"";var a=e.getShaderSource(t);return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+`
`+i+OL(a)}function ac(e,t){var n=B1(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function DL(e,t){var n=B1(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function IL(e,t){var n;switch(t){case b1:n="Linear";break;case gT:n="Reinhard";break;case yT:n="Uncharted2";break;case xT:n="OptimizedCineon";break;case wT:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function NL(e,t,n){e=e||{};var r=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(Bs).join(`
`)}function kL(e){var t=[];for(var n in e){var r=e[n];r!==!1&&t.push("#define "+n+" "+r)}return t.join(`
`)}function FL(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i),o=a.name;n[o]=e.getAttribLocation(t,o)}return n}function Bs(e){return e!==""}function P0(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function A0(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var zL=/^[ \t]*#include +<([\w\d./]+)>/gm;function uv(e){return e.replace(zL,BL)}function BL(e,t){var n=Ze[t];if(n===void 0)throw new Error("Can not resolve #include <"+t+">");return uv(n)}var UL=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function L0(e){return e.replace(UL,GL)}function GL(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[ i \]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function C0(e){var t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function VL(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===y1?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===YS?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===zs&&(t="SHADOWMAP_TYPE_VSM"),t}function HL(e,t){var n="ENVMAP_TYPE_CUBE";if(e.envMap)switch(t.envMap.mapping){case ng:case rg:n="ENVMAP_TYPE_CUBE";break;case ag:case og:n="ENVMAP_TYPE_CUBE_UV";break;case E1:case ig:n="ENVMAP_TYPE_EQUIREC";break;case S1:n="ENVMAP_TYPE_SPHERE";break}return n}function WL(e,t){var n="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(t.envMap.mapping){case rg:case ig:n="ENVMAP_MODE_REFRACTION";break}return n}function jL(e,t){var n="ENVMAP_BLENDING_MULTIPLY";if(e.envMap)switch(t.combine){case Nh:n="ENVMAP_BLENDING_MULTIPLY";break;case vT:n="ENVMAP_BLENDING_MIX";break;case mT:n="ENVMAP_BLENDING_ADD";break}return n}function XL(e,t,n,r,i,a){var o=e.getContext(),s=r.defines,l=i.vertexShader,u=i.fragmentShader,c=VL(a),f=HL(a,r),h=WL(a,r),d=jL(a,r),p=e.gammaFactor>0?e.gammaFactor:1,x=a.isWebGL2?"":NL(r.extensions,a,t),y=kL(s),v=o.createProgram(),m,w,g=e.getRenderTarget(),_=g&&g.isWebGLMultiviewRenderTarget?g.numViews:0;if(r.isRawShaderMaterial?(m=[y].filter(Bs).join(`
`),m.length>0&&(m+=`
`),w=[x,y].filter(Bs).join(`
`),w.length>0&&(w+=`
`)):(m=[C0(a),"#define SHADER_NAME "+i.name,y,a.instancing?"#define USE_INSTANCING":"",a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+h:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&a.flatShading===!1?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+c:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Bs).join(`
`),w=[x,C0(a),"#define SHADER_NAME "+i.name,y,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+p,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+f:"",a.envMap?"#define "+h:"",a.envMap?"#define "+d:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.sheen?"#define USE_SHEEN":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+c:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",((r.extensions?r.extensions.shaderTextureLOD:!1)||a.envMap)&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==Yc?"#define TONE_MAPPING":"",a.toneMapping!==Yc?Ze.tonemapping_pars_fragment:"",a.toneMapping!==Yc?IL("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?Ze.encodings_pars_fragment:"",a.mapEncoding?ac("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?ac("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?ac("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?ac("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?DL("linearToOutputTexel",a.outputEncoding):"",a.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(Bs).join(`
`)),l=uv(l),l=P0(l,a),l=A0(l,a),u=uv(u),u=P0(u,a),u=A0(u,a),l=L0(l),u=L0(u),a.isWebGL2&&!r.isRawShaderMaterial){var b=!1,E=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&l.match(E)!==null&&u.match(E)!==null&&(b=!0,l=l.replace(E,""),u=u.replace(E,"")),m=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,w=[`#version 300 es
`,"#define varying in",b?"":"out highp vec4 pc_fragColor;",b?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w,_>0&&(m=m.replace(`#version 300 es
`,[`#version 300 es
`,"#extension GL_OVR_multiview2 : require","layout(num_views = "+_+") in;","#define VIEW_ID gl_ViewID_OVR"].join(`
`)),m=m.replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join(`
`),["uniform mat4 modelViewMatrices["+_+"];","uniform mat4 projectionMatrices["+_+"];","uniform mat4 viewMatrices["+_+"];","uniform mat3 normalMatrices["+_+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join(`
`)),w=w.replace(`#version 300 es
`,[`#version 300 es
`,"#extension GL_OVR_multiview2 : require","#define VIEW_ID gl_ViewID_OVR"].join(`
`)),w=w.replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+_+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join(`
`)))}var S=m+l,O=w+u,D=S0(o,35633,S),L=S0(o,35632,O);if(o.attachShader(v,D),o.attachShader(v,L),r.index0AttributeName!==void 0?o.bindAttribLocation(v,0,r.index0AttributeName):a.morphTargets===!0&&o.bindAttribLocation(v,0,"position"),o.linkProgram(v),e.debug.checkShaderErrors){var R=o.getProgramInfoLog(v).trim(),N=o.getShaderInfoLog(D).trim(),B=o.getShaderInfoLog(L).trim(),G=!0,W=!0;if(o.getProgramParameter(v,35714)===!1){G=!1;var Y=T0(o,D,"vertex"),z=T0(o,L,"fragment");console.error("THREE.WebGLProgram: shader error: ",o.getError(),"35715",o.getProgramParameter(v,35715),"gl.getProgramInfoLog",R,Y,z)}else R!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",R):(N===""||B==="")&&(W=!1);W&&(this.diagnostics={runnable:G,material:r,programLog:R,vertexShader:{log:N,prefix:m},fragmentShader:{log:B,prefix:w}})}o.deleteShader(D),o.deleteShader(L);var V;this.getUniforms=function(){return V===void 0&&(V=new Ii(o,v)),V};var j;return this.getAttributes=function(){return j===void 0&&(j=FL(o,v)),j},this.destroy=function(){o.deleteProgram(v),this.program=void 0},this.name=i.name,this.id=RL++,this.code=n,this.usedTimes=1,this.program=v,this.vertexShader=D,this.fragmentShader=L,this.numMultiviewViews=_,this}function qL(e,t,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},a=["precision","supportsVertexTextures","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function o(l){var u=l.skeleton,c=u.bones;if(n.floatVertexTextures)return 1024;var f=n.maxVertexUniforms,h=Math.floor((f-20)/4),d=Math.min(h,c.length);return d<c.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+c.length+" bones. This GPU supports "+d+"."),0):d}function s(l,u){var c;return l?l.isTexture?c=l.encoding:l.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),c=l.texture.encoding):c=Lf,c===Lf&&u&&(c=A1),c}this.getParameters=function(l,u,c,f,h,d,p){var x=i[l.type],y=p.isSkinnedMesh?o(p):0,v=n.precision;l.precision!==null&&(v=n.getMaxPrecision(l.precision),v!==l.precision&&console.warn("THREE.WebGLProgram.getParameters:",l.precision,"not supported, using",v,"instead."));var m=e.getRenderTarget(),w={isWebGL2:n.isWebGL2,shaderID:x,precision:v,instancing:p.isInstancedMesh===!0,supportsVertexTextures:n.vertexTextures,outputEncoding:s(m?m.texture:null,e.gammaOutput),map:!!l.map,mapEncoding:s(l.map,e.gammaInput),matcap:!!l.matcap,matcapEncoding:s(l.matcap,e.gammaInput),envMap:!!l.envMap,envMapMode:l.envMap&&l.envMap.mapping,envMapEncoding:s(l.envMap,e.gammaInput),envMapCubeUV:!!l.envMap&&(l.envMap.mapping===ag||l.envMap.mapping===og),lightMap:!!l.lightMap,aoMap:!!l.aoMap,emissiveMap:!!l.emissiveMap,emissiveMapEncoding:s(l.emissiveMap,e.gammaInput),bumpMap:!!l.bumpMap,normalMap:!!l.normalMap,objectSpaceNormalMap:l.normalMapType===a2,tangentSpaceNormalMap:l.normalMapType===Mu,clearcoatNormalMap:!!l.clearcoatNormalMap,displacementMap:!!l.displacementMap,roughnessMap:!!l.roughnessMap,metalnessMap:!!l.metalnessMap,specularMap:!!l.specularMap,alphaMap:!!l.alphaMap,gradientMap:!!l.gradientMap,sheen:!!l.sheen,combine:l.combine,vertexTangents:l.normalMap&&l.vertexTangents,vertexColors:l.vertexColors,vertexUvs:!!l.map||!!l.bumpMap||!!l.normalMap||!!l.specularMap||!!l.alphaMap||!!l.emissiveMap||!!l.roughnessMap||!!l.metalnessMap||!!l.clearcoatNormalMap,fog:!!f,useFog:l.fog,fogExp2:f&&f.isFogExp2,flatShading:l.flatShading,sizeAttenuation:l.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:l.skinning&&y>0,maxBones:y,useVertexTexture:n.floatVertexTextures,morphTargets:l.morphTargets,morphNormals:l.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:u.directional.length,numPointLights:u.point.length,numSpotLights:u.spot.length,numRectAreaLights:u.rectArea.length,numHemiLights:u.hemi.length,numDirLightShadows:u.directionalShadowMap.length,numPointLightShadows:u.pointShadowMap.length,numSpotLightShadows:u.spotShadowMap.length,numClippingPlanes:h,numClipIntersection:d,dithering:l.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:l.toneMapped?e.toneMapping:Yc,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:l.premultipliedAlpha,alphaTest:l.alphaTest,doubleSided:l.side===Ih,flipSided:l.side===Et,depthPacking:l.depthPacking!==void 0?l.depthPacking:!1};return w},this.getProgramCode=function(l,u){var c=[];if(u.shaderID?c.push(u.shaderID):(c.push(l.fragmentShader),c.push(l.vertexShader)),l.defines!==void 0)for(var f in l.defines)c.push(f),c.push(l.defines[f]);for(var h=0;h<a.length;h++)c.push(u[a[h]]);return c.push(l.onBeforeCompile.toString()),c.push(e.gammaOutput),c.push(e.gammaFactor),c.join()},this.acquireProgram=function(l,u,c,f){for(var h,d=0,p=r.length;d<p;d++){var x=r[d];if(x.code===f){h=x,++h.usedTimes;break}}return h===void 0&&(h=new XL(e,t,f,l,u,c),r.push(h)),h},this.releaseProgram=function(l){if(--l.usedTimes===0){var u=r.indexOf(l);r[u]=r[r.length-1],r.pop(),l.destroy()}},this.programs=r}function YL(){var e=new WeakMap;function t(a){var o=e.get(a);return o===void 0&&(o={},e.set(a,o)),o}function n(a){e.delete(a)}function r(a,o,s){e.get(a)[o]=s}function i(){e=new WeakMap}return{get:t,remove:n,update:r,dispose:i}}function $L(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ZL(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function R0(){var e=[],t=0,n=[],r=[],i={id:-1};function a(){t=0,n.length=0,r.length=0}function o(c,f,h,d,p,x){var y=e[t];return y===void 0?(y={id:c.id,object:c,geometry:f,material:h,program:h.program||i,groupOrder:d,renderOrder:c.renderOrder,z:p,group:x},e[t]=y):(y.id=c.id,y.object=c,y.geometry=f,y.material=h,y.program=h.program||i,y.groupOrder=d,y.renderOrder=c.renderOrder,y.z=p,y.group=x),t++,y}function s(c,f,h,d,p,x){var y=o(c,f,h,d,p,x);(h.transparent===!0?r:n).push(y)}function l(c,f,h,d,p,x){var y=o(c,f,h,d,p,x);(h.transparent===!0?r:n).unshift(y)}function u(){n.length>1&&n.sort($L),r.length>1&&r.sort(ZL)}return{opaque:n,transparent:r,init:a,push:s,unshift:l,sort:u}}function JL(){var e=new WeakMap;function t(i){var a=i.target;a.removeEventListener("dispose",t),e.delete(a)}function n(i,a){var o=e.get(i),s;return o===void 0?(s=new R0,e.set(i,new WeakMap),e.get(i).set(a,s),i.addEventListener("dispose",t)):(s=o.get(a),s===void 0&&(s=new R0,o.set(a,s))),s}function r(){e=new WeakMap}return{get:n,dispose:r}}function QL(){var e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new A,color:new he,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new X};break;case"SpotLight":n={position:new A,direction:new A,color:new he,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new X};break;case"PointLight":n={position:new A,color:new he,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new X,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new A,skyColor:new he,groundColor:new he};break;case"RectAreaLight":n={color:new he,position:new A,halfWidth:new A,halfHeight:new A};break}return e[t.id]=n,n}}}var KL=0;function e3(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function t3(){for(var e=new QL,t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},n=0;n<9;n++)t.probe.push(new A);var r=new A,i=new Ge,a=new Ge;function o(s,l,u){for(var c=0,f=0,h=0,d=0;d<9;d++)t.probe[d].set(0,0,0);var p=0,x=0,y=0,v=0,m=0,w=0,g=0,_=0,b=u.matrixWorldInverse;s.sort(e3);for(var d=0,E=s.length;d<E;d++){var S=s[d],O=S.color,D=S.intensity,L=S.distance,R=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)c+=O.r*D,f+=O.g*D,h+=O.b*D;else if(S.isLightProbe)for(var N=0;N<9;N++)t.probe[N].addScaledVector(S.sh.coefficients[N],D);else if(S.isDirectionalLight){var B=e.get(S);if(B.color.copy(S.color).multiplyScalar(S.intensity),B.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),B.direction.sub(r),B.direction.transformDirection(b),B.shadow=S.castShadow,S.castShadow){var G=S.shadow;B.shadowBias=G.bias,B.shadowRadius=G.radius,B.shadowMapSize=G.mapSize,t.directionalShadowMap[p]=R,t.directionalShadowMatrix[p]=S.shadow.matrix,w++}t.directional[p]=B,p++}else if(S.isSpotLight){var B=e.get(S);if(B.position.setFromMatrixPosition(S.matrixWorld),B.position.applyMatrix4(b),B.color.copy(O).multiplyScalar(D),B.distance=L,B.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),B.direction.sub(r),B.direction.transformDirection(b),B.coneCos=Math.cos(S.angle),B.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),B.decay=S.decay,B.shadow=S.castShadow,S.castShadow){var G=S.shadow;B.shadowBias=G.bias,B.shadowRadius=G.radius,B.shadowMapSize=G.mapSize,t.spotShadowMap[y]=R,t.spotShadowMatrix[y]=S.shadow.matrix,_++}t.spot[y]=B,y++}else if(S.isRectAreaLight){var B=e.get(S);B.color.copy(O).multiplyScalar(D),B.position.setFromMatrixPosition(S.matrixWorld),B.position.applyMatrix4(b),a.identity(),i.copy(S.matrixWorld),i.premultiply(b),a.extractRotation(i),B.halfWidth.set(S.width*.5,0,0),B.halfHeight.set(0,S.height*.5,0),B.halfWidth.applyMatrix4(a),B.halfHeight.applyMatrix4(a),t.rectArea[v]=B,v++}else if(S.isPointLight){var B=e.get(S);if(B.position.setFromMatrixPosition(S.matrixWorld),B.position.applyMatrix4(b),B.color.copy(S.color).multiplyScalar(S.intensity),B.distance=S.distance,B.decay=S.decay,B.shadow=S.castShadow,S.castShadow){var G=S.shadow;B.shadowBias=G.bias,B.shadowRadius=G.radius,B.shadowMapSize=G.mapSize,B.shadowCameraNear=G.camera.near,B.shadowCameraFar=G.camera.far,t.pointShadowMap[x]=R,t.pointShadowMatrix[x]=S.shadow.matrix,g++}t.point[x]=B,x++}else if(S.isHemisphereLight){var B=e.get(S);B.direction.setFromMatrixPosition(S.matrixWorld),B.direction.transformDirection(b),B.direction.normalize(),B.skyColor.copy(S.color).multiplyScalar(D),B.groundColor.copy(S.groundColor).multiplyScalar(D),t.hemi[m]=B,m++}}t.ambient[0]=c,t.ambient[1]=f,t.ambient[2]=h;var W=t.hash;(W.directionalLength!==p||W.pointLength!==x||W.spotLength!==y||W.rectAreaLength!==v||W.hemiLength!==m||W.numDirectionalShadows!==w||W.numPointShadows!==g||W.numSpotShadows!==_)&&(t.directional.length=p,t.spot.length=y,t.rectArea.length=v,t.point.length=x,t.hemi.length=m,t.directionalShadowMap.length=w,t.pointShadowMap.length=g,t.spotShadowMap.length=_,t.directionalShadowMatrix.length=w,t.pointShadowMatrix.length=g,t.spotShadowMatrix.length=_,W.directionalLength=p,W.pointLength=x,W.spotLength=y,W.rectAreaLength=v,W.hemiLength=m,W.numDirectionalShadows=w,W.numPointShadows=g,W.numSpotShadows=_,t.version=KL++)}return{setup:o,state:t}}function O0(){var e=new t3,t=[],n=[];function r(){t.length=0,n.length=0}function i(l){t.push(l)}function a(l){n.push(l)}function o(l){e.setup(t,n,l)}var s={lightsArray:t,shadowsArray:n,lights:e};return{init:r,state:s,setupLights:o,pushLight:i,pushShadow:a}}function n3(){var e=new WeakMap;function t(i){var a=i.target;a.removeEventListener("dispose",t),e.delete(a)}function n(i,a){var o;return e.has(i)===!1?(o=new O0,e.set(i,new WeakMap),e.get(i).set(a,o),i.addEventListener("dispose",t)):e.get(i).has(a)===!1?(o=new O0,e.get(i).set(a,o)):o=e.get(i).get(a),o}function r(){e=new WeakMap}return{get:n,dispose:r}}function Pa(e){Ne.call(this),this.type="MeshDepthMaterial",this.depthPacking=r2,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}Pa.prototype=Object.create(Ne.prototype);Pa.prototype.constructor=Pa;Pa.prototype.isMeshDepthMaterial=!0;Pa.prototype.copy=function(e){return Ne.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this};function Aa(e){Ne.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new A,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}Aa.prototype=Object.create(Ne.prototype);Aa.prototype.constructor=Aa;Aa.prototype.isMeshDistanceMaterial=!0;Aa.prototype.copy=function(e){return Ne.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var r3=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
  
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = decodeHalfRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = pow( squared_mean - mean * mean, 0.5 );
  gl_FragColor = encodeHalfRGBA( vec2( mean, std_dev ) );
}`,i3=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function U1(e,t,n){var r=new zh,i=new X,a=new X,o=new et,s=1,l=2,u=(s|l)+1,c=new Array(u),f=new Array(u),h={},d={0:Et,1:wu,2:Ih},p=new jt({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new X},radius:{value:4}},vertexShader:i3,fragmentShader:r3}),x=p.clone();x.defines.HORIZONAL_PASS=1;var y=new se;y.addAttribute("position",new Ie(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));for(var v=new ot(y,p),m=0;m!==u;++m){var w=(m&s)!==0,g=(m&l)!==0,_=new Pa({depthPacking:i2,morphTargets:w,skinning:g});c[m]=_;var b=new Aa({morphTargets:w,skinning:g});f[m]=b}var E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=y1,this.render=function(L,R,N){if(E.enabled!==!1&&!(E.autoUpdate===!1&&E.needsUpdate===!1)&&L.length!==0){var B=e.getRenderTarget(),G=e.getActiveCubeFace(),W=e.getActiveMipmapLevel(),Y=e.state;Y.setBlending(Qs),Y.buffers.color.setClear(1,1,1,1),Y.buffers.depth.setTest(!0),Y.setScissorTest(!1);for(var z=0,V=L.length;z<V;z++){var j=L[z],q=j.shadow;if(q===void 0){console.warn("THREE.WebGLShadowMap:",j,"has no shadow.");continue}i.copy(q.mapSize);var K=q.getFrameExtents();if(i.multiply(K),a.copy(q.mapSize),(i.x>n||i.y>n)&&(console.warn("THREE.WebGLShadowMap:",j,"has shadow exceeding max texture size, reducing"),i.x>n&&(a.x=Math.floor(n/K.x),i.x=a.x*K.x,q.mapSize.x=a.x),i.y>n&&(a.y=Math.floor(n/K.y),i.y=a.y*K.y,q.mapSize.y=a.y)),q.map===null&&!q.isPointLightShadow&&this.type===zs){var Pe={minFilter:Ft,magFilter:Ft,format:Kr};q.map=new fn(i.x,i.y,Pe),q.map.texture.name=j.name+".shadowMap",q.mapPass=new fn(i.x,i.y,Pe),q.camera.updateProjectionMatrix()}if(q.map===null){var Pe={minFilter:Ht,magFilter:Ht,format:Kr};q.map=new fn(i.x,i.y,Pe),q.map.texture.name=j.name+".shadowMap",q.camera.updateProjectionMatrix()}e.setRenderTarget(q.map),e.clear();for(var H=q.getViewportCount(),ue=0;ue<H;ue++){var te=q.getViewport(ue);o.set(a.x*te.x,a.y*te.y,a.x*te.z,a.y*te.w),Y.viewport(o),q.updateMatrices(j,N,ue),r=q.getFrustum(),D(R,N,q.camera,j,this.type)}!q.isPointLightShadow&&this.type===zs&&S(q,N)}E.needsUpdate=!1,e.setRenderTarget(B,G,W)}};function S(L,R){var N=t.update(v);p.uniforms.shadow_pass.value=L.map.texture,p.uniforms.resolution.value=L.mapSize,p.uniforms.radius.value=L.radius,e.setRenderTarget(L.mapPass),e.clear(),e.renderBufferDirect(R,null,N,p,v,null),x.uniforms.shadow_pass.value=L.mapPass.texture,x.uniforms.resolution.value=L.mapSize,x.uniforms.radius.value=L.radius,e.setRenderTarget(L.map),e.clear(),e.renderBufferDirect(R,null,N,x,v,null)}function O(L,R,N,B,G,W){var Y=L.geometry,z=null,V=c,j=L.customDepthMaterial;if(N.isPointLight&&(V=f,j=L.customDistanceMaterial),j)z=j;else{var q=!1;R.morphTargets&&(Y&&Y.isBufferGeometry?q=Y.morphAttributes&&Y.morphAttributes.position&&Y.morphAttributes.position.length>0:Y&&Y.isGeometry&&(q=Y.morphTargets&&Y.morphTargets.length>0)),L.isSkinnedMesh&&R.skinning===!1&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",L);var K=L.isSkinnedMesh&&R.skinning,Pe=0;q&&(Pe|=s),K&&(Pe|=l),z=V[Pe]}if(e.localClippingEnabled&&R.clipShadows===!0&&R.clippingPlanes.length!==0){var H=z.uuid,ue=R.uuid,te=h[H];te===void 0&&(te={},h[H]=te);var de=te[ue];de===void 0&&(de=z.clone(),te[ue]=de),z=de}return z.visible=R.visible,z.wireframe=R.wireframe,W===zs?z.side=R.shadowSide!=null?R.shadowSide:R.side:z.side=R.shadowSide!=null?R.shadowSide:d[R.side],z.clipShadows=R.clipShadows,z.clippingPlanes=R.clippingPlanes,z.clipIntersection=R.clipIntersection,z.wireframeLinewidth=R.wireframeLinewidth,z.linewidth=R.linewidth,N.isPointLight&&z.isMeshDistanceMaterial&&(z.referencePosition.setFromMatrixPosition(N.matrixWorld),z.nearDistance=B,z.farDistance=G),z}function D(L,R,N,B,G){if(L.visible!==!1){var W=L.layers.test(R.layers);if(W&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&G===zs)&&(!L.frustumCulled||r.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,L.matrixWorld);var Y=t.update(L),z=L.material;if(Array.isArray(z))for(var V=Y.groups,j=0,q=V.length;j<q;j++){var K=V[j],Pe=z[K.materialIndex];if(Pe&&Pe.visible){var H=O(L,Pe,B,N.near,N.far,G);e.renderBufferDirect(N,null,Y,H,L,K)}}else if(z.visible){var H=O(L,z,B,N.near,N.far,G);e.renderBufferDirect(N,null,Y,H,L,null)}}for(var ue=L.children,te=0,de=ue.length;te<de;te++)D(ue[te],R,N,B,G)}}}function a3(e,t,n,r){function i(){var k=!1,ne=new et,me=null,Ce=new et(0,0,0,0);return{setMask:function(ge){me!==ge&&!k&&(e.colorMask(ge,ge,ge,ge),me=ge)},setLocked:function(ge){k=ge},setClear:function(ge,$e,U,Q,ce){ce===!0&&(ge*=Q,$e*=Q,U*=Q),ne.set(ge,$e,U,Q),Ce.equals(ne)===!1&&(e.clearColor(ge,$e,U,Q),Ce.copy(ne))},reset:function(){k=!1,me=null,Ce.set(-1,0,0,0)}}}function a(){var k=!1,ne=null,me=null,Ce=null;return{setTest:function(ge){ge?Ye(2929):C(2929)},setMask:function(ge){ne!==ge&&!k&&(e.depthMask(ge),ne=ge)},setFunc:function(ge){if(me!==ge){if(ge)switch(ge){case lT:e.depthFunc(512);break;case uT:e.depthFunc(519);break;case cT:e.depthFunc(513);break;case nv:e.depthFunc(515);break;case fT:e.depthFunc(514);break;case hT:e.depthFunc(518);break;case dT:e.depthFunc(516);break;case pT:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);me=ge}},setLocked:function(ge){k=ge},setClear:function(ge){Ce!==ge&&(e.clearDepth(ge),Ce=ge)},reset:function(){k=!1,ne=null,me=null,Ce=null}}}function o(){var k=!1,ne=null,me=null,Ce=null,ge=null,$e=null,U=null,Q=null,ce=null;return{setTest:function(_e){k||(_e?Ye(2960):C(2960))},setMask:function(_e){ne!==_e&&!k&&(e.stencilMask(_e),ne=_e)},setFunc:function(_e,Ae,Ke){(me!==_e||Ce!==Ae||ge!==Ke)&&(e.stencilFunc(_e,Ae,Ke),me=_e,Ce=Ae,ge=Ke)},setOp:function(_e,Ae,Ke){($e!==_e||U!==Ae||Q!==Ke)&&(e.stencilOp(_e,Ae,Ke),$e=_e,U=Ae,Q=Ke)},setLocked:function(_e){k=_e},setClear:function(_e){ce!==_e&&(e.clearStencil(_e),ce=_e)},reset:function(){k=!1,ne=null,me=null,Ce=null,ge=null,$e=null,U=null,Q=null,ce=null}}}var s=new i,l=new a,u=new o,c=e.getParameter(34921),f=new Uint8Array(c),h=new Uint8Array(c),d=new Uint8Array(c),p={},x=null,y=null,v=null,m=null,w=null,g=null,_=null,b=null,E=null,S=null,O=!1,D=null,L=null,R=null,N=null,B=null,G=e.getParameter(35661),W=!1,Y=0,z=e.getParameter(7938);z.indexOf("WebGL")!==-1?(Y=parseFloat(/^WebGL\ ([0-9])/.exec(z)[1]),W=Y>=1):z.indexOf("OpenGL ES")!==-1&&(Y=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(z)[1]),W=Y>=2);var V=null,j={},q=new et,K=new et;function Pe(k,ne,me){var Ce=new Uint8Array(4),ge=e.createTexture();e.bindTexture(k,ge),e.texParameteri(k,10241,9728),e.texParameteri(k,10240,9728);for(var $e=0;$e<me;$e++)e.texImage2D(ne+$e,0,6408,1,1,0,6408,5121,Ce);return ge}var H={};H[3553]=Pe(3553,3553,1),H[34067]=Pe(34067,34069,6),s.setClear(0,0,0,1),l.setClear(1),u.setClear(0),Ye(2929),l.setFunc(nv),pe(!1),ae(Yy),Ye(2884),ee(Qs);function ue(){for(var k=0,ne=f.length;k<ne;k++)f[k]=0}function te(k){de(k,0)}function de(k,ne){if(f[k]=1,h[k]===0&&(e.enableVertexAttribArray(k),h[k]=1),d[k]!==ne){var me=r.isWebGL2?e:t.get("ANGLE_instanced_arrays");me[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](k,ne),d[k]=ne}}function xe(){for(var k=0,ne=h.length;k!==ne;++k)h[k]!==f[k]&&(e.disableVertexAttribArray(k),h[k]=0)}function Ye(k){p[k]!==!0&&(e.enable(k),p[k]=!0)}function C(k){p[k]!==!1&&(e.disable(k),p[k]=!1)}function T(){if(x===null&&(x=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var k=e.getParameter(34467),ne=0;ne<k.length;ne++)x.push(k[ne]);return x}function $(k){return y!==k?(e.useProgram(k),y=k,!0):!1}function ee(k,ne,me,Ce,ge,$e,U,Q){if(k===Qs){v&&(C(3042),v=!1);return}if(v||(Ye(3042),v=!0),k!==ZS){if(k!==m||Q!==O){if((w!==po||b!==po)&&(e.blendEquation(32774),w=po,b=po),Q)switch(k){case Ks:e.blendFuncSeparate(1,771,1,771);break;case $y:e.blendFunc(1,1);break;case Zy:e.blendFuncSeparate(0,0,769,771);break;case Jy:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",k);break}else switch(k){case Ks:e.blendFuncSeparate(770,771,1,771);break;case $y:e.blendFunc(770,1);break;case Zy:e.blendFunc(0,769);break;case Jy:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",k);break}g=null,_=null,E=null,S=null,m=k,O=Q}return}ge=ge||ne,$e=$e||me,U=U||Ce,(ne!==w||ge!==b)&&(e.blendEquationSeparate(n.convert(ne),n.convert(ge)),w=ne,b=ge),(me!==g||Ce!==_||$e!==E||U!==S)&&(e.blendFuncSeparate(n.convert(me),n.convert(Ce),n.convert($e),n.convert(U)),g=me,_=Ce,E=$e,S=U),m=k,O=null}function be(k,ne){k.side===Ih?C(2884):Ye(2884);var me=k.side===Et;ne&&(me=!me),pe(me),k.blending===Ks&&k.transparent===!1?ee(Qs):ee(k.blending,k.blendEquation,k.blendSrc,k.blendDst,k.blendEquationAlpha,k.blendSrcAlpha,k.blendDstAlpha,k.premultipliedAlpha),l.setFunc(k.depthFunc),l.setTest(k.depthTest),l.setMask(k.depthWrite),s.setMask(k.colorWrite);var Ce=k.stencilWrite;u.setTest(Ce),Ce&&(u.setMask(k.stencilWriteMask),u.setFunc(k.stencilFunc,k.stencilRef,k.stencilFuncMask),u.setOp(k.stencilFail,k.stencilZFail,k.stencilZPass)),Le(k.polygonOffset,k.polygonOffsetFactor,k.polygonOffsetUnits)}function pe(k){D!==k&&(k?e.frontFace(2304):e.frontFace(2305),D=k)}function ae(k){k!==XS?(Ye(2884),k!==L&&(k===Yy?e.cullFace(1029):k===qS?e.cullFace(1028):e.cullFace(1032))):C(2884),L=k}function we(k){k!==R&&(W&&e.lineWidth(k),R=k)}function Le(k,ne,me){k?(Ye(32823),(N!==ne||B!==me)&&(e.polygonOffset(ne,me),N=ne,B=me)):C(32823)}function Ue(k){k?Ye(3089):C(3089)}function ke(k){k===void 0&&(k=33984+G-1),V!==k&&(e.activeTexture(k),V=k)}function Ve(k,ne){V===null&&ke();var me=j[V];me===void 0&&(me={type:void 0,texture:void 0},j[V]=me),(me.type!==k||me.texture!==ne)&&(e.bindTexture(k,ne||H[k]),me.type=k,me.texture=ne)}function ve(){try{e.compressedTexImage2D.apply(e,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function I(){try{e.texImage2D.apply(e,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function le(){try{e.texImage3D.apply(e,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function Me(k){q.equals(k)===!1&&(e.scissor(k.x,k.y,k.z,k.w),q.copy(k))}function ze(k){K.equals(k)===!1&&(e.viewport(k.x,k.y,k.z,k.w),K.copy(k))}function Te(){for(var k=0;k<h.length;k++)h[k]===1&&(e.disableVertexAttribArray(k),h[k]=0);p={},x=null,V=null,j={},y=null,m=null,D=null,L=null,s.reset(),l.reset(),u.reset()}return{buffers:{color:s,depth:l,stencil:u},initAttributes:ue,enableAttribute:te,enableAttributeAndDivisor:de,disableUnusedAttributes:xe,enable:Ye,disable:C,getCompressedTextureFormats:T,useProgram:$,setBlending:ee,setMaterial:be,setFlipSided:pe,setCullFace:ae,setLineWidth:we,setPolygonOffset:Le,setScissorTest:Ue,activeTexture:ke,bindTexture:Ve,compressedTexImage2D:ve,texImage2D:I,texImage3D:le,scissor:Me,viewport:ze,reset:Te}}function o3(e,t,n,r,i,a,o){var s=new WeakMap,l,u=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null;function c(C,T){return u?new OffscreenCanvas(C,T):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function f(C,T,$,ee){var be=1;if((C.width>ee||C.height>ee)&&(be=ee/Math.max(C.width,C.height)),be<1||T===!0)if(typeof HTMLImageElement<"u"&&C instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&C instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&C instanceof ImageBitmap){var pe=T?Be.floorPowerOfTwo:Math.floor,ae=pe(be*C.width),we=pe(be*C.height);l===void 0&&(l=c(ae,we));var Le=$?c(ae,we):l;Le.width=ae,Le.height=we;var Ue=Le.getContext("2d");return Ue.drawImage(C,0,0,ae,we),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+C.width+"x"+C.height+") to ("+ae+"x"+we+")."),Le}else return"data"in C&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+C.width+"x"+C.height+")."),C;return C}function h(C){return Be.isPowerOfTwo(C.width)&&Be.isPowerOfTwo(C.height)}function d(C){return i.isWebGL2?!1:C.wrapS!==sn||C.wrapT!==sn||C.minFilter!==Ht&&C.minFilter!==Ft}function p(C,T){return C.generateMipmaps&&T&&C.minFilter!==Ht&&C.minFilter!==Ft}function x(C,T,$,ee){e.generateMipmap(C);var be=r.get(T);be.__maxMipLevel=Math.log(Math.max($,ee))*Math.LOG2E}function y(C,T){if(!i.isWebGL2)return C;var $=C;return C===6403&&(T===5126&&($=33326),T===5131&&($=33325),T===5121&&($=33321)),C===6407&&(T===5126&&($=34837),T===5131&&($=34843),T===5121&&($=32849)),C===6408&&(T===5126&&($=34836),T===5131&&($=34842),T===5121&&($=32856)),$===33325||$===33326||$===34842||$===34836?t.get("EXT_color_buffer_float"):($===34843||$===34837)&&console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),$}function v(C){return C===Ht||C===sg||C===lg?9728:9729}function m(C){var T=C.target;T.removeEventListener("dispose",m),g(T),T.isVideoTexture&&s.delete(T),o.memory.textures--}function w(C){var T=C.target;T.removeEventListener("dispose",w),_(T),o.memory.textures--}function g(C){var T=r.get(C);T.__webglInit!==void 0&&(e.deleteTexture(T.__webglTexture),r.remove(C))}function _(C){var T=r.get(C),$=r.get(C.texture);if(!!C){if($.__webglTexture!==void 0&&e.deleteTexture($.__webglTexture),C.depthTexture&&C.depthTexture.dispose(),C.isWebGLRenderTargetCube)for(var ee=0;ee<6;ee++)e.deleteFramebuffer(T.__webglFramebuffer[ee]),T.__webglDepthbuffer&&e.deleteRenderbuffer(T.__webglDepthbuffer[ee]);else e.deleteFramebuffer(T.__webglFramebuffer),T.__webglDepthbuffer&&e.deleteRenderbuffer(T.__webglDepthbuffer);if(C.isWebGLMultiviewRenderTarget){e.deleteTexture(T.__webglColorTexture),e.deleteTexture(T.__webglDepthStencilTexture),o.memory.textures-=2;for(var ee=0,be=T.__webglViewFramebuffers.length;ee<be;ee++)e.deleteFramebuffer(T.__webglViewFramebuffers[ee])}r.remove(C.texture),r.remove(C)}}var b=0;function E(){b=0}function S(){var C=b;return C>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+C+" texture units while this GPU supports only "+i.maxTextures),b+=1,C}function O(C,T){var $=r.get(C);if(C.isVideoTexture&&ue(C),C.version>0&&$.__version!==C.version){var ee=C.image;if(ee===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(ee.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{W($,C,T);return}}n.activeTexture(33984+T),n.bindTexture(3553,$.__webglTexture)}function D(C,T){var $=r.get(C);if(C.version>0&&$.__version!==C.version){W($,C,T);return}n.activeTexture(33984+T),n.bindTexture(35866,$.__webglTexture)}function L(C,T){var $=r.get(C);if(C.version>0&&$.__version!==C.version){W($,C,T);return}n.activeTexture(33984+T),n.bindTexture(32879,$.__webglTexture)}function R(C,T){if(C.image.length===6){var $=r.get(C);if(C.version>0&&$.__version!==C.version){G($,C),n.activeTexture(33984+T),n.bindTexture(34067,$.__webglTexture),e.pixelStorei(37440,C.flipY);for(var ee=C&&C.isCompressedTexture,be=C.image[0]&&C.image[0].isDataTexture,pe=[],ae=0;ae<6;ae++)!ee&&!be?pe[ae]=f(C.image[ae],!1,!0,i.maxCubemapSize):pe[ae]=be?C.image[ae].image:C.image[ae];var we=pe[0],Le=h(we)||i.isWebGL2,Ue=a.convert(C.format),ke=a.convert(C.type),Ve=y(Ue,ke);B(34067,C,Le);var ve;if(ee){for(var ae=0;ae<6;ae++){ve=pe[ae].mipmaps;for(var I=0;I<ve.length;I++){var le=ve[I];C.format!==Kr&&C.format!==Ea?n.getCompressedTextureFormats().indexOf(Ue)>-1?n.compressedTexImage2D(34069+ae,I,Ve,le.width,le.height,0,le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+ae,I,Ve,le.width,le.height,0,Ue,ke,le.data)}}$.__maxMipLevel=ve.length-1}else{ve=C.mipmaps;for(var ae=0;ae<6;ae++)if(be){n.texImage2D(34069+ae,0,Ve,pe[ae].width,pe[ae].height,0,Ue,ke,pe[ae].data);for(var I=0;I<ve.length;I++){var le=ve[I],Me=le.image[ae].image;n.texImage2D(34069+ae,I+1,Ve,Me.width,Me.height,0,Ue,ke,Me.data)}}else{n.texImage2D(34069+ae,0,Ve,Ue,ke,pe[ae]);for(var I=0;I<ve.length;I++){var le=ve[I];n.texImage2D(34069+ae,I+1,Ve,Ue,ke,le.image[ae])}}$.__maxMipLevel=ve.length}p(C,Le)&&x(34067,C,we.width,we.height),$.__version=C.version,C.onUpdate&&C.onUpdate(C)}else n.activeTexture(33984+T),n.bindTexture(34067,$.__webglTexture)}}function N(C,T){n.activeTexture(33984+T),n.bindTexture(34067,r.get(C).__webglTexture)}function B(C,T,$){var ee;if($?(e.texParameteri(C,10242,a.convert(T.wrapS)),e.texParameteri(C,10243,a.convert(T.wrapT)),(C===32879||C===35866)&&e.texParameteri(C,32882,a.convert(T.wrapR)),e.texParameteri(C,10240,a.convert(T.magFilter)),e.texParameteri(C,10241,a.convert(T.minFilter))):(e.texParameteri(C,10242,33071),e.texParameteri(C,10243,33071),(C===32879||C===35866)&&e.texParameteri(C,32882,33071),(T.wrapS!==sn||T.wrapT!==sn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(C,10240,v(T.magFilter)),e.texParameteri(C,10241,v(T.minFilter)),T.minFilter!==Ht&&T.minFilter!==Ft&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),ee=t.get("EXT_texture_filter_anisotropic"),ee){if(T.type===bl&&t.get("OES_texture_float_linear")===null||T.type===cg&&(i.isWebGL2||t.get("OES_texture_half_float_linear"))===null)return;(T.anisotropy>1||r.get(T).__currentAnisotropy)&&(e.texParameterf(C,ee.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(T.anisotropy,i.getMaxAnisotropy())),r.get(T).__currentAnisotropy=T.anisotropy)}}function G(C,T){C.__webglInit===void 0&&(C.__webglInit=!0,T.addEventListener("dispose",m),C.__webglTexture=e.createTexture(),o.memory.textures++)}function W(C,T,$){var ee=3553;T.isDataTexture2DArray&&(ee=35866),T.isDataTexture3D&&(ee=32879),G(C,T),n.activeTexture(33984+$),n.bindTexture(ee,C.__webglTexture),e.pixelStorei(37440,T.flipY),e.pixelStorei(37441,T.premultiplyAlpha),e.pixelStorei(3317,T.unpackAlignment);var be=d(T)&&h(T.image)===!1,pe=f(T.image,be,!1,i.maxTextureSize),ae=h(pe)||i.isWebGL2,we=a.convert(T.format),Le=a.convert(T.type),Ue=y(we,Le);B(ee,T,ae);var ke,Ve=T.mipmaps;if(T.isDepthTexture){if(Ue=6402,T.type===bl){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");Ue=36012}else i.isWebGL2&&(Ue=33189);T.format===Po&&Ue===6402&&T.type!==Sf&&T.type!==P1&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),T.type=Sf,Le=a.convert(T.type)),T.format===El&&(Ue=34041,T.type!==Tf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),T.type=Tf,Le=a.convert(T.type))),n.texImage2D(3553,0,Ue,pe.width,pe.height,0,we,Le,null)}else if(T.isDataTexture)if(Ve.length>0&&ae){for(var ve=0,I=Ve.length;ve<I;ve++)ke=Ve[ve],n.texImage2D(3553,ve,Ue,ke.width,ke.height,0,we,Le,ke.data);T.generateMipmaps=!1,C.__maxMipLevel=Ve.length-1}else n.texImage2D(3553,0,Ue,pe.width,pe.height,0,we,Le,pe.data),C.__maxMipLevel=0;else if(T.isCompressedTexture){for(var ve=0,I=Ve.length;ve<I;ve++)ke=Ve[ve],T.format!==Kr&&T.format!==Ea?n.getCompressedTextureFormats().indexOf(we)>-1?n.compressedTexImage2D(3553,ve,Ue,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,ve,Ue,ke.width,ke.height,0,we,Le,ke.data);C.__maxMipLevel=Ve.length-1}else if(T.isDataTexture2DArray)n.texImage3D(35866,0,Ue,pe.width,pe.height,pe.depth,0,we,Le,pe.data),C.__maxMipLevel=0;else if(T.isDataTexture3D)n.texImage3D(32879,0,Ue,pe.width,pe.height,pe.depth,0,we,Le,pe.data),C.__maxMipLevel=0;else if(Ve.length>0&&ae){for(var ve=0,I=Ve.length;ve<I;ve++)ke=Ve[ve],n.texImage2D(3553,ve,Ue,we,Le,ke);T.generateMipmaps=!1,C.__maxMipLevel=Ve.length-1}else n.texImage2D(3553,0,Ue,we,Le,pe),C.__maxMipLevel=0;p(T,ae)&&x(3553,T,pe.width,pe.height),C.__version=T.version,T.onUpdate&&T.onUpdate(T)}function Y(C,T,$,ee){var be=a.convert(T.texture.format),pe=a.convert(T.texture.type),ae=y(be,pe);n.texImage2D(ee,0,ae,T.width,T.height,0,be,pe,null),e.bindFramebuffer(36160,C),e.framebufferTexture2D(36160,$,ee,r.get(T.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function z(C,T,$){if(e.bindRenderbuffer(36161,C),T.depthBuffer&&!T.stencilBuffer){if($){var ee=H(T);e.renderbufferStorageMultisample(36161,ee,33189,T.width,T.height)}else e.renderbufferStorage(36161,33189,T.width,T.height);e.framebufferRenderbuffer(36160,36096,36161,C)}else if(T.depthBuffer&&T.stencilBuffer){if($){var ee=H(T);e.renderbufferStorageMultisample(36161,ee,35056,T.width,T.height)}else e.renderbufferStorage(36161,34041,T.width,T.height);e.framebufferRenderbuffer(36160,33306,36161,C)}else{var be=a.convert(T.texture.format),pe=a.convert(T.texture.type),ae=y(be,pe);if($){var ee=H(T);e.renderbufferStorageMultisample(36161,ee,ae,T.width,T.height)}else e.renderbufferStorage(36161,ae,T.width,T.height)}e.bindRenderbuffer(36161,null)}function V(C,T){var $=T&&T.isWebGLRenderTargetCube;if($)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,C),!(T.depthTexture&&T.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(T.depthTexture).__webglTexture||T.depthTexture.image.width!==T.width||T.depthTexture.image.height!==T.height)&&(T.depthTexture.image.width=T.width,T.depthTexture.image.height=T.height,T.depthTexture.needsUpdate=!0),O(T.depthTexture,0);var ee=r.get(T.depthTexture).__webglTexture;if(T.depthTexture.format===Po)e.framebufferTexture2D(36160,36096,3553,ee,0);else if(T.depthTexture.format===El)e.framebufferTexture2D(36160,33306,3553,ee,0);else throw new Error("Unknown depthTexture format")}function j(C){var T=r.get(C),$=C.isWebGLRenderTargetCube===!0;if(C.depthTexture){if($)throw new Error("target.depthTexture not supported in Cube render targets");V(T.__webglFramebuffer,C)}else if($){T.__webglDepthbuffer=[];for(var ee=0;ee<6;ee++)e.bindFramebuffer(36160,T.__webglFramebuffer[ee]),T.__webglDepthbuffer[ee]=e.createRenderbuffer(),z(T.__webglDepthbuffer[ee],C)}else e.bindFramebuffer(36160,T.__webglFramebuffer),T.__webglDepthbuffer=e.createRenderbuffer(),z(T.__webglDepthbuffer,C);e.bindFramebuffer(36160,null)}function q(C){var T=r.get(C),$=r.get(C.texture);C.addEventListener("dispose",w),$.__webglTexture=e.createTexture(),o.memory.textures++;var ee=C.isWebGLRenderTargetCube===!0,be=C.isWebGLMultisampleRenderTarget===!0,pe=C.isWebGLMultiviewRenderTarget===!0,ae=h(C)||i.isWebGL2;if(ee){T.__webglFramebuffer=[];for(var we=0;we<6;we++)T.__webglFramebuffer[we]=e.createFramebuffer()}else if(T.__webglFramebuffer=e.createFramebuffer(),be)if(i.isWebGL2){T.__webglMultisampledFramebuffer=e.createFramebuffer(),T.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,T.__webglColorRenderbuffer);var Le=a.convert(C.texture.format),Ue=a.convert(C.texture.type),ke=y(Le,Ue),Ve=H(C);e.renderbufferStorageMultisample(36161,Ve,ke,C.width,C.height),e.bindFramebuffer(36160,T.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,T.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),C.depthBuffer&&(T.__webglDepthRenderbuffer=e.createRenderbuffer(),z(T.__webglDepthRenderbuffer,C,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");else if(pe){var ve=C.width,I=C.height,le=C.numViews;e.bindFramebuffer(36160,T.__webglFramebuffer);var Me=t.get("OVR_multiview2");o.memory.textures+=2;var ze=e.createTexture();e.bindTexture(35866,ze),e.texParameteri(35866,10240,9728),e.texParameteri(35866,10241,9728),e.texImage3D(35866,0,32856,ve,I,le,0,6408,5121,null),Me.framebufferTextureMultiviewOVR(36160,36064,ze,0,0,le);var Te=e.createTexture();e.bindTexture(35866,Te),e.texParameteri(35866,10240,9728),e.texParameteri(35866,10241,9728),e.texImage3D(35866,0,35056,ve,I,le,0,34041,34042,null),Me.framebufferTextureMultiviewOVR(36160,33306,Te,0,0,le);for(var k=new Array(le),we=0;we<le;++we)k[we]=e.createFramebuffer(),e.bindFramebuffer(36160,k[we]),e.framebufferTextureLayer(36160,36064,ze,0,we);T.__webglColorTexture=ze,T.__webglDepthStencilTexture=Te,T.__webglViewFramebuffers=k,e.bindFramebuffer(36160,null),e.bindTexture(35866,null)}if(ee){n.bindTexture(34067,$.__webglTexture),B(34067,C.texture,ae);for(var we=0;we<6;we++)Y(T.__webglFramebuffer[we],C,36064,34069+we);p(C.texture,ae)&&x(34067,C.texture,C.width,C.height),n.bindTexture(34067,null)}else pe||(n.bindTexture(3553,$.__webglTexture),B(3553,C.texture,ae),Y(T.__webglFramebuffer,C,36064,3553),p(C.texture,ae)&&x(3553,C.texture,C.width,C.height),n.bindTexture(3553,null));C.depthBuffer&&j(C)}function K(C){var T=C.texture,$=h(C)||i.isWebGL2;if(p(T,$)){var ee=C.isWebGLRenderTargetCube?34067:3553,be=r.get(T).__webglTexture;n.bindTexture(ee,be),x(ee,T,C.width,C.height),n.bindTexture(ee,null)}}function Pe(C){if(C.isWebGLMultisampleRenderTarget)if(i.isWebGL2){var T=r.get(C);e.bindFramebuffer(36008,T.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,T.__webglFramebuffer);var $=C.width,ee=C.height,be=16384;C.depthBuffer&&(be|=256),C.stencilBuffer&&(be|=1024),e.blitFramebuffer(0,0,$,ee,0,0,$,ee,be,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function H(C){return i.isWebGL2&&C.isWebGLMultisampleRenderTarget?Math.min(i.maxSamples,C.samples):0}function ue(C){var T=o.render.frame;s.get(C)!==T&&(s.set(C,T),C.update())}var te=!1,de=!1;function xe(C,T){C&&C.isWebGLRenderTarget&&(te===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),te=!0),C=C.texture),O(C,T)}function Ye(C,T){C&&C.isWebGLRenderTargetCube&&(de===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),de=!0),C=C.texture),C&&C.isCubeTexture||Array.isArray(C.image)&&C.image.length===6?R(C,T):N(C,T)}this.allocateTextureUnit=S,this.resetTextureUnits=E,this.setTexture2D=O,this.setTexture2DArray=D,this.setTexture3D=L,this.setTextureCube=R,this.setTextureCubeDynamic=N,this.setupRenderTarget=q,this.updateRenderTargetMipmap=K,this.updateMultisampleRenderTarget=Pe,this.safeSetTexture2D=xe,this.safeSetTextureCube=Ye}function s3(e,t,n){function r(i){var a;if(i===bf)return 10497;if(i===sn)return 33071;if(i===Ef)return 33648;if(i===Ht)return 9728;if(i===sg)return 9984;if(i===lg)return 9986;if(i===Ft)return 9729;if(i===T1)return 9985;if(i===kh)return 9987;if(i===ug)return 5121;if(i===ET)return 32819;if(i===ST)return 32820;if(i===TT)return 33635;if(i===_T)return 5120;if(i===MT)return 5122;if(i===Sf)return 5123;if(i===bT)return 5124;if(i===P1)return 5125;if(i===bl)return 5126;if(i===cg){if(n.isWebGL2)return 5131;if(a=t.get("OES_texture_half_float"),a!==null)return a.HALF_FLOAT_OES}if(i===PT)return 6406;if(i===Ea)return 6407;if(i===Kr)return 6408;if(i===AT)return 6409;if(i===LT)return 6410;if(i===Po)return 6402;if(i===El)return 34041;if(i===CT)return 6403;if(i===po)return 32774;if(i===JS)return 32778;if(i===QS)return 32779;if(i===KS)return 0;if(i===eT)return 1;if(i===tT)return 768;if(i===nT)return 769;if(i===_1)return 770;if(i===M1)return 771;if(i===rT)return 772;if(i===iT)return 773;if(i===aT)return 774;if(i===oT)return 775;if(i===sT)return 776;if((i===Qy||i===Ky||i===e0||i===t0)&&(a=t.get("WEBGL_compressed_texture_s3tc"),a!==null)){if(i===Qy)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Ky)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===e0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===t0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((i===n0||i===r0||i===i0||i===a0)&&(a=t.get("WEBGL_compressed_texture_pvrtc"),a!==null)){if(i===n0)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===r0)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===i0)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===a0)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===RT&&(a=t.get("WEBGL_compressed_texture_etc1"),a!==null))return a.COMPRESSED_RGB_ETC1_WEBGL;if((i===OT||i===DT||i===IT||i===NT||i===kT||i===FT||i===zT||i===BT||i===UT||i===GT||i===VT||i===HT||i===WT||i===jT)&&(a=t.get("WEBGL_compressed_texture_astc"),a!==null))return i;if(i===wd||i===_d){if(n.isWebGL2){if(i===wd)return 32775;if(i===_d)return 32776}if(a=t.get("EXT_blend_minmax"),a!==null){if(i===wd)return a.MIN_EXT;if(i===_d)return a.MAX_EXT}}if(i===Tf){if(n.isWebGL2)return 34042;if(a=t.get("WEBGL_depth_texture"),a!==null)return a.UNSIGNED_INT_24_8_WEBGL}return 0}return{convert:r}}function cv(e,t,n,r){fn.call(this,e,t,r),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=n}cv.prototype=Object.assign(Object.create(fn.prototype),{constructor:cv,isWebGLMultiviewRenderTarget:!0,copy:function(e){return fn.prototype.copy.call(this,e),this.numViews=e.numViews,this},setNumViews:function(e){return this.numViews!==e&&(this.numViews=e,this.dispose()),this}});function l3(e,t){var n=2,r=e.extensions,i=e.properties,a,o,s,l,u,c,f,h=0;function d(){if(f===void 0){var E=r.get("OVR_multiview2");if(f=E!==null&&t.getContextAttributes().antialias===!1,f){h=t.getParameter(E.MAX_VIEWS_OVR),a=new cv(0,0,n),c=new X,l=[],s=[],u=[];for(var S=0;S<h;S++)l[S]=new Ge,s[S]=new Ct}}return f}function p(E){return E.isArrayCamera?E.cameras:(u[0]=E,u)}function x(E,S){for(var O=p(E),D=0;D<O.length;D++)l[D].copy(O[D].projectionMatrix);S.setValue(t,"projectionMatrices",l)}function y(E,S){for(var O=p(E),D=0;D<O.length;D++)l[D].copy(O[D].matrixWorldInverse);S.setValue(t,"viewMatrices",l)}function v(E,S,O){for(var D=p(S),L=0;L<D.length;L++)l[L].multiplyMatrices(D[L].matrixWorldInverse,E.matrixWorld),s[L].getNormalMatrix(l[L]);O.setValue(t,"modelViewMatrices",l),O.setValue(t,"normalMatrices",s)}function m(E){if(E.isArrayCamera===void 0)return!0;var S=E.cameras;if(S.length>h)return!1;for(var O=1,D=S.length;O<D;O++)if(S[0].viewport.z!==S[O].viewport.z||S[0].viewport.w!==S[O].viewport.w)return!1;return!0}function w(E){if(o?c.set(o.width,o.height):e.getDrawingBufferSize(c),E.isArrayCamera){var S=E.cameras[0].viewport;a.setSize(S.z,S.w),a.setNumViews(E.cameras.length)}else a.setSize(c.x,c.y),a.setNumViews(n)}function g(E){m(E)!==!1&&(o=e.getRenderTarget(),w(E),e.setRenderTarget(a))}function _(E){a===e.getRenderTarget()&&(e.setRenderTarget(o),b(E))}function b(E){var S=a,O=S.numViews,D=i.get(S).__webglViewFramebuffers,L=S.width,R=S.height;if(E.isArrayCamera)for(var N=0;N<O;N++){var B=E.cameras[N].viewport,G=B.x,W=B.y,Y=G+B.z,z=W+B.w;t.bindFramebuffer(36008,D[N]),t.blitFramebuffer(0,0,L,R,G,W,Y,z,16384,9728)}else t.bindFramebuffer(36008,D[0]),t.blitFramebuffer(0,0,L,R,0,0,c.x,c.y,16384,9728)}this.isAvailable=d,this.attachCamera=g,this.detachCamera=_,this.updateCameraProjectionMatricesUniform=x,this.updateCameraViewMatricesUniform=y,this.updateObjectMatricesUniforms=v}function Go(){re.call(this),this.type="Group"}Go.prototype=Object.assign(Object.create(re.prototype),{constructor:Go,isGroup:!0});function Rf(e){wt.call(this),this.cameras=e||[]}Rf.prototype=Object.assign(Object.create(wt.prototype),{constructor:Rf,isArrayCamera:!0});var D0=new A,I0=new A;function G1(e,t,n){D0.setFromMatrixPosition(t.matrixWorld),I0.setFromMatrixPosition(n.matrixWorld);var r=D0.distanceTo(I0),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],f=(a[8]+1)/a[0],h=o*c,d=o*f,p=r/(-c+f),x=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(x),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var y=o+p,v=s+p,m=h-x,w=d+(r-x),g=l*s/v*y,_=u*s/v*y;e.projectionMatrix.makePerspective(m,w,g,_,y,v)}function dg(e){var t,n,r=this,i=null,a=null,o=null,s=[],l=new Ge,u=new Ge,c=1,f="local-floor";typeof window<"u"&&"VRFrameData"in window&&(a=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",_,!1));var h=new Ge,d=new Bt,p=new A,x=new wt;x.viewport=new et,x.layers.enable(1);var y=new wt;y.viewport=new et,y.layers.enable(2);var v=new Rf([x,y]);v.layers.enable(1),v.layers.enable(2);function m(){return i!==null&&i.isPresenting===!0}var w=new X,g;function _(){if(m()){var L=i.getEyeParameters("left");t=2*L.renderWidth*c,n=L.renderHeight*c,g=e.getPixelRatio(),e.getSize(w),e.setDrawingBufferSize(t,n,1),x.viewport.set(0,0,t/2,n),y.viewport.set(t/2,0,t/2,n),D.start(),r.dispatchEvent({type:"sessionstart"})}else r.enabled&&e.setDrawingBufferSize(w.width,w.height,g),D.stop(),r.dispatchEvent({type:"sessionend"})}var b=[];function E(L){for(var R=navigator.getGamepads&&navigator.getGamepads(),N=0,B=0,G=R.length;N<G;N++){var W=R[N];if(W&&(W.id==="Daydream Controller"||W.id==="Gear VR Controller"||W.id==="Oculus Go Controller"||W.id==="OpenVR Gamepad"||W.id.startsWith("Oculus Touch")||W.id.startsWith("HTC Vive Focus")||W.id.startsWith("Spatial Controller"))){if(B===L)return W;B++}}}function S(){for(var L=0;L<s.length;L++){var R=s[L],N=E(L);if(N!==void 0&&N.pose!==void 0){if(N.pose===null)return;var B=N.pose;B.hasPosition===!1&&R.position.set(.2,-.6,-.05),B.position!==null&&R.position.fromArray(B.position),B.orientation!==null&&R.quaternion.fromArray(B.orientation),R.matrix.compose(R.position,R.quaternion,R.scale),R.matrix.premultiply(l),R.matrix.decompose(R.position,R.quaternion,R.scale),R.matrixWorldNeedsUpdate=!0,R.visible=!0;var G=N.id==="Daydream Controller"?0:1;b[L]===void 0&&(b[L]=!1),b[L]!==N.buttons[G].pressed&&(b[L]=N.buttons[G].pressed,b[L]===!0?R.dispatchEvent({type:"selectstart"}):(R.dispatchEvent({type:"selectend"}),R.dispatchEvent({type:"select"})))}else R.visible=!1}}function O(L,R){R!==null&&R.length===4&&L.set(R[0]*t,R[1]*n,R[2]*t,R[3]*n)}this.enabled=!1,this.getController=function(L){var R=s[L];return R===void 0&&(R=new Go,R.matrixAutoUpdate=!1,R.visible=!1,s[L]=R),R},this.getDevice=function(){return i},this.setDevice=function(L){L!==void 0&&(i=L),D.setContext(L)},this.setFramebufferScaleFactor=function(L){c=L},this.setReferenceSpaceType=function(L){f=L},this.setPoseTarget=function(L){L!==void 0&&(o=L)},this.getCamera=function(L){var R=f==="local-floor"?1.6:0;if(m()===!1)return L.position.set(0,R,0),L.rotation.set(0,0,0),L;if(i.depthNear=L.near,i.depthFar=L.far,i.getFrameData(a),f==="local-floor"){var N=i.stageParameters;N?l.fromArray(N.sittingToStandingTransform):l.makeTranslation(0,R,0)}var B=a.pose,G=o!==null?o:L;G.matrix.copy(l),G.matrix.decompose(G.position,G.quaternion,G.scale),B.orientation!==null&&(d.fromArray(B.orientation),G.quaternion.multiply(d)),B.position!==null&&(d.setFromRotationMatrix(l),p.fromArray(B.position),p.applyQuaternion(d),G.position.add(p)),G.updateMatrixWorld(),x.near=L.near,y.near=L.near,x.far=L.far,y.far=L.far,x.matrixWorldInverse.fromArray(a.leftViewMatrix),y.matrixWorldInverse.fromArray(a.rightViewMatrix),u.getInverse(l),f==="local-floor"&&(x.matrixWorldInverse.multiply(u),y.matrixWorldInverse.multiply(u));var W=G.parent;W!==null&&(h.getInverse(W.matrixWorld),x.matrixWorldInverse.multiply(h),y.matrixWorldInverse.multiply(h)),x.matrixWorld.getInverse(x.matrixWorldInverse),y.matrixWorld.getInverse(y.matrixWorldInverse),x.projectionMatrix.fromArray(a.leftProjectionMatrix),y.projectionMatrix.fromArray(a.rightProjectionMatrix),G1(v,x,y);var Y=i.getLayers();if(Y.length){var z=Y[0];O(x.viewport,z.leftBounds),O(y.viewport,z.rightBounds)}return S(),v},this.getStandingMatrix=function(){return l},this.isPresenting=m;var D=new hg;this.setAnimationLoop=function(L){D.setAnimationLoop(L),m()&&D.start()},this.submitFrame=function(){m()&&i.submitFrame()},this.dispose=function(){typeof window<"u"&&window.removeEventListener("vrdisplaypresentchange",_)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}Object.assign(dg.prototype,Pt.prototype);function V1(e,t){var n=this,r=null,i=null,a="local-floor",o=null,s=[],l=[];function u(){return r!==null&&i!==null}var c=new wt;c.layers.enable(1),c.viewport=new et;var f=new wt;f.layers.enable(2),f.viewport=new et;var h=new Rf([c,f]);h.layers.enable(1),h.layers.enable(2),this.enabled=!1,this.getController=function(g){var _=s[g];return _===void 0&&(_=new Go,_.matrixAutoUpdate=!1,_.visible=!1,s[g]=_),_};function d(g){for(var _=0;_<s.length;_++)l[_]===g.inputSource&&s[_].dispatchEvent({type:g.type})}function p(){e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),w.stop(),n.dispatchEvent({type:"sessionend"})}function x(g){i=g,w.setContext(r),w.start(),n.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(){},this.setReferenceSpaceType=function(g){a=g},this.getSession=function(){return r},this.setSession=function(g){r=g,r!==null&&(r.addEventListener("select",d),r.addEventListener("selectstart",d),r.addEventListener("selectend",d),r.addEventListener("end",p),r.updateRenderState({baseLayer:new XRWebGLLayer(r,t)}),r.requestReferenceSpace(a).then(x),l=r.inputSources,r.addEventListener("inputsourceschange",function(){l=r.inputSources,console.log(l);for(var _=0;_<s.length;_++){var b=s[_];b.userData.inputSource=l[_]}}))};function y(g,_){_===null?g.matrixWorld.copy(g.matrix):g.matrixWorld.multiplyMatrices(_.matrixWorld,g.matrix),g.matrixWorldInverse.getInverse(g.matrixWorld)}this.getCamera=function(g){if(u()){var _=g.parent,b=h.cameras;y(h,_);for(var E=0;E<b.length;E++)y(b[E],_);g.matrixWorld.copy(h.matrixWorld);for(var S=g.children,E=0,O=S.length;E<O;E++)S[E].updateMatrixWorld(!0);return G1(h,c,f),h}return g},this.isPresenting=u;var v=null;function m(g,_){if(o=_.getViewerPose(i),o!==null){var b=o.views,E=r.renderState.baseLayer;e.setFramebuffer(E.framebuffer);for(var S=0;S<b.length;S++){var O=b[S],D=E.getViewport(O),L=O.transform.inverse.matrix,R=h.cameras[S];R.matrix.fromArray(L).getInverse(R.matrix),R.projectionMatrix.fromArray(O.projectionMatrix),R.viewport.set(D.x,D.y,D.width,D.height),S===0&&h.matrix.copy(R.matrix)}}for(var S=0;S<s.length;S++){var N=s[S],B=l[S];if(B){var G=_.getPose(B.targetRaySpace,i);if(G!==null){N.matrix.fromArray(G.transform.matrix),N.matrix.decompose(N.position,N.rotation,N.scale),N.visible=!0;continue}}N.visible=!1}v&&v(g)}var w=new hg;w.setAnimationLoop(m),this.setAnimationLoop=function(g){v=g},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new Ge},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}Object.assign(V1.prototype,Pt.prototype);function pg(e){e=e||{};var t=e.canvas!==void 0?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=e.context!==void 0?e.context:null,r=e.alpha!==void 0?e.alpha:!1,i=e.depth!==void 0?e.depth:!0,a=e.stencil!==void 0?e.stencil:!0,o=e.antialias!==void 0?e.antialias:!1,s=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,l=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,u=e.powerPreference!==void 0?e.powerPreference:"default",c=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,f=null,h=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=b1,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var d=this,p=!1,x=null,y=0,v=0,m=null,w=null,g=-1,_={geometry:null,program:null,wireframe:!1},b=null,E=null,S=new et,O=new et,D=null,L=t.width,R=t.height,N=1,B=new et(0,0,L,R),G=new et(0,0,L,R),W=!1,Y=new zh,z=new HA,V=!1,j=!1,q=new Ge,K=new A;function Pe(){return m===null?N:1}var H;try{var ue={alpha:r,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c,xrCompatible:!0};if(t.addEventListener("webglcontextlost",Te,!1),t.addEventListener("webglcontextrestored",k,!1),H=n||t.getContext("webgl",ue)||t.getContext("experimental-webgl",ue),H===null)throw t.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");H.getShaderPrecisionFormat===void 0&&(H.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(M){throw console.error("THREE.WebGLRenderer: "+M.message),M}var te,de,xe,Ye,C,T,$,ee,be,pe,ae,we,Le,Ue,ke,Ve,ve;function I(){te=new WA(H),de=new VA(H,te,e),de.isWebGL2===!1&&(te.get("WEBGL_depth_texture"),te.get("OES_texture_float"),te.get("OES_texture_half_float"),te.get("OES_texture_half_float_linear"),te.get("OES_standard_derivatives"),te.get("OES_element_index_uint"),te.get("ANGLE_instanced_arrays")),te.get("OES_texture_float_linear"),ve=new s3(H,te,de),xe=new a3(H,te,ve,de),xe.scissor(O.copy(G).multiplyScalar(N).floor()),xe.viewport(S.copy(B).multiplyScalar(N).floor()),Ye=new qA,C=new YL,T=new o3(H,te,xe,C,de,ve,Ye),$=new BA(H),ee=new jA(H,$,Ye),be=new ZA(H,ee,$,Ye),Ue=new $A(H),pe=new qL(d,te,de),ae=new JL,we=new n3,Le=new UA(d,xe,be,s),ke=new GA(H,te,Ye,de),Ve=new XA(H,te,Ye,de),Ye.programs=pe.programs,d.capabilities=de,d.extensions=te,d.properties=C,d.renderLists=ae,d.state=xe,d.info=Ye}I();var le=typeof navigator<"u"&&"xr"in navigator&&"supportsSession"in navigator.xr?new V1(d,H):new dg(d);this.vr=le;var Me=new l3(d,H),ze=new U1(d,be,de.maxTextureSize);this.shadowMap=ze,this.getContext=function(){return H},this.getContextAttributes=function(){return H.getContextAttributes()},this.forceContextLoss=function(){var M=te.get("WEBGL_lose_context");M&&M.loseContext()},this.forceContextRestore=function(){var M=te.get("WEBGL_lose_context");M&&M.restoreContext()},this.getPixelRatio=function(){return N},this.setPixelRatio=function(M){M!==void 0&&(N=M,this.setSize(L,R,!1))},this.getSize=function(M){return M===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),M=new X),M.set(L,R)},this.setSize=function(M,P,F){if(le.isPresenting()){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=M,R=P,t.width=Math.floor(M*N),t.height=Math.floor(P*N),F!==!1&&(t.style.width=M+"px",t.style.height=P+"px"),this.setViewport(0,0,M,P)},this.getDrawingBufferSize=function(M){return M===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),M=new X),M.set(L*N,R*N).floor()},this.setDrawingBufferSize=function(M,P,F){L=M,R=P,N=F,t.width=Math.floor(M*F),t.height=Math.floor(P*F),this.setViewport(0,0,M,P)},this.getCurrentViewport=function(M){return M===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),M=new et),M.copy(S)},this.getViewport=function(M){return M.copy(B)},this.setViewport=function(M,P,F,Z){M.isVector4?B.set(M.x,M.y,M.z,M.w):B.set(M,P,F,Z),xe.viewport(S.copy(B).multiplyScalar(N).floor())},this.getScissor=function(M){return M.copy(G)},this.setScissor=function(M,P,F,Z){M.isVector4?G.set(M.x,M.y,M.z,M.w):G.set(M,P,F,Z),xe.scissor(O.copy(G).multiplyScalar(N).floor())},this.getScissorTest=function(){return W},this.setScissorTest=function(M){xe.setScissorTest(W=M)},this.getClearColor=function(){return Le.getClearColor()},this.setClearColor=function(){Le.setClearColor.apply(Le,arguments)},this.getClearAlpha=function(){return Le.getClearAlpha()},this.setClearAlpha=function(){Le.setClearAlpha.apply(Le,arguments)},this.clear=function(M,P,F){var Z=0;(M===void 0||M)&&(Z|=16384),(P===void 0||P)&&(Z|=256),(F===void 0||F)&&(Z|=1024),H.clear(Z)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Te,!1),t.removeEventListener("webglcontextrestored",k,!1),ae.dispose(),we.dispose(),C.dispose(),be.dispose(),le.dispose(),ce.stop()};function Te(M){M.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),p=!0}function k(){console.log("THREE.WebGLRenderer: Context Restored."),p=!1,I()}function ne(M){var P=M.target;P.removeEventListener("dispose",ne),me(P)}function me(M){Ce(M),C.remove(M)}function Ce(M){var P=C.get(M).program;M.program=void 0,P!==void 0&&pe.releaseProgram(P)}function ge(M,P){M.render(function(F){d.renderBufferImmediate(F,P)})}this.renderBufferImmediate=function(M,P){xe.initAttributes();var F=C.get(M);M.hasPositions&&!F.position&&(F.position=H.createBuffer()),M.hasNormals&&!F.normal&&(F.normal=H.createBuffer()),M.hasUvs&&!F.uv&&(F.uv=H.createBuffer()),M.hasColors&&!F.color&&(F.color=H.createBuffer());var Z=P.getAttributes();M.hasPositions&&(H.bindBuffer(34962,F.position),H.bufferData(34962,M.positionArray,35048),xe.enableAttribute(Z.position),H.vertexAttribPointer(Z.position,3,5126,!1,0,0)),M.hasNormals&&(H.bindBuffer(34962,F.normal),H.bufferData(34962,M.normalArray,35048),xe.enableAttribute(Z.normal),H.vertexAttribPointer(Z.normal,3,5126,!1,0,0)),M.hasUvs&&(H.bindBuffer(34962,F.uv),H.bufferData(34962,M.uvArray,35048),xe.enableAttribute(Z.uv),H.vertexAttribPointer(Z.uv,2,5126,!1,0,0)),M.hasColors&&(H.bindBuffer(34962,F.color),H.bufferData(34962,M.colorArray,35048),xe.enableAttribute(Z.color),H.vertexAttribPointer(Z.color,3,5126,!1,0,0)),xe.disableUnusedAttributes(),H.drawArrays(4,0,M.count),M.count=0},this.renderBufferDirect=function(M,P,F,Z,oe,Xe){var je=oe.isMesh&&oe.matrixWorld.determinant()<0;xe.setMaterial(Z,je);var We=Ln(M,P,Z,oe),Re=!1;(_.geometry!==F.id||_.program!==We.id||_.wireframe!==(Z.wireframe===!0))&&(_.geometry=F.id,_.program=We.id,_.wireframe=Z.wireframe===!0,Re=!0),oe.morphTargetInfluences&&(Ue.update(oe,F,Z,We),Re=!0);var He=F.index,rt=F.attributes.position,De=1;Z.wireframe===!0&&(He=ee.getWireframeAttribute(F),De=2);var Ee,Qe=ke;He!==null&&(Ee=$.get(He),Qe=Ve,Qe.setIndex(Ee)),Re&&($e(oe,F,Z,We),He!==null&&H.bindBuffer(34963,Ee.buffer));var Fe=1/0;He!==null?Fe=He.count:rt!==void 0&&(Fe=rt.count);var Or=F.drawRange.start*De,_t=F.drawRange.count*De,ci=Xe!==null?Xe.start*De:0,vs=Xe!==null?Xe.count*De:1/0,jn=Math.max(Or,ci),eb=Math.min(Fe,Or+_t,ci+vs)-1,Pu=Math.max(0,eb-jn+1);if(Pu!==0){if(oe.isMesh)if(Z.wireframe===!0)xe.setLineWidth(Z.wireframeLinewidth*Pe()),Qe.setMode(1);else switch(oe.drawMode){case fg:Qe.setMode(4);break;case $T:Qe.setMode(5);break;case ZT:Qe.setMode(6);break}else if(oe.isLine){var jh=Z.linewidth;jh===void 0&&(jh=1),xe.setLineWidth(jh*Pe()),oe.isLineSegments?Qe.setMode(1):oe.isLineLoop?Qe.setMode(2):Qe.setMode(3)}else oe.isPoints?Qe.setMode(0):oe.isSprite&&Qe.setMode(4);oe.isInstancedMesh?Qe.renderInstances(F,jn,Pu,oe.count):F.isInstancedBufferGeometry?Qe.renderInstances(F,jn,Pu,F.maxInstancedCount):Qe.render(jn,Pu)}};function $e(M,P,F,Z){if(!(de.isWebGL2===!1&&(M.isInstancedMesh||P.isInstancedBufferGeometry)&&te.get("ANGLE_instanced_arrays")===null)){xe.initAttributes();var oe=P.attributes,Xe=Z.getAttributes(),je=F.defaultAttributeValues;for(var We in Xe){var Re=Xe[We];if(Re>=0){var He=oe[We];if(He!==void 0){var rt=He.normalized,De=He.itemSize,Ee=$.get(He);if(Ee===void 0)continue;var Qe=Ee.buffer,Fe=Ee.type,Or=Ee.bytesPerElement;if(He.isInterleavedBufferAttribute){var _t=He.data,ci=_t.stride,vs=He.offset;_t&&_t.isInstancedInterleavedBuffer?(xe.enableAttributeAndDivisor(Re,_t.meshPerAttribute),P.maxInstancedCount===void 0&&(P.maxInstancedCount=_t.meshPerAttribute*_t.count)):xe.enableAttribute(Re),H.bindBuffer(34962,Qe),H.vertexAttribPointer(Re,De,Fe,rt,ci*Or,vs*Or)}else He.isInstancedBufferAttribute?(xe.enableAttributeAndDivisor(Re,He.meshPerAttribute),P.maxInstancedCount===void 0&&(P.maxInstancedCount=He.meshPerAttribute*He.count)):xe.enableAttribute(Re),H.bindBuffer(34962,Qe),H.vertexAttribPointer(Re,De,Fe,rt,0,0)}else if(We==="instanceMatrix"){var Ee=$.get(M.instanceMatrix);if(Ee===void 0)continue;var Qe=Ee.buffer,Fe=Ee.type;xe.enableAttributeAndDivisor(Re+0,1),xe.enableAttributeAndDivisor(Re+1,1),xe.enableAttributeAndDivisor(Re+2,1),xe.enableAttributeAndDivisor(Re+3,1),H.bindBuffer(34962,Qe),H.vertexAttribPointer(Re+0,4,Fe,!1,64,0),H.vertexAttribPointer(Re+1,4,Fe,!1,64,16),H.vertexAttribPointer(Re+2,4,Fe,!1,64,32),H.vertexAttribPointer(Re+3,4,Fe,!1,64,48)}else if(je!==void 0){var jn=je[We];if(jn!==void 0)switch(jn.length){case 2:H.vertexAttrib2fv(Re,jn);break;case 3:H.vertexAttrib3fv(Re,jn);break;case 4:H.vertexAttrib4fv(Re,jn);break;default:H.vertexAttrib1fv(Re,jn)}}}}xe.disableUnusedAttributes()}}this.compile=function(M,P){h=we.get(M,P),h.init(),M.traverse(function(F){F.isLight&&(h.pushLight(F),F.castShadow&&h.pushShadow(F))}),h.setupLights(P),M.traverse(function(F){if(F.material)if(Array.isArray(F.material))for(var Z=0;Z<F.material.length;Z++)bt(F.material[Z],M.fog,F);else bt(F.material,M.fog,F)})};var U=null;function Q(M){le.isPresenting()||U&&U(M)}var ce=new hg;ce.setAnimationLoop(Q),typeof window<"u"&&ce.setContext(window),this.setAnimationLoop=function(M){U=M,le.setAnimationLoop(M),ce.start()},this.render=function(M,P){var F,Z;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),F=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Z=arguments[3]),!(P&&P.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!p){_.geometry=null,_.program=null,_.wireframe=!1,g=-1,b=null,M.autoUpdate===!0&&M.updateMatrixWorld(),P.parent===null&&P.updateMatrixWorld(),le.enabled&&(P=le.getCamera(P)),h=we.get(M,P),h.init(),M.onBeforeRender(d,M,P,F||m),q.multiplyMatrices(P.projectionMatrix,P.matrixWorldInverse),Y.setFromMatrix(q),j=this.localClippingEnabled,V=z.init(this.clippingPlanes,j,P),f=ae.get(M,P),f.init(),_e(M,P,0,d.sortObjects),d.sortObjects===!0&&f.sort(),V&&z.beginShadows();var oe=h.state.shadowsArray;ze.render(oe,M,P),h.setupLights(P),V&&z.endShadows(),this.info.autoReset&&this.info.reset(),F!==void 0&&this.setRenderTarget(F),le.enabled&&Me.isAvailable()&&Me.attachCamera(P),Le.render(f,M,P,Z);var Xe=f.opaque,je=f.transparent;if(M.overrideMaterial){var We=M.overrideMaterial;Xe.length&&Ae(Xe,M,P,We),je.length&&Ae(je,M,P,We)}else Xe.length&&Ae(Xe,M,P),je.length&&Ae(je,M,P);M.onAfterRender(d,M,P),m!==null&&(T.updateRenderTargetMipmap(m),T.updateMultisampleRenderTarget(m)),xe.buffers.depth.setTest(!0),xe.buffers.depth.setMask(!0),xe.buffers.color.setMask(!0),xe.setPolygonOffset(!1),le.enabled&&(Me.isAvailable()&&Me.detachCamera(P),le.submitFrame()),f=null,h=null}};function _e(M,P,F,Z){if(M.visible!==!1){var oe=M.layers.test(P.layers);if(oe){if(M.isGroup)F=M.renderOrder;else if(M.isLOD)M.autoUpdate===!0&&M.update(P);else if(M.isLight)h.pushLight(M),M.castShadow&&h.pushShadow(M);else if(M.isSprite){if(!M.frustumCulled||Y.intersectsSprite(M)){Z&&K.setFromMatrixPosition(M.matrixWorld).applyMatrix4(q);var Xe=be.update(M),je=M.material;je.visible&&f.push(M,Xe,je,F,K.z,null)}}else if(M.isImmediateRenderObject)Z&&K.setFromMatrixPosition(M.matrixWorld).applyMatrix4(q),f.push(M,null,M.material,F,K.z,null);else if((M.isMesh||M.isLine||M.isPoints)&&(M.isSkinnedMesh&&M.skeleton.frame!==Ye.render.frame&&(M.skeleton.update(),M.skeleton.frame=Ye.render.frame),!M.frustumCulled||Y.intersectsObject(M))){Z&&K.setFromMatrixPosition(M.matrixWorld).applyMatrix4(q);var Xe=be.update(M),je=M.material;if(Array.isArray(je))for(var We=Xe.groups,Re=0,He=We.length;Re<He;Re++){var rt=We[Re],De=je[rt.materialIndex];De&&De.visible&&f.push(M,Xe,De,F,K.z,rt)}else je.visible&&f.push(M,Xe,je,F,K.z,null)}}for(var Ee=M.children,Re=0,He=Ee.length;Re<He;Re++)_e(Ee[Re],P,F,Z)}}function Ae(M,P,F,Z){for(var oe=0,Xe=M.length;oe<Xe;oe++){var je=M[oe],We=je.object,Re=je.geometry,He=Z===void 0?je.material:Z,rt=je.group;if(F.isArrayCamera)if(E=F,le.enabled&&Me.isAvailable())Ke(We,P,F,Re,He,rt);else for(var De=F.cameras,Ee=0,Qe=De.length;Ee<Qe;Ee++){var Fe=De[Ee];We.layers.test(Fe.layers)&&(xe.viewport(S.copy(Fe.viewport)),h.setupLights(Fe),Ke(We,P,Fe,Re,He,rt))}else E=null,Ke(We,P,F,Re,He,rt)}}function Ke(M,P,F,Z,oe,Xe){if(M.onBeforeRender(d,P,F,Z,oe,Xe),h=we.get(P,E||F),M.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,M.matrixWorld),M.normalMatrix.getNormalMatrix(M.modelViewMatrix),M.isImmediateRenderObject){xe.setMaterial(oe);var je=Ln(F,P.fog,oe,M);_.geometry=null,_.program=null,_.wireframe=!1,ge(M,je)}else d.renderBufferDirect(F,P.fog,Z,oe,M,Xe);M.onAfterRender(d,P,F,Z,oe,Xe),h=we.get(P,E||F)}function bt(M,P,F){var Z=C.get(M),oe=h.state.lights,Xe=h.state.shadowsArray,je=oe.state.version,We=pe.getParameters(M,oe.state,Xe,P,z.numPlanes,z.numIntersection,F),Re=pe.getProgramCode(M,We),He=Z.program,rt=!0;if(He===void 0)M.addEventListener("dispose",ne);else if(He.code!==Re)Ce(M);else if(Z.lightsStateVersion!==je)Z.lightsStateVersion=je,rt=!1;else{if(We.shaderID!==void 0)return;rt=!1}if(rt){if(We.shaderID){var De=Hr[We.shaderID];Z.shader={name:M.type,uniforms:zo(De.uniforms),vertexShader:De.vertexShader,fragmentShader:De.fragmentShader}}else Z.shader={name:M.type,uniforms:M.uniforms,vertexShader:M.vertexShader,fragmentShader:M.fragmentShader};M.onBeforeCompile(Z.shader,d),Re=pe.getProgramCode(M,We),He=pe.acquireProgram(M,Z.shader,We,Re),Z.program=He,M.program=He}var Ee=He.getAttributes();if(M.morphTargets){M.numSupportedMorphTargets=0;for(var Qe=0;Qe<d.maxMorphTargets;Qe++)Ee["morphTarget"+Qe]>=0&&M.numSupportedMorphTargets++}if(M.morphNormals){M.numSupportedMorphNormals=0;for(var Qe=0;Qe<d.maxMorphNormals;Qe++)Ee["morphNormal"+Qe]>=0&&M.numSupportedMorphNormals++}var Fe=Z.shader.uniforms;(!M.isShaderMaterial&&!M.isRawShaderMaterial||M.clipping===!0)&&(Z.numClippingPlanes=z.numPlanes,Z.numIntersection=z.numIntersection,Fe.clippingPlanes=z.uniform),Z.fog=P,Z.needsLights=KM(M),Z.lightsStateVersion=je,Z.needsLights&&(Fe.ambientLightColor.value=oe.state.ambient,Fe.lightProbe.value=oe.state.probe,Fe.directionalLights.value=oe.state.directional,Fe.spotLights.value=oe.state.spot,Fe.rectAreaLights.value=oe.state.rectArea,Fe.pointLights.value=oe.state.point,Fe.hemisphereLights.value=oe.state.hemi,Fe.directionalShadowMap.value=oe.state.directionalShadowMap,Fe.directionalShadowMatrix.value=oe.state.directionalShadowMatrix,Fe.spotShadowMap.value=oe.state.spotShadowMap,Fe.spotShadowMatrix.value=oe.state.spotShadowMatrix,Fe.pointShadowMap.value=oe.state.pointShadowMap,Fe.pointShadowMatrix.value=oe.state.pointShadowMatrix);var Or=Z.program.getUniforms(),_t=Ii.seqWithValue(Or.seq,Fe);Z.uniformsList=_t}function Ln(M,P,F,Z){T.resetTextureUnits();var oe=C.get(F),Xe=h.state.lights;if(V&&(j||M!==b)){var je=M===b&&F.id===g;z.setState(F.clippingPlanes,F.clipIntersection,F.clipShadows,M,oe,je)}F.needsUpdate===!1&&(oe.program===void 0||F.fog&&oe.fog!==P||oe.needsLights&&oe.lightsStateVersion!==Xe.state.version||oe.numClippingPlanes!==void 0&&(oe.numClippingPlanes!==z.numPlanes||oe.numIntersection!==z.numIntersection))&&(F.needsUpdate=!0),F.needsUpdate&&(bt(F,P,Z),F.needsUpdate=!1);var We=!1,Re=!1,He=!1,rt=oe.program,De=rt.getUniforms(),Ee=oe.shader.uniforms;if(xe.useProgram(rt.program)&&(We=!0,Re=!0,He=!0),F.id!==g&&(g=F.id,Re=!0),We||b!==M){if(rt.numMultiviewViews>0?Me.updateCameraProjectionMatricesUniform(M,De):De.setValue(H,"projectionMatrix",M.projectionMatrix),de.logarithmicDepthBuffer&&De.setValue(H,"logDepthBufFC",2/(Math.log(M.far+1)/Math.LN2)),b!==M&&(b=M,Re=!0,He=!0),F.isShaderMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.envMap){var Qe=De.map.cameraPosition;Qe!==void 0&&Qe.setValue(H,K.setFromMatrixPosition(M.matrixWorld))}(F.isMeshPhongMaterial||F.isMeshLambertMaterial||F.isMeshBasicMaterial||F.isMeshStandardMaterial||F.isShaderMaterial||F.skinning)&&(rt.numMultiviewViews>0?Me.updateCameraViewMatricesUniform(M,De):De.setValue(H,"viewMatrix",M.matrixWorldInverse))}if(F.skinning){De.setOptional(H,Z,"bindMatrix"),De.setOptional(H,Z,"bindMatrixInverse");var Fe=Z.skeleton;if(Fe){var Or=Fe.bones;if(de.floatVertexTextures){if(Fe.boneTexture===void 0){var _t=Math.sqrt(Or.length*4);_t=Be.ceilPowerOfTwo(_t),_t=Math.max(_t,4);var ci=new Float32Array(_t*_t*4);ci.set(Fe.boneMatrices);var vs=new Bo(ci,_t,_t,Kr,bl);Fe.boneMatrices=ci,Fe.boneTexture=vs,Fe.boneTextureSize=_t}De.setValue(H,"boneTexture",Fe.boneTexture,T),De.setValue(H,"boneTextureSize",Fe.boneTextureSize)}else De.setOptional(H,Fe,"boneMatrices")}}return(Re||oe.receiveShadow!==Z.receiveShadow)&&(oe.receiveShadow=Z.receiveShadow,De.setValue(H,"receiveShadow",Z.receiveShadow)),Re&&(De.setValue(H,"toneMappingExposure",d.toneMappingExposure),De.setValue(H,"toneMappingWhitePoint",d.toneMappingWhitePoint),oe.needsLights&&QM(Ee,He),P&&F.fog&&ui(Ee,P),F.isMeshBasicMaterial?tn(Ee,F):F.isMeshLambertMaterial?(tn(Ee,F),ps(Ee,F)):F.isMeshPhongMaterial?(tn(Ee,F),F.isMeshToonMaterial?XM(Ee,F):qi(Ee,F)):F.isMeshStandardMaterial?(tn(Ee,F),F.isMeshPhysicalMaterial?qM(Ee,F):Ig(Ee,F)):F.isMeshMatcapMaterial?(tn(Ee,F),YM(Ee,F)):F.isMeshDepthMaterial?(tn(Ee,F),$M(Ee,F)):F.isMeshDistanceMaterial?(tn(Ee,F),ZM(Ee,F)):F.isMeshNormalMaterial?(tn(Ee,F),JM(Ee,F)):F.isLineBasicMaterial?(Hn(Ee,F),F.isLineDashedMaterial&&Xi(Ee,F)):F.isPointsMaterial?Rr(Ee,F):F.isSpriteMaterial?Wn(Ee,F):F.isShadowMaterial&&(Ee.color.value.copy(F.color),Ee.opacity.value=F.opacity),Ee.ltc_1!==void 0&&(Ee.ltc_1.value=ye.LTC_1),Ee.ltc_2!==void 0&&(Ee.ltc_2.value=ye.LTC_2),Ii.upload(H,oe.uniformsList,Ee,T)),F.isShaderMaterial&&F.uniformsNeedUpdate===!0&&(Ii.upload(H,oe.uniformsList,Ee,T),F.uniformsNeedUpdate=!1),F.isSpriteMaterial&&De.setValue(H,"center",Z.center),rt.numMultiviewViews>0?Me.updateObjectMatricesUniforms(Z,M,De):(De.setValue(H,"modelViewMatrix",Z.modelViewMatrix),De.setValue(H,"normalMatrix",Z.normalMatrix)),De.setValue(H,"modelMatrix",Z.matrixWorld),rt}function tn(M,P){M.opacity.value=P.opacity,P.color&&M.diffuse.value.copy(P.color),P.emissive&&M.emissive.value.copy(P.emissive).multiplyScalar(P.emissiveIntensity),P.map&&(M.map.value=P.map),P.alphaMap&&(M.alphaMap.value=P.alphaMap),P.specularMap&&(M.specularMap.value=P.specularMap),P.envMap&&(M.envMap.value=P.envMap,M.flipEnvMap.value=P.envMap.isCubeTexture?-1:1,M.reflectivity.value=P.reflectivity,M.refractionRatio.value=P.refractionRatio,M.maxMipLevel.value=C.get(P.envMap).__maxMipLevel),P.lightMap&&(M.lightMap.value=P.lightMap,M.lightMapIntensity.value=P.lightMapIntensity),P.aoMap&&(M.aoMap.value=P.aoMap,M.aoMapIntensity.value=P.aoMapIntensity);var F;P.map?F=P.map:P.specularMap?F=P.specularMap:P.displacementMap?F=P.displacementMap:P.normalMap?F=P.normalMap:P.bumpMap?F=P.bumpMap:P.roughnessMap?F=P.roughnessMap:P.metalnessMap?F=P.metalnessMap:P.alphaMap?F=P.alphaMap:P.emissiveMap&&(F=P.emissiveMap),F!==void 0&&(F.isWebGLRenderTarget&&(F=F.texture),F.matrixAutoUpdate===!0&&F.updateMatrix(),M.uvTransform.value.copy(F.matrix))}function Hn(M,P){M.diffuse.value.copy(P.color),M.opacity.value=P.opacity}function Xi(M,P){M.dashSize.value=P.dashSize,M.totalSize.value=P.dashSize+P.gapSize,M.scale.value=P.scale}function Rr(M,P){M.diffuse.value.copy(P.color),M.opacity.value=P.opacity,M.size.value=P.size*N,M.scale.value=R*.5,M.map.value=P.map,P.map!==null&&(P.map.matrixAutoUpdate===!0&&P.map.updateMatrix(),M.uvTransform.value.copy(P.map.matrix))}function Wn(M,P){M.diffuse.value.copy(P.color),M.opacity.value=P.opacity,M.rotation.value=P.rotation,M.map.value=P.map,P.map!==null&&(P.map.matrixAutoUpdate===!0&&P.map.updateMatrix(),M.uvTransform.value.copy(P.map.matrix))}function ui(M,P){M.fogColor.value.copy(P.color),P.isFog?(M.fogNear.value=P.near,M.fogFar.value=P.far):P.isFogExp2&&(M.fogDensity.value=P.density)}function ps(M,P){P.emissiveMap&&(M.emissiveMap.value=P.emissiveMap)}function qi(M,P){M.specular.value.copy(P.specular),M.shininess.value=Math.max(P.shininess,1e-4),P.emissiveMap&&(M.emissiveMap.value=P.emissiveMap),P.bumpMap&&(M.bumpMap.value=P.bumpMap,M.bumpScale.value=P.bumpScale,P.side===Et&&(M.bumpScale.value*=-1)),P.normalMap&&(M.normalMap.value=P.normalMap,M.normalScale.value.copy(P.normalScale),P.side===Et&&M.normalScale.value.negate()),P.displacementMap&&(M.displacementMap.value=P.displacementMap,M.displacementScale.value=P.displacementScale,M.displacementBias.value=P.displacementBias)}function XM(M,P){qi(M,P),P.gradientMap&&(M.gradientMap.value=P.gradientMap)}function Ig(M,P){M.roughness.value=P.roughness,M.metalness.value=P.metalness,P.roughnessMap&&(M.roughnessMap.value=P.roughnessMap),P.metalnessMap&&(M.metalnessMap.value=P.metalnessMap),P.emissiveMap&&(M.emissiveMap.value=P.emissiveMap),P.bumpMap&&(M.bumpMap.value=P.bumpMap,M.bumpScale.value=P.bumpScale,P.side===Et&&(M.bumpScale.value*=-1)),P.normalMap&&(M.normalMap.value=P.normalMap,M.normalScale.value.copy(P.normalScale),P.side===Et&&M.normalScale.value.negate()),P.displacementMap&&(M.displacementMap.value=P.displacementMap,M.displacementScale.value=P.displacementScale,M.displacementBias.value=P.displacementBias),P.envMap&&(M.envMapIntensity.value=P.envMapIntensity)}function qM(M,P){Ig(M,P),M.reflectivity.value=P.reflectivity,M.clearcoat.value=P.clearcoat,M.clearcoatRoughness.value=P.clearcoatRoughness,P.sheen&&M.sheen.value.copy(P.sheen),P.clearcoatNormalMap&&(M.clearcoatNormalScale.value.copy(P.clearcoatNormalScale),M.clearcoatNormalMap.value=P.clearcoatNormalMap,P.side===Et&&M.clearcoatNormalScale.value.negate()),M.transparency.value=P.transparency}function YM(M,P){P.matcap&&(M.matcap.value=P.matcap),P.bumpMap&&(M.bumpMap.value=P.bumpMap,M.bumpScale.value=P.bumpScale,P.side===Et&&(M.bumpScale.value*=-1)),P.normalMap&&(M.normalMap.value=P.normalMap,M.normalScale.value.copy(P.normalScale),P.side===Et&&M.normalScale.value.negate()),P.displacementMap&&(M.displacementMap.value=P.displacementMap,M.displacementScale.value=P.displacementScale,M.displacementBias.value=P.displacementBias)}function $M(M,P){P.displacementMap&&(M.displacementMap.value=P.displacementMap,M.displacementScale.value=P.displacementScale,M.displacementBias.value=P.displacementBias)}function ZM(M,P){P.displacementMap&&(M.displacementMap.value=P.displacementMap,M.displacementScale.value=P.displacementScale,M.displacementBias.value=P.displacementBias),M.referencePosition.value.copy(P.referencePosition),M.nearDistance.value=P.nearDistance,M.farDistance.value=P.farDistance}function JM(M,P){P.bumpMap&&(M.bumpMap.value=P.bumpMap,M.bumpScale.value=P.bumpScale,P.side===Et&&(M.bumpScale.value*=-1)),P.normalMap&&(M.normalMap.value=P.normalMap,M.normalScale.value.copy(P.normalScale),P.side===Et&&M.normalScale.value.negate()),P.displacementMap&&(M.displacementMap.value=P.displacementMap,M.displacementScale.value=P.displacementScale,M.displacementBias.value=P.displacementBias)}function QM(M,P){M.ambientLightColor.needsUpdate=P,M.lightProbe.needsUpdate=P,M.directionalLights.needsUpdate=P,M.pointLights.needsUpdate=P,M.spotLights.needsUpdate=P,M.rectAreaLights.needsUpdate=P,M.hemisphereLights.needsUpdate=P}function KM(M){return M.isMeshLambertMaterial||M.isMeshPhongMaterial||M.isMeshStandardMaterial||M.isShadowMaterial||M.isShaderMaterial&&M.lights===!0}this.setFramebuffer=function(M){x!==M&&H.bindFramebuffer(36160,M),x=M},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return m},this.setRenderTarget=function(M,P,F){m=M,y=P,v=F,M&&C.get(M).__webglFramebuffer===void 0&&T.setupRenderTarget(M);var Z=x,oe=!1;if(M){var Xe=C.get(M).__webglFramebuffer;M.isWebGLRenderTargetCube?(Z=Xe[P||0],oe=!0):M.isWebGLMultisampleRenderTarget?Z=C.get(M).__webglMultisampledFramebuffer:Z=Xe,S.copy(M.viewport),O.copy(M.scissor),D=M.scissorTest}else S.copy(B).multiplyScalar(N).floor(),O.copy(G).multiplyScalar(N).floor(),D=W;if(w!==Z&&(H.bindFramebuffer(36160,Z),w=Z),xe.viewport(S),xe.scissor(O),xe.setScissorTest(D),oe){var je=C.get(M.texture);H.framebufferTexture2D(36160,36064,34069+(P||0),je.__webglTexture,F||0)}},this.readRenderTargetPixels=function(M,P,F,Z,oe,Xe,je){if(!(M&&M.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var We=C.get(M).__webglFramebuffer;if(M.isWebGLRenderTargetCube&&je!==void 0&&(We=We[je]),We){var Re=!1;We!==w&&(H.bindFramebuffer(36160,We),Re=!0);try{var He=M.texture,rt=He.format,De=He.type;if(rt!==Kr&&ve.convert(rt)!==H.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(De!==ug&&ve.convert(De)!==H.getParameter(35738)&&!(De===bl&&(de.isWebGL2||te.get("OES_texture_float")||te.get("WEBGL_color_buffer_float")))&&!(De===cg&&(de.isWebGL2?te.get("EXT_color_buffer_float"):te.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}H.checkFramebufferStatus(36160)===36053?P>=0&&P<=M.width-Z&&F>=0&&F<=M.height-oe&&H.readPixels(P,F,Z,oe,ve.convert(rt),ve.convert(De),Xe):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{Re&&H.bindFramebuffer(36160,w)}}},this.copyFramebufferToTexture=function(M,P,F){var Z=P.image.width,oe=P.image.height,Xe=ve.convert(P.format);T.setTexture2D(P,0),H.copyTexImage2D(3553,F||0,Xe,M.x,M.y,Z,oe,0)},this.copyTextureToTexture=function(M,P,F,Z){var oe=P.image.width,Xe=P.image.height,je=ve.convert(F.format),We=ve.convert(F.type);T.setTexture2D(F,0),P.isDataTexture?H.texSubImage2D(3553,Z||0,M.x,M.y,oe,Xe,je,We,P.image.data):H.texSubImage2D(3553,Z||0,M.x,M.y,je,We,P.image)},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function fv(e,t){this.name="",this.color=new he(e),this.density=t!==void 0?t:25e-5}Object.assign(fv.prototype,{isFogExp2:!0,clone:function(){return new fv(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function hv(e,t,n){this.name="",this.color=new he(e),this.near=t!==void 0?t:1,this.far=n!==void 0?n:1e3}Object.assign(hv.prototype,{isFog:!0,clone:function(){return new hv(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function La(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(La.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(La.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}});function Of(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=r===!0}Object.defineProperties(Of.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(Of.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}});function Ca(e){Ne.call(this),this.type="SpriteMaterial",this.color=new he(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}Ca.prototype=Object.create(Ne.prototype);Ca.prototype.constructor=Ca;Ca.prototype.isSpriteMaterial=!0;Ca.prototype.copy=function(e){return Ne.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var $a,Ps=new A,Za=new A,Ja=new A,Qa=new X,As=new X,H1=new Ge,oc=new A,Ls=new A,sc=new A,N0=new X,jd=new X,k0=new X;function dv(e){if(re.call(this),this.type="Sprite",$a===void 0){$a=new se;var t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new La(t,5);$a.setIndex([0,1,2,0,2,3]),$a.addAttribute("position",new Of(n,3,0,!1)),$a.addAttribute("uv",new Of(n,2,3,!1))}this.geometry=$a,this.material=e!==void 0?e:new Ca,this.center=new X(.5,.5)}dv.prototype=Object.assign(Object.create(re.prototype),{constructor:dv,isSprite:!0,raycast:function(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Za.setFromMatrixScale(this.matrixWorld),H1.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ja.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Za.multiplyScalar(-Ja.z);var n=this.material.rotation,r,i;n!==0&&(i=Math.cos(n),r=Math.sin(n));var a=this.center;lc(oc.set(-.5,-.5,0),Ja,a,Za,r,i),lc(Ls.set(.5,-.5,0),Ja,a,Za,r,i),lc(sc.set(.5,.5,0),Ja,a,Za,r,i),N0.set(0,0),jd.set(1,0),k0.set(1,1);var o=e.ray.intersectTriangle(oc,Ls,sc,!1,Ps);if(!(o===null&&(lc(Ls.set(-.5,.5,0),Ja,a,Za,r,i),jd.set(0,1),o=e.ray.intersectTriangle(oc,sc,Ls,!1,Ps),o===null))){var s=e.ray.origin.distanceTo(Ps);s<e.near||s>e.far||t.push({distance:s,point:Ps.clone(),uv:It.getUV(Ps,oc,Ls,sc,N0,jd,k0,new X),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return re.prototype.copy.call(this,e),e.center!==void 0&&this.center.copy(e.center),this}});function lc(e,t,n,r,i,a){Qa.subVectors(e,n).addScalar(.5).multiply(r),i!==void 0?(As.x=a*Qa.x-i*Qa.y,As.y=i*Qa.x+a*Qa.y):As.copy(Qa),e.copy(t),e.x+=As.x,e.y+=As.y,e.applyMatrix4(H1)}var uc=new A,F0=new A;function Df(){re.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}Df.prototype=Object.assign(Object.create(re.prototype),{constructor:Df,isLOD:!0,copy:function(e){re.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){t===void 0&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(e,t){uc.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(uc);this.getObjectForDistance(n).raycast(e,t)},update:function(e){var t=this.levels;if(t.length>1){uc.setFromMatrixPosition(e.matrixWorld),F0.setFromMatrixPosition(this.matrixWorld);var n=uc.distanceTo(F0);t[0].object.visible=!0;for(var r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(;r<i;r++)t[r].object.visible=!1}},toJSON:function(e){var t=re.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var a=n[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}});function If(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),ot.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ge,this.bindMatrixInverse=new Ge}If.prototype=Object.assign(Object.create(ot.prototype),{constructor:If,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new et,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){ot.prototype.updateMatrixWorld.call(this,e),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var z0=new Ge,u3=new Ge;function pv(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,t===void 0)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Ge)}}Object.assign(pv.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new Ge;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:u3;z0.multiplyMatrices(o,t[i]),z0.toArray(n,i*16)}r!==void 0&&(r.needsUpdate=!0)},clone:function(){return new pv(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}});function B0(){re.call(this),this.type="Bone"}B0.prototype=Object.assign(Object.create(re.prototype),{constructor:B0,isBone:!0});function U0(e,t,n){ot.call(this,e,t),this.instanceMatrix=new Ie(new Float32Array(n*16),16),this.count=n}U0.prototype=Object.assign(Object.create(ot.prototype),{constructor:U0,isInstancedMesh:!0,raycast:function(){},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,e*16)},updateMorphTargets:function(){}});function st(e){Ne.call(this),this.type="LineBasicMaterial",this.color=new he(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}st.prototype=Object.create(Ne.prototype);st.prototype.constructor=st;st.prototype.isLineBasicMaterial=!0;st.prototype.copy=function(e){return Ne.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this};var G0=new A,V0=new A,H0=new Ge,cc=new fs,fc=new Wi;function Xt(e,t,n){n===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),re.call(this),this.type="Line",this.geometry=e!==void 0?e:new se,this.material=t!==void 0?t:new st({color:Math.random()*16777215})}Xt.prototype=Object.assign(Object.create(re.prototype),{constructor:Xt,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(e.index===null){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)G0.fromBufferAttribute(t,r-1),V0.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=G0.distanceTo(V0);e.addAttribute("lineDistance",new ie(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var a=e.vertices,n=e.lineDistances;n[0]=0;for(var r=1,i=a.length;r<i;r++)n[r]=n[r-1],n[r]+=a[r-1].distanceTo(a[r])}return this},raycast:function(e,t){var n=e.linePrecision,r=this.geometry,i=this.matrixWorld;if(r.boundingSphere===null&&r.computeBoundingSphere(),fc.copy(r.boundingSphere),fc.applyMatrix4(i),fc.radius+=n,e.ray.intersectsSphere(fc)!==!1){H0.getInverse(i),cc.copy(e.ray).applyMatrix4(H0);var a=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,s=new A,l=new A,u=new A,c=new A,f=this&&this.isLineSegments?2:1;if(r.isBufferGeometry){var h=r.index,d=r.attributes,p=d.position.array;if(h!==null)for(var x=h.array,y=0,v=x.length-1;y<v;y+=f){var m=x[y],w=x[y+1];s.fromArray(p,m*3),l.fromArray(p,w*3);var g=cc.distanceSqToSegment(s,l,c,u);if(!(g>o)){c.applyMatrix4(this.matrixWorld);var _=e.ray.origin.distanceTo(c);_<e.near||_>e.far||t.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else for(var y=0,v=p.length/3-1;y<v;y+=f){s.fromArray(p,3*y),l.fromArray(p,3*y+3);var g=cc.distanceSqToSegment(s,l,c,u);if(!(g>o)){c.applyMatrix4(this.matrixWorld);var _=e.ray.origin.distanceTo(c);_<e.near||_>e.far||t.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}else if(r.isGeometry)for(var b=r.vertices,E=b.length,y=0;y<E-1;y+=f){var g=cc.distanceSqToSegment(b[y],b[y+1],c,u);if(!(g>o)){c.applyMatrix4(this.matrixWorld);var _=e.ray.origin.distanceTo(c);_<e.near||_>e.far||t.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var hc=new A,dc=new A;function ht(e,t){Xt.call(this,e,t),this.type="LineSegments"}ht.prototype=Object.assign(Object.create(Xt.prototype),{constructor:ht,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(e.index===null){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)hc.fromBufferAttribute(t,r),dc.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+hc.distanceTo(dc);e.addAttribute("lineDistance",new ie(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(var a=e.vertices,n=e.lineDistances,r=0,i=a.length;r<i;r+=2)hc.copy(a[r]),dc.copy(a[r+1]),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+hc.distanceTo(dc);return this}});function vv(e,t){Xt.call(this,e,t),this.type="LineLoop"}vv.prototype=Object.assign(Object.create(Xt.prototype),{constructor:vv,isLineLoop:!0});function Ra(e){Ne.call(this),this.type="PointsMaterial",this.color=new he(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}Ra.prototype=Object.create(Ne.prototype);Ra.prototype.constructor=Ra;Ra.prototype.isPointsMaterial=!0;Ra.prototype.copy=function(e){return Ne.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var W0=new Ge,mv=new fs,pc=new Wi,vc=new A;function gv(e,t){re.call(this),this.type="Points",this.geometry=e!==void 0?e:new se,this.material=t!==void 0?t:new Ra({color:Math.random()*16777215}),this.updateMorphTargets()}gv.prototype=Object.assign(Object.create(re.prototype),{constructor:gv,isPoints:!0,raycast:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),pc.copy(n.boundingSphere),pc.applyMatrix4(r),pc.radius+=i,e.ray.intersectsSphere(pc)!==!1){W0.getInverse(r),mv.copy(e.ray).applyMatrix4(W0);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(n.isBufferGeometry){var s=n.index,l=n.attributes,u=l.position.array;if(s!==null)for(var c=s.array,f=0,h=c.length;f<h;f++){var d=c[f];vc.fromArray(u,d*3),Xd(vc,d,o,r,e,t,this)}else for(var f=0,p=u.length/3;f<p;f++)vc.fromArray(u,f*3),Xd(vc,f,o,r,e,t,this)}else for(var x=n.vertices,f=0,p=x.length;f<p;f++)Xd(x[f],f,o,r,e,t,this)}},updateMorphTargets:function(){var e=this.geometry,t,n,r;if(e.isBufferGeometry){var i=e.morphAttributes,a=Object.keys(i);if(a.length>0){var o=i[a[0]];if(o!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,n=o.length;t<n;t++)r=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}else{var s=e.morphTargets;s!==void 0&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function Xd(e,t,n,r,i,a,o){var s=mv.distanceSqToPoint(e);if(s<n){var l=new A;mv.closestPointToPoint(e,l),l.applyMatrix4(r);var u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:o})}}function j0(e,t,n,r,i,a,o,s,l){it.call(this,e,t,n,r,i,a,o,s,l),this.format=o!==void 0?o:Ea,this.minFilter=a!==void 0?a:Ft,this.magFilter=i!==void 0?i:Ft,this.generateMipmaps=!1}j0.prototype=Object.assign(Object.create(it.prototype),{constructor:j0,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function Ol(e,t,n,r,i,a,o,s,l,u,c,f){it.call(this,null,a,o,s,l,u,r,i,c,f),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}Ol.prototype=Object.create(it.prototype);Ol.prototype.constructor=Ol;Ol.prototype.isCompressedTexture=!0;function Nf(e,t,n,r,i,a,o,s,l){it.call(this,e,t,n,r,i,a,o,s,l),this.needsUpdate=!0}Nf.prototype=Object.create(it.prototype);Nf.prototype.constructor=Nf;Nf.prototype.isCanvasTexture=!0;function kf(e,t,n,r,i,a,o,s,l,u){if(u=u!==void 0?u:Po,u!==Po&&u!==El)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&u===Po&&(n=Sf),n===void 0&&u===El&&(n=Tf),it.call(this,null,r,i,a,o,s,u,n,l),this.image={width:e,height:t},this.magFilter=o!==void 0?o:Ht,this.minFilter=s!==void 0?s:Ht,this.flipY=!1,this.generateMipmaps=!1}kf.prototype=Object.create(it.prototype);kf.prototype.constructor=kf;kf.prototype.isDepthTexture=!0;function Ff(e){se.call(this),this.type="WireframeGeometry";var t=[],n,r,i,a,o,s=[0,0],l={},u,c,f,h,d=["a","b","c"],p;if(e&&e.isGeometry){var x=e.faces;for(n=0,i=x.length;n<i;n++){var y=x[n];for(r=0;r<3;r++)c=y[d[r]],f=y[d[(r+1)%3]],s[0]=Math.min(c,f),s[1]=Math.max(c,f),h=s[0]+","+s[1],l[h]===void 0&&(l[h]={index1:s[0],index2:s[1]})}for(h in l)u=l[h],p=e.vertices[u.index1],t.push(p.x,p.y,p.z),p=e.vertices[u.index2],t.push(p.x,p.y,p.z)}else if(e&&e.isBufferGeometry){var v,m,w,g,_,b,E,S;if(p=new A,e.index!==null){for(v=e.attributes.position,m=e.index,w=e.groups,w.length===0&&(w=[{start:0,count:m.count,materialIndex:0}]),a=0,o=w.length;a<o;++a)for(g=w[a],_=g.start,b=g.count,n=_,i=_+b;n<i;n+=3)for(r=0;r<3;r++)c=m.getX(n+r),f=m.getX(n+(r+1)%3),s[0]=Math.min(c,f),s[1]=Math.max(c,f),h=s[0]+","+s[1],l[h]===void 0&&(l[h]={index1:s[0],index2:s[1]});for(h in l)u=l[h],p.fromBufferAttribute(v,u.index1),t.push(p.x,p.y,p.z),p.fromBufferAttribute(v,u.index2),t.push(p.x,p.y,p.z)}else for(v=e.attributes.position,n=0,i=v.count/3;n<i;n++)for(r=0;r<3;r++)E=3*n+r,p.fromBufferAttribute(v,E),t.push(p.x,p.y,p.z),S=3*n+(r+1)%3,p.fromBufferAttribute(v,S),t.push(p.x,p.y,p.z)}this.addAttribute("position",new ie(t,3))}Ff.prototype=Object.create(se.prototype);Ff.prototype.constructor=Ff;function zf(e,t,n){Oe.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Dl(e,t,n)),this.mergeVertices()}zf.prototype=Object.create(Oe.prototype);zf.prototype.constructor=zf;function Dl(e,t,n){se.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r=[],i=[],a=[],o=[],s=1e-5,l=new A,u=new A,c=new A,f=new A,h=new A,d,p;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var x=t+1;for(d=0;d<=n;d++){var y=d/n;for(p=0;p<=t;p++){var v=p/t;e(v,y,u),i.push(u.x,u.y,u.z),v-s>=0?(e(v-s,y,c),f.subVectors(u,c)):(e(v+s,y,c),f.subVectors(c,u)),y-s>=0?(e(v,y-s,c),h.subVectors(u,c)):(e(v,y+s,c),h.subVectors(c,u)),l.crossVectors(f,h).normalize(),a.push(l.x,l.y,l.z),o.push(v,y)}}for(d=0;d<n;d++)for(p=0;p<t;p++){var m=d*x+p,w=d*x+p+1,g=(d+1)*x+p+1,_=(d+1)*x+p;r.push(m,w,_),r.push(w,g,_)}this.setIndex(r),this.addAttribute("position",new ie(i,3)),this.addAttribute("normal",new ie(a,3)),this.addAttribute("uv",new ie(o,2))}Dl.prototype=Object.create(se.prototype);Dl.prototype.constructor=Dl;function Bf(e,t,n,r){Oe.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new bn(e,t,n,r)),this.mergeVertices()}Bf.prototype=Object.create(Oe.prototype);Bf.prototype.constructor=Bf;function bn(e,t,n,r){se.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;var i=[],a=[];o(r),l(n),u(),this.addAttribute("position",new ie(i,3)),this.addAttribute("normal",new ie(i.slice(),3)),this.addAttribute("uv",new ie(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(v){for(var m=new A,w=new A,g=new A,_=0;_<t.length;_+=3)h(t[_+0],m),h(t[_+1],w),h(t[_+2],g),s(m,w,g,v)}function s(v,m,w,g){var _=Math.pow(2,g),b=[],E,S;for(E=0;E<=_;E++){b[E]=[];var O=v.clone().lerp(w,E/_),D=m.clone().lerp(w,E/_),L=_-E;for(S=0;S<=L;S++)S===0&&E===_?b[E][S]=O:b[E][S]=O.clone().lerp(D,S/L)}for(E=0;E<_;E++)for(S=0;S<2*(_-E)-1;S++){var R=Math.floor(S/2);S%2===0?(f(b[E][R+1]),f(b[E+1][R]),f(b[E][R])):(f(b[E][R+1]),f(b[E+1][R+1]),f(b[E+1][R]))}}function l(v){for(var m=new A,w=0;w<i.length;w+=3)m.x=i[w+0],m.y=i[w+1],m.z=i[w+2],m.normalize().multiplyScalar(v),i[w+0]=m.x,i[w+1]=m.y,i[w+2]=m.z}function u(){for(var v=new A,m=0;m<i.length;m+=3){v.x=i[m+0],v.y=i[m+1],v.z=i[m+2];var w=x(v)/2/Math.PI+.5,g=y(v)/Math.PI+.5;a.push(w,1-g)}d(),c()}function c(){for(var v=0;v<a.length;v+=6){var m=a[v+0],w=a[v+2],g=a[v+4],_=Math.max(m,w,g),b=Math.min(m,w,g);_>.9&&b<.1&&(m<.2&&(a[v+0]+=1),w<.2&&(a[v+2]+=1),g<.2&&(a[v+4]+=1))}}function f(v){i.push(v.x,v.y,v.z)}function h(v,m){var w=v*3;m.x=e[w+0],m.y=e[w+1],m.z=e[w+2]}function d(){for(var v=new A,m=new A,w=new A,g=new A,_=new X,b=new X,E=new X,S=0,O=0;S<i.length;S+=9,O+=6){v.set(i[S+0],i[S+1],i[S+2]),m.set(i[S+3],i[S+4],i[S+5]),w.set(i[S+6],i[S+7],i[S+8]),_.set(a[O+0],a[O+1]),b.set(a[O+2],a[O+3]),E.set(a[O+4],a[O+5]),g.copy(v).add(m).add(w).divideScalar(3);var D=x(g);p(_,O+0,v,D),p(b,O+2,m,D),p(E,O+4,w,D)}}function p(v,m,w,g){g<0&&v.x===1&&(a[m]=v.x-1),w.x===0&&w.z===0&&(a[m]=g/2/Math.PI+.5)}function x(v){return Math.atan2(v.z,-v.x)}function y(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}bn.prototype=Object.create(se.prototype);bn.prototype.constructor=bn;function Uf(e,t){Oe.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Il(e,t)),this.mergeVertices()}Uf.prototype=Object.create(Oe.prototype);Uf.prototype.constructor=Uf;function Il(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];bn.call(this,n,r,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}Il.prototype=Object.create(bn.prototype);Il.prototype.constructor=Il;function Gf(e,t){Oe.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Vo(e,t)),this.mergeVertices()}Gf.prototype=Object.create(Oe.prototype);Gf.prototype.constructor=Gf;function Vo(e,t){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];bn.call(this,n,r,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}Vo.prototype=Object.create(bn.prototype);Vo.prototype.constructor=Vo;function Vf(e,t){Oe.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Nl(e,t)),this.mergeVertices()}Vf.prototype=Object.create(Oe.prototype);Vf.prototype.constructor=Vf;function Nl(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];bn.call(this,r,i,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}Nl.prototype=Object.create(bn.prototype);Nl.prototype.constructor=Nl;function Hf(e,t){Oe.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new kl(e,t)),this.mergeVertices()}Hf.prototype=Object.create(Oe.prototype);Hf.prototype.constructor=Hf;function kl(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];bn.call(this,i,a,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}kl.prototype=Object.create(bn.prototype);kl.prototype.constructor=kl;function Wf(e,t,n,r,i,a){Oe.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},a!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new Ho(e,t,n,r,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}Wf.prototype=Object.create(Oe.prototype);Wf.prototype.constructor=Wf;function Ho(e,t,n,r,i){se.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o=new A,s=new A,l=new X,u=new A,c,f,h=[],d=[],p=[],x=[];y(),this.setIndex(x),this.addAttribute("position",new ie(h,3)),this.addAttribute("normal",new ie(d,3)),this.addAttribute("uv",new ie(p,2));function y(){for(c=0;c<t;c++)v(c);v(i===!1?t:0),w(),m()}function v(g){u=e.getPointAt(g/t,u);var _=a.normals[g],b=a.binormals[g];for(f=0;f<=r;f++){var E=f/r*Math.PI*2,S=Math.sin(E),O=-Math.cos(E);s.x=O*_.x+S*b.x,s.y=O*_.y+S*b.y,s.z=O*_.z+S*b.z,s.normalize(),d.push(s.x,s.y,s.z),o.x=u.x+n*s.x,o.y=u.y+n*s.y,o.z=u.z+n*s.z,h.push(o.x,o.y,o.z)}}function m(){for(f=1;f<=t;f++)for(c=1;c<=r;c++){var g=(r+1)*(f-1)+(c-1),_=(r+1)*f+(c-1),b=(r+1)*f+c,E=(r+1)*(f-1)+c;x.push(g,_,E),x.push(_,b,E)}}function w(){for(c=0;c<=t;c++)for(f=0;f<=r;f++)l.x=c/t,l.y=f/r,p.push(l.x,l.y)}}Ho.prototype=Object.create(se.prototype);Ho.prototype.constructor=Ho;Ho.prototype.toJSON=function(){var e=se.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e};function jf(e,t,n,r,i,a,o){Oe.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},o!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Fl(e,t,n,r,i,a)),this.mergeVertices()}jf.prototype=Object.create(Oe.prototype);jf.prototype.constructor=jf;function Fl(e,t,n,r,i,a){se.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,a=a||3;var o=[],s=[],l=[],u=[],c,f,h=new A,d=new A,p=new A,x=new A,y=new A,v=new A,m=new A;for(c=0;c<=n;++c){var w=c/n*i*Math.PI*2;for(L(w,i,a,e,p),L(w+.01,i,a,e,x),v.subVectors(x,p),m.addVectors(x,p),y.crossVectors(v,m),m.crossVectors(y,v),y.normalize(),m.normalize(),f=0;f<=r;++f){var g=f/r*Math.PI*2,_=-t*Math.cos(g),b=t*Math.sin(g);h.x=p.x+(_*m.x+b*y.x),h.y=p.y+(_*m.y+b*y.y),h.z=p.z+(_*m.z+b*y.z),s.push(h.x,h.y,h.z),d.subVectors(h,p).normalize(),l.push(d.x,d.y,d.z),u.push(c/n),u.push(f/r)}}for(f=1;f<=n;f++)for(c=1;c<=r;c++){var E=(r+1)*(f-1)+(c-1),S=(r+1)*f+(c-1),O=(r+1)*f+c,D=(r+1)*(f-1)+c;o.push(E,S,D),o.push(S,O,D)}this.setIndex(o),this.addAttribute("position",new ie(s,3)),this.addAttribute("normal",new ie(l,3)),this.addAttribute("uv",new ie(u,2));function L(R,N,B,G,W){var Y=Math.cos(R),z=Math.sin(R),V=B/N*R,j=Math.cos(V);W.x=G*(2+j)*.5*Y,W.y=G*(2+j)*z*.5,W.z=G*Math.sin(V)*.5}}Fl.prototype=Object.create(se.prototype);Fl.prototype.constructor=Fl;function Xf(e,t,n,r,i){Oe.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new zl(e,t,n,r,i)),this.mergeVertices()}Xf.prototype=Object.create(Oe.prototype);Xf.prototype.constructor=Xf;function zl(e,t,n,r,i){se.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||Math.PI*2;var a=[],o=[],s=[],l=[],u=new A,c=new A,f=new A,h,d;for(h=0;h<=n;h++)for(d=0;d<=r;d++){var p=d/r*i,x=h/n*Math.PI*2;c.x=(e+t*Math.cos(x))*Math.cos(p),c.y=(e+t*Math.cos(x))*Math.sin(p),c.z=t*Math.sin(x),o.push(c.x,c.y,c.z),u.x=e*Math.cos(p),u.y=e*Math.sin(p),f.subVectors(c,u).normalize(),s.push(f.x,f.y,f.z),l.push(d/r),l.push(h/n)}for(h=1;h<=n;h++)for(d=1;d<=r;d++){var y=(r+1)*h+d-1,v=(r+1)*(h-1)+d-1,m=(r+1)*(h-1)+d,w=(r+1)*h+d;a.push(y,v,w),a.push(v,m,w)}this.setIndex(a),this.addAttribute("position",new ie(o,3)),this.addAttribute("normal",new ie(s,3)),this.addAttribute("uv",new ie(l,2))}zl.prototype=Object.create(se.prototype);zl.prototype.constructor=zl;var c3={triangulate:function(e,t,n){n=n||2;var r=t&&t.length,i=r?t[0]*n:e.length,a=W1(e,0,i,n,!0),o=[];if(!a||a.next===a.prev)return o;var s,l,u,c,f,h,d;if(r&&(a=v3(e,t,a,n)),e.length>80*n){s=u=e[0],l=c=e[1];for(var p=n;p<i;p+=n)f=e[p],h=e[p+1],f<s&&(s=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);d=Math.max(u-s,c-l),d=d!==0?1/d:0}return Ul(a,o,n,s,l,d),o}};function W1(e,t,n,r,i){var a,o;if(i===S3(e,t,n,r)>0)for(a=t;a<n;a+=r)o=X0(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=X0(a,e[a],e[a+1],o);return o&&da(o,o.next)&&(Vl(o),o=o.next),o}function Bl(e,t){if(!e)return e;t||(t=e);var n=e,r;do if(r=!1,!n.steiner&&(da(n,n.next)||Nt(n.prev,n,n.next)===0)){if(Vl(n),n=t=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function Ul(e,t,n,r,i,a,o){if(!!e){!o&&a&&x3(e,r,i,a);for(var s=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,a?h3(e,r,i,a):f3(e)){t.push(l.i/n),t.push(e.i/n),t.push(u.i/n),Vl(e),e=u.next,s=u.next;continue}if(e=u,e===s){o?o===1?(e=d3(e,t,n),Ul(e,t,n,r,i,a,2)):o===2&&p3(e,t,n,r,i,a):Ul(Bl(e),t,n,r,i,a,1);break}}}}function f3(e){var t=e.prev,n=e,r=e.next;if(Nt(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(xo(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Nt(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function h3(e,t,n,r){var i=e.prev,a=e,o=e.next;if(Nt(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,u=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,f=yv(s,l,t,n,r),h=yv(u,c,t,n,r),d=e.prevZ,p=e.nextZ;d&&d.z>=f&&p&&p.z<=h;){if(d!==e.prev&&d!==e.next&&xo(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Nt(d.prev,d,d.next)>=0||(d=d.prevZ,p!==e.prev&&p!==e.next&&xo(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Nt(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;d&&d.z>=f;){if(d!==e.prev&&d!==e.next&&xo(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Nt(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&xo(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Nt(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function d3(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!da(i,a)&&j1(i,r,r.next,a)&&Gl(i,a)&&Gl(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),Vl(r),Vl(r.next),r=e=a),r=r.next}while(r!==e);return r}function p3(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&M3(o,s)){var l=X1(o,s);o=Bl(o,o.next),l=Bl(l,l.next),Ul(o,t,n,r,i,a),Ul(l,t,n,r,i,a);return}s=s.next}o=o.next}while(o!==e)}function v3(e,t,n,r){var i=[],a,o,s,l,u;for(a=0,o=t.length;a<o;a++)s=t[a]*r,l=a<o-1?t[a+1]*r:e.length,u=W1(e,s,l,r,!1),u===u.next&&(u.steiner=!0),i.push(_3(u));for(i.sort(m3),a=0;a<i.length;a++)g3(i[a],n),n=Bl(n,n.next);return n}function m3(e,t){return e.x-t.x}function g3(e,t){if(t=y3(e,t),t){var n=X1(t,e);Bl(n,n.next)}}function y3(e,t){var n=t,r=e.x,i=e.y,a=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var s=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&s>a){if(a=s,s===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(r===a)return o.prev;var l=o,u=o.x,c=o.y,f=1/0,h;for(n=o.next;n!==l;)r>=n.x&&n.x>=u&&r!==n.x&&xo(i<c?r:a,i,u,c,i<c?a:r,i,n.x,n.y)&&(h=Math.abs(i-n.y)/(r-n.x),(h<f||h===f&&n.x>o.x)&&Gl(n,e)&&(o=n,f=h)),n=n.next;return o}function x3(e,t,n,r){var i=e;do i.z===null&&(i.z=yv(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,w3(i)}function w3(e){var t,n,r,i,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ,!!r);t++);for(l=u;s>0||l>0&&r;)s!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(o>1);return e}function yv(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function _3(e){var t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function xo(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function M3(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!b3(e,t)&&Gl(e,t)&&Gl(t,e)&&E3(e,t)}function Nt(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function da(e,t){return e.x===t.x&&e.y===t.y}function j1(e,t,n,r){return da(e,n)&&da(t,r)||da(e,r)&&da(n,t)?!0:Nt(e,t,n)>0!=Nt(e,t,r)>0&&Nt(n,r,e)>0!=Nt(n,r,t)>0}function b3(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&j1(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function Gl(e,t){return Nt(e.prev,e,e.next)<0?Nt(e,t,e.next)>=0&&Nt(e,e.prev,t)>=0:Nt(e,t,e.prev)<0||Nt(e,e.next,t)<0}function E3(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}function X1(e,t){var n=new xv(e.i,e.x,e.y),r=new xv(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function X0(e,t,n,r){var i=new xv(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Vl(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function xv(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function S3(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}var Ni={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return n*.5},isClockWise:function(e){return Ni.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];q0(e),Y0(n,e);var a=e.length;t.forEach(q0);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,Y0(n,t[o]);for(var s=c3.triangulate(n,r),o=0;o<s.length;o+=3)i.push(s.slice(o,o+3));return i}};function q0(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Y0(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Wo(e,t){Oe.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new ti(e,t)),this.mergeVertices()}Wo.prototype=Object.create(Oe.prototype);Wo.prototype.constructor=Wo;Wo.prototype.toJSON=function(){var e=Oe.prototype.toJSON.call(this),t=this.parameters.shapes,n=this.parameters.options;return q1(t,n,e)};function ti(e,t){se.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,r=[],i=[],a=0,o=e.length;a<o;a++){var s=e[a];l(s)}this.addAttribute("position",new ie(r,3)),this.addAttribute("uv",new ie(i,2)),this.computeVertexNormals();function l(u){var c=[],f=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:100,p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,x=t.bevelThickness!==void 0?t.bevelThickness:6,y=t.bevelSize!==void 0?t.bevelSize:x-2,v=t.bevelOffset!==void 0?t.bevelOffset:0,m=t.bevelSegments!==void 0?t.bevelSegments:3,w=t.extrudePath,g=t.UVGenerator!==void 0?t.UVGenerator:T3;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),d=t.amount);var _,b=!1,E,S,O,D;w&&(_=w.getSpacedPoints(h),b=!0,p=!1,E=w.computeFrenetFrames(h,!1),S=new A,O=new A,D=new A),p||(m=0,x=0,y=0,v=0);var L,R,N,B=u.extractPoints(f),G=B.shape,W=B.holes,Y=!Ni.isClockWise(G);if(Y)for(G=G.reverse(),R=0,N=W.length;R<N;R++)L=W[R],Ni.isClockWise(L)&&(W[R]=L.reverse());var z=Ni.triangulateShape(G,W),V=G;for(R=0,N=W.length;R<N;R++)L=W[R],G=G.concat(L);function j(Te,k,ne){return k||console.error("THREE.ExtrudeGeometry: vec does not exist"),k.clone().multiplyScalar(ne).add(Te)}var q,K,Pe,H,ue,te=G.length,de,xe=z.length;function Ye(Te,k,ne){var me,Ce,ge,$e=Te.x-k.x,U=Te.y-k.y,Q=ne.x-Te.x,ce=ne.y-Te.y,_e=$e*$e+U*U,Ae=$e*ce-U*Q;if(Math.abs(Ae)>Number.EPSILON){var Ke=Math.sqrt(_e),bt=Math.sqrt(Q*Q+ce*ce),Ln=k.x-U/Ke,tn=k.y+$e/Ke,Hn=ne.x-ce/bt,Xi=ne.y+Q/bt,Rr=((Hn-Ln)*ce-(Xi-tn)*Q)/($e*ce-U*Q);me=Ln+$e*Rr-Te.x,Ce=tn+U*Rr-Te.y;var Wn=me*me+Ce*Ce;if(Wn<=2)return new X(me,Ce);ge=Math.sqrt(Wn/2)}else{var ui=!1;$e>Number.EPSILON?Q>Number.EPSILON&&(ui=!0):$e<-Number.EPSILON?Q<-Number.EPSILON&&(ui=!0):Math.sign(U)===Math.sign(ce)&&(ui=!0),ui?(me=-U,Ce=$e,ge=Math.sqrt(_e)):(me=$e,Ce=U,ge=Math.sqrt(_e/2))}return new X(me/ge,Ce/ge)}for(var C=[],T=0,$=V.length,ee=$-1,be=T+1;T<$;T++,ee++,be++)ee===$&&(ee=0),be===$&&(be=0),C[T]=Ye(V[T],V[ee],V[be]);var pe=[],ae,we=C.concat();for(R=0,N=W.length;R<N;R++){for(L=W[R],ae=[],T=0,$=L.length,ee=$-1,be=T+1;T<$;T++,ee++,be++)ee===$&&(ee=0),be===$&&(be=0),ae[T]=Ye(L[T],L[ee],L[be]);pe.push(ae),we=we.concat(ae)}for(q=0;q<m;q++){for(Pe=q/m,H=x*Math.cos(Pe*Math.PI/2),K=y*Math.sin(Pe*Math.PI/2)+v,T=0,$=V.length;T<$;T++)ue=j(V[T],C[T],K),ve(ue.x,ue.y,-H);for(R=0,N=W.length;R<N;R++)for(L=W[R],ae=pe[R],T=0,$=L.length;T<$;T++)ue=j(L[T],ae[T],K),ve(ue.x,ue.y,-H)}for(K=y+v,T=0;T<te;T++)ue=p?j(G[T],we[T],K):G[T],b?(O.copy(E.normals[0]).multiplyScalar(ue.x),S.copy(E.binormals[0]).multiplyScalar(ue.y),D.copy(_[0]).add(O).add(S),ve(D.x,D.y,D.z)):ve(ue.x,ue.y,0);var Le;for(Le=1;Le<=h;Le++)for(T=0;T<te;T++)ue=p?j(G[T],we[T],K):G[T],b?(O.copy(E.normals[Le]).multiplyScalar(ue.x),S.copy(E.binormals[Le]).multiplyScalar(ue.y),D.copy(_[Le]).add(O).add(S),ve(D.x,D.y,D.z)):ve(ue.x,ue.y,d/h*Le);for(q=m-1;q>=0;q--){for(Pe=q/m,H=x*Math.cos(Pe*Math.PI/2),K=y*Math.sin(Pe*Math.PI/2)+v,T=0,$=V.length;T<$;T++)ue=j(V[T],C[T],K),ve(ue.x,ue.y,d+H);for(R=0,N=W.length;R<N;R++)for(L=W[R],ae=pe[R],T=0,$=L.length;T<$;T++)ue=j(L[T],ae[T],K),b?ve(ue.x,ue.y+_[h-1].y,_[h-1].x+H):ve(ue.x,ue.y,d+H)}Ue(),ke();function Ue(){var Te=r.length/3;if(p){var k=0,ne=te*k;for(T=0;T<xe;T++)de=z[T],I(de[2]+ne,de[1]+ne,de[0]+ne);for(k=h+m*2,ne=te*k,T=0;T<xe;T++)de=z[T],I(de[0]+ne,de[1]+ne,de[2]+ne)}else{for(T=0;T<xe;T++)de=z[T],I(de[2],de[1],de[0]);for(T=0;T<xe;T++)de=z[T],I(de[0]+te*h,de[1]+te*h,de[2]+te*h)}n.addGroup(Te,r.length/3-Te,0)}function ke(){var Te=r.length/3,k=0;for(Ve(V,k),k+=V.length,R=0,N=W.length;R<N;R++)L=W[R],Ve(L,k),k+=L.length;n.addGroup(Te,r.length/3-Te,1)}function Ve(Te,k){var ne,me;for(T=Te.length;--T>=0;){ne=T,me=T-1,me<0&&(me=Te.length-1);var Ce=0,ge=h+m*2;for(Ce=0;Ce<ge;Ce++){var $e=te*Ce,U=te*(Ce+1),Q=k+ne+$e,ce=k+me+$e,_e=k+me+U,Ae=k+ne+U;le(Q,ce,_e,Ae)}}}function ve(Te,k,ne){c.push(Te),c.push(k),c.push(ne)}function I(Te,k,ne){Me(Te),Me(k),Me(ne);var me=r.length/3,Ce=g.generateTopUV(n,r,me-3,me-2,me-1);ze(Ce[0]),ze(Ce[1]),ze(Ce[2])}function le(Te,k,ne,me){Me(Te),Me(k),Me(me),Me(k),Me(ne),Me(me);var Ce=r.length/3,ge=g.generateSideWallUV(n,r,Ce-6,Ce-3,Ce-2,Ce-1);ze(ge[0]),ze(ge[1]),ze(ge[3]),ze(ge[1]),ze(ge[2]),ze(ge[3])}function Me(Te){r.push(c[Te*3+0]),r.push(c[Te*3+1]),r.push(c[Te*3+2])}function ze(Te){i.push(Te.x),i.push(Te.y)}}}ti.prototype=Object.create(se.prototype);ti.prototype.constructor=ti;ti.prototype.toJSON=function(){var e=se.prototype.toJSON.call(this),t=this.parameters.shapes,n=this.parameters.options;return q1(t,n,e)};var T3={generateTopUV:function(e,t,n,r,i){var a=t[n*3],o=t[n*3+1],s=t[r*3],l=t[r*3+1],u=t[i*3],c=t[i*3+1];return[new X(a,o),new X(s,l),new X(u,c)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[n*3],s=t[n*3+1],l=t[n*3+2],u=t[r*3],c=t[r*3+1],f=t[r*3+2],h=t[i*3],d=t[i*3+1],p=t[i*3+2],x=t[a*3],y=t[a*3+1],v=t[a*3+2];return Math.abs(s-c)<.01?[new X(o,1-l),new X(u,1-f),new X(h,1-p),new X(x,1-v)]:[new X(s,1-l),new X(c,1-f),new X(d,1-p),new X(y,1-v)]}};function q1(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return t.extrudePath!==void 0&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function qf(e,t){Oe.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Hl(e,t)),this.mergeVertices()}qf.prototype=Object.create(Oe.prototype);qf.prototype.constructor=qf;function Hl(e,t){t=t||{};var n=t.font;if(!(n&&n.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Oe;var r=n.generateShapes(e,t.size);t.depth=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),ti.call(this,r,t),this.type="TextBufferGeometry"}Hl.prototype=Object.create(ti.prototype);Hl.prototype.constructor=Hl;function Xr(e,t,n,r,i,a,o){Oe.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Oa(e,t,n,r,i,a,o)),this.mergeVertices()}Xr.prototype=Object.create(Oe.prototype);Xr.prototype.constructor=Xr;function Oa(e,t,n,r,i,a,o){se.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=r!==void 0?r:0,i=i!==void 0?i:Math.PI*2,a=a!==void 0?a:0,o=o!==void 0?o:Math.PI;var s=Math.min(a+o,Math.PI),l,u,c=0,f=[],h=new A,d=new A,p=[],x=[],y=[],v=[];for(u=0;u<=n;u++){var m=[],w=u/n,g=0;for(u==0&&a==0?g=.5/t:u==n&&s==Math.PI&&(g=-.5/t),l=0;l<=t;l++){var _=l/t;h.x=-e*Math.cos(r+_*i)*Math.sin(a+w*o),h.y=e*Math.cos(a+w*o),h.z=e*Math.sin(r+_*i)*Math.sin(a+w*o),x.push(h.x,h.y,h.z),d.copy(h).normalize(),y.push(d.x,d.y,d.z),v.push(_+g,1-w),m.push(c++)}f.push(m)}for(u=0;u<n;u++)for(l=0;l<t;l++){var b=f[u][l+1],E=f[u][l],S=f[u+1][l],O=f[u+1][l+1];(u!==0||a>0)&&p.push(b,E,O),(u!==n-1||s<Math.PI)&&p.push(E,S,O)}this.setIndex(p),this.addAttribute("position",new ie(x,3)),this.addAttribute("normal",new ie(y,3)),this.addAttribute("uv",new ie(v,2))}Oa.prototype=Object.create(se.prototype);Oa.prototype.constructor=Oa;function Yf(e,t,n,r,i,a){Oe.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new Wl(e,t,n,r,i,a)),this.mergeVertices()}Yf.prototype=Object.create(Oe.prototype);Yf.prototype.constructor=Yf;function Wl(e,t,n,r,i,a){se.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},e=e||.5,t=t||1,i=i!==void 0?i:0,a=a!==void 0?a:Math.PI*2,n=n!==void 0?Math.max(3,n):8,r=r!==void 0?Math.max(1,r):1;var o=[],s=[],l=[],u=[],c,f=e,h=(t-e)/r,d=new A,p=new X,x,y;for(x=0;x<=r;x++){for(y=0;y<=n;y++)c=i+y/n*a,d.x=f*Math.cos(c),d.y=f*Math.sin(c),s.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,u.push(p.x,p.y);f+=h}for(x=0;x<r;x++){var v=x*(n+1);for(y=0;y<n;y++){c=y+v;var m=c,w=c+n+1,g=c+n+2,_=c+1;o.push(m,w,_),o.push(w,g,_)}}this.setIndex(o),this.addAttribute("position",new ie(s,3)),this.addAttribute("normal",new ie(l,3)),this.addAttribute("uv",new ie(u,2))}Wl.prototype=Object.create(se.prototype);Wl.prototype.constructor=Wl;function $f(e,t,n,r){Oe.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new jl(e,t,n,r)),this.mergeVertices()}$f.prototype=Object.create(Oe.prototype);$f.prototype.constructor=$f;function jl(e,t,n,r){se.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||Math.PI*2,r=Be.clamp(r,0,Math.PI*2);var i=[],a=[],o=[],s,l=1/t,u=new A,c=new X,f,h;for(f=0;f<=t;f++){var d=n+f*l*r,p=Math.sin(d),x=Math.cos(d);for(h=0;h<=e.length-1;h++)u.x=e[h].x*p,u.y=e[h].y,u.z=e[h].x*x,a.push(u.x,u.y,u.z),c.x=f/t,c.y=h/(e.length-1),o.push(c.x,c.y)}for(f=0;f<t;f++)for(h=0;h<e.length-1;h++){s=h+f*e.length;var y=s,v=s+e.length,m=s+e.length+1,w=s+1;i.push(y,v,w),i.push(v,m,w)}if(this.setIndex(i),this.addAttribute("position",new ie(a,3)),this.addAttribute("uv",new ie(o,2)),this.computeVertexNormals(),r===Math.PI*2){var g=this.attributes.normal.array,_=new A,b=new A,E=new A;for(s=t*e.length*3,f=0,h=0;f<e.length;f++,h+=3)_.x=g[h+0],_.y=g[h+1],_.z=g[h+2],b.x=g[s+h+0],b.y=g[s+h+1],b.z=g[s+h+2],E.addVectors(_,b).normalize(),g[h+0]=g[s+h+0]=E.x,g[h+1]=g[s+h+1]=E.y,g[h+2]=g[s+h+2]=E.z}}jl.prototype=Object.create(se.prototype);jl.prototype.constructor=jl;function jo(e,t){Oe.call(this),this.type="ShapeGeometry",typeof t=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Xo(e,t)),this.mergeVertices()}jo.prototype=Object.create(Oe.prototype);jo.prototype.constructor=jo;jo.prototype.toJSON=function(){var e=Oe.prototype.toJSON.call(this),t=this.parameters.shapes;return Y1(t,e)};function Xo(e,t){se.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],a=[],o=0,s=0;if(Array.isArray(e)===!1)u(e);else for(var l=0;l<e.length;l++)u(e[l]),this.addGroup(o,s,l),o+=s,s=0;this.setIndex(n),this.addAttribute("position",new ie(r,3)),this.addAttribute("normal",new ie(i,3)),this.addAttribute("uv",new ie(a,2));function u(c){var f,h,d,p=r.length/3,x=c.extractPoints(t),y=x.shape,v=x.holes;for(Ni.isClockWise(y)===!1&&(y=y.reverse()),f=0,h=v.length;f<h;f++)d=v[f],Ni.isClockWise(d)===!0&&(v[f]=d.reverse());var m=Ni.triangulateShape(y,v);for(f=0,h=v.length;f<h;f++)d=v[f],y=y.concat(d);for(f=0,h=y.length;f<h;f++){var w=y[f];r.push(w.x,w.y,0),i.push(0,0,1),a.push(w.x,w.y)}for(f=0,h=m.length;f<h;f++){var g=m[f],_=g[0]+p,b=g[1]+p,E=g[2]+p;n.push(_,b,E),s+=3}}}Xo.prototype=Object.create(se.prototype);Xo.prototype.constructor=Xo;Xo.prototype.toJSON=function(){var e=se.prototype.toJSON.call(this),t=this.parameters.shapes;return Y1(t,e)};function Y1(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function Zf(e,t){se.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=t!==void 0?t:1;var n=[],r=Math.cos(Be.DEG2RAD*t),i=[0,0],a={},o,s,l,u=["a","b","c"],c;e.isBufferGeometry?(c=new Oe,c.fromBufferGeometry(e)):c=e.clone(),c.mergeVertices(),c.computeFaceNormals();for(var f=c.vertices,h=c.faces,d=0,p=h.length;d<p;d++)for(var x=h[d],y=0;y<3;y++)o=x[u[y]],s=x[u[(y+1)%3]],i[0]=Math.min(o,s),i[1]=Math.max(o,s),l=i[0]+","+i[1],a[l]===void 0?a[l]={index1:i[0],index2:i[1],face1:d,face2:void 0}:a[l].face2=d;for(l in a){var v=a[l];if(v.face2===void 0||h[v.face1].normal.dot(h[v.face2].normal)<=r){var m=f[v.index1];n.push(m.x,m.y,m.z),m=f[v.index2],n.push(m.x,m.y,m.z)}}this.addAttribute("position",new ie(n,3))}Zf.prototype=Object.create(se.prototype);Zf.prototype.constructor=Zf;function qo(e,t,n,r,i,a,o,s){Oe.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new Bi(e,t,n,r,i,a,o,s)),this.mergeVertices()}qo.prototype=Object.create(Oe.prototype);qo.prototype.constructor=qo;function Bi(e,t,n,r,i,a,o,s){se.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};var l=this;e=e!==void 0?e:1,t=t!==void 0?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,a=a!==void 0?a:!1,o=o!==void 0?o:0,s=s!==void 0?s:Math.PI*2;var u=[],c=[],f=[],h=[],d=0,p=[],x=n/2,y=0;v(),a===!1&&(e>0&&m(!0),t>0&&m(!1)),this.setIndex(u),this.addAttribute("position",new ie(c,3)),this.addAttribute("normal",new ie(f,3)),this.addAttribute("uv",new ie(h,2));function v(){var w,g,_=new A,b=new A,E=0,S=(t-e)/n;for(g=0;g<=i;g++){var O=[],D=g/i,L=D*(t-e)+e;for(w=0;w<=r;w++){var R=w/r,N=R*s+o,B=Math.sin(N),G=Math.cos(N);b.x=L*B,b.y=-D*n+x,b.z=L*G,c.push(b.x,b.y,b.z),_.set(B,S,G).normalize(),f.push(_.x,_.y,_.z),h.push(R,1-D),O.push(d++)}p.push(O)}for(w=0;w<r;w++)for(g=0;g<i;g++){var W=p[g][w],Y=p[g+1][w],z=p[g+1][w+1],V=p[g][w+1];u.push(W,Y,V),u.push(Y,z,V),E+=6}l.addGroup(y,E,0),y+=E}function m(w){var g,_,b,E=new X,S=new A,O=0,D=w===!0?e:t,L=w===!0?1:-1;for(_=d,g=1;g<=r;g++)c.push(0,x*L,0),f.push(0,L,0),h.push(.5,.5),d++;for(b=d,g=0;g<=r;g++){var R=g/r,N=R*s+o,B=Math.cos(N),G=Math.sin(N);S.x=D*G,S.y=x*L,S.z=D*B,c.push(S.x,S.y,S.z),f.push(0,L,0),E.x=B*.5+.5,E.y=G*.5*L+.5,h.push(E.x,E.y),d++}for(g=0;g<r;g++){var W=_+g,Y=b+g;w===!0?u.push(Y,Y+1,W):u.push(Y+1,Y,W),O+=3}l.addGroup(y,O,w===!0?1:2),y+=O}}Bi.prototype=Object.create(se.prototype);Bi.prototype.constructor=Bi;function Jf(e,t,n,r,i,a,o){qo.call(this,0,e,t,n,r,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}Jf.prototype=Object.create(qo.prototype);Jf.prototype.constructor=Jf;function Qf(e,t,n,r,i,a,o){Bi.call(this,0,e,t,n,r,i,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}Qf.prototype=Object.create(Bi.prototype);Qf.prototype.constructor=Qf;function Kf(e,t,n,r){Oe.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Xl(e,t,n,r)),this.mergeVertices()}Kf.prototype=Object.create(Oe.prototype);Kf.prototype.constructor=Kf;function Xl(e,t,n,r){se.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=t!==void 0?Math.max(3,t):8,n=n!==void 0?n:0,r=r!==void 0?r:Math.PI*2;var i=[],a=[],o=[],s=[],l,u,c=new A,f=new X;for(a.push(0,0,0),o.push(0,0,1),s.push(.5,.5),u=0,l=3;u<=t;u++,l+=3){var h=n+u/t*r;c.x=e*Math.cos(h),c.y=e*Math.sin(h),a.push(c.x,c.y,c.z),o.push(0,0,1),f.x=(a[l]/e+1)/2,f.y=(a[l+1]/e+1)/2,s.push(f.x,f.y)}for(l=1;l<=t;l++)i.push(l,l+1,0);this.setIndex(i),this.addAttribute("position",new ie(a,3)),this.addAttribute("normal",new ie(o,3)),this.addAttribute("uv",new ie(s,2))}Xl.prototype=Object.create(se.prototype);Xl.prototype.constructor=Xl;var Yt=Object.freeze({WireframeGeometry:Ff,ParametricGeometry:zf,ParametricBufferGeometry:Dl,TetrahedronGeometry:Uf,TetrahedronBufferGeometry:Il,OctahedronGeometry:Gf,OctahedronBufferGeometry:Vo,IcosahedronGeometry:Vf,IcosahedronBufferGeometry:Nl,DodecahedronGeometry:Hf,DodecahedronBufferGeometry:kl,PolyhedronGeometry:Bf,PolyhedronBufferGeometry:bn,TubeGeometry:Wf,TubeBufferGeometry:Ho,TorusKnotGeometry:jf,TorusKnotBufferGeometry:Fl,TorusGeometry:Xf,TorusBufferGeometry:zl,TextGeometry:qf,TextBufferGeometry:Hl,SphereGeometry:Xr,SphereBufferGeometry:Oa,RingGeometry:Yf,RingBufferGeometry:Wl,PlaneGeometry:Cf,PlaneBufferGeometry:Uo,LatheGeometry:$f,LatheBufferGeometry:jl,ShapeGeometry:jo,ShapeBufferGeometry:Xo,ExtrudeGeometry:Wo,ExtrudeBufferGeometry:ti,EdgesGeometry:Zf,ConeGeometry:Jf,ConeBufferGeometry:Qf,CylinderGeometry:qo,CylinderBufferGeometry:Bi,CircleGeometry:Kf,CircleBufferGeometry:Xl,BoxGeometry:D1,BoxBufferGeometry:Fh});function Yo(e){Ne.call(this),this.type="ShadowMaterial",this.color=new he(0),this.transparent=!0,this.setValues(e)}Yo.prototype=Object.create(Ne.prototype);Yo.prototype.constructor=Yo;Yo.prototype.isShadowMaterial=!0;Yo.prototype.copy=function(e){return Ne.prototype.copy.call(this,e),this.color.copy(e.color),this};function ql(e){jt.call(this,e),this.type="RawShaderMaterial"}ql.prototype=Object.create(jt.prototype);ql.prototype.constructor=ql;ql.prototype.isRawShaderMaterial=!0;function ni(e){Ne.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new he(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new he(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mu,this.normalScale=new X(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}ni.prototype=Object.create(Ne.prototype);ni.prototype.constructor=ni;ni.prototype.isMeshStandardMaterial=!0;ni.prototype.copy=function(e){return Ne.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function $o(e){ni.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new X(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(e)}$o.prototype=Object.create(ni.prototype);$o.prototype.constructor=$o;$o.prototype.isMeshPhysicalMaterial=!0;$o.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearcoat=e.clearcoat,this.clearcoatRoughness=e.clearcoatRoughness,e.sheen?this.sheen=(this.sheen||new he).copy(e.sheen):this.sheen=null,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.transparency=e.transparency,this};function Er(e){Ne.call(this),this.type="MeshPhongMaterial",this.color=new he(16777215),this.specular=new he(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new he(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mu,this.normalScale=new X(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Nh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Er.prototype=Object.create(Ne.prototype);Er.prototype.constructor=Er;Er.prototype.isMeshPhongMaterial=!0;Er.prototype.copy=function(e){return Ne.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Zo(e){Er.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}Zo.prototype=Object.create(Er.prototype);Zo.prototype.constructor=Zo;Zo.prototype.isMeshToonMaterial=!0;Zo.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this};function Jo(e){Ne.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mu,this.normalScale=new X(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Jo.prototype=Object.create(Ne.prototype);Jo.prototype.constructor=Jo;Jo.prototype.isMeshNormalMaterial=!0;Jo.prototype.copy=function(e){return Ne.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Yr(e){Ne.call(this),this.type="MeshLambertMaterial",this.color=new he(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new he(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Nh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Yr.prototype=Object.create(Ne.prototype);Yr.prototype.constructor=Yr;Yr.prototype.isMeshLambertMaterial=!0;Yr.prototype.copy=function(e){return Ne.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Qo(e){Ne.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new he(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mu,this.normalScale=new X(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Qo.prototype=Object.create(Ne.prototype);Qo.prototype.constructor=Qo;Qo.prototype.isMeshMatcapMaterial=!0;Qo.prototype.copy=function(e){return Ne.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Ko(e){st.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Ko.prototype=Object.create(st.prototype);Ko.prototype.constructor=Ko;Ko.prototype.isLineDashedMaterial=!0;Ko.prototype.copy=function(e){return st.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var P3=Object.freeze({ShadowMaterial:Yo,SpriteMaterial:Ca,RawShaderMaterial:ql,ShaderMaterial:jt,PointsMaterial:Ra,MeshPhysicalMaterial:$o,MeshStandardMaterial:ni,MeshPhongMaterial:Er,MeshToonMaterial:Zo,MeshNormalMaterial:Jo,MeshLambertMaterial:Yr,MeshDepthMaterial:Pa,MeshDistanceMaterial:Aa,MeshBasicMaterial:Qt,MeshMatcapMaterial:Qo,LineDashedMaterial:Ko,LineBasicMaterial:st,Material:Ne}),Dt={arraySlice:function(e,t,n){return Dt.isTypedArray(e)?new e.constructor(e.subarray(t,n!==void 0?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(a,o){return e[a]-e[o]}for(var n=e.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(t),r},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,l=0;l!==t;++l)i[o++]=e[s+l];return i},flattenJSON:function(e,t,n,r){for(var i=1,a=e[0];a!==void 0&&a[r]===void 0;)a=e[i++];if(a!==void 0){var o=a[r];if(o!==void 0)if(Array.isArray(o))do o=a[r],o!==void 0&&(t.push(a.time),n.push.apply(n,o)),a=e[i++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[r],o!==void 0&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++];while(a!==void 0);else do o=a[r],o!==void 0&&(t.push(a.time),n.push(o)),a=e[i++];while(a!==void 0)}}};function Nn(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}Object.assign(Nn.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(r===void 0){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}a=t.length;break n}if(!(e>=i)){var s=t[1];e<s&&(n=2,i=s);for(var o=n-2;;){if(i===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}a=n,n=0;break n}break e}for(;n<a;){var l=n+a>>>1;e<t[l]?a=l:n=l+1}if(r=t[n],i=t[n-1],i===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===void 0)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Nn.prototype,{beforeStart_:Nn.prototype.copySampleValue_,afterEnd_:Nn.prototype.copySampleValue_});function wv(e,t,n,r){Nn.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}wv.prototype=Object.assign(Object.create(Nn.prototype),{constructor:wv,DefaultSettings_:{endingStart:Fo,endingEnd:Fo},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case vo:i=e,o=2*t-n;break;case Af:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(s===void 0)switch(this.getSettings_().endingEnd){case vo:a=e,s=2*n-t;break;case Af:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var l=(n-t)*.5,u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=a*u},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,f=this._weightPrev,h=this._weightNext,d=(n-t)/(r-t),p=d*d,x=p*d,y=-f*x+2*f*p-f*d,v=(1+f)*x+(-1.5-2*f)*p+(-.5+f)*d+1,m=(-1-h)*x+(1.5+h)*p+.5*d,w=h*x-h*p,g=0;g!==o;++g)i[g]=y*a[u+g]+v*a[l+g]+m*a[s+g]+w*a[c+g];return i}});function eh(e,t,n,r){Nn.call(this,e,t,n,r)}eh.prototype=Object.assign(Object.create(Nn.prototype),{constructor:eh,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(r-t),c=1-u,f=0;f!==o;++f)i[f]=a[l+f]*c+a[s+f]*u;return i}});function _v(e,t,n,r){Nn.call(this,e,t,n,r)}_v.prototype=Object.assign(Object.create(Nn.prototype),{constructor:_v,interpolate_:function(e){return this.copySampleValue_(e-1)}});function qt(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Dt.convertArray(t,this.TimeBufferType),this.values=Dt.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}Object.assign(qt,{toJSON:function(e){var t=e.constructor,n;if(t.toJSON!==void 0)n=t.toJSON(e);else{n={name:e.name,times:Dt.convertArray(e.times,Array),values:Dt.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}});Object.assign(qt.prototype,{constructor:qt,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:$c,InterpolantFactoryMethodDiscrete:function(e){return new _v(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new eh(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new wv(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case Pf:t=this.InterpolantFactoryMethodDiscrete;break;case $c:t=this.InterpolantFactoryMethodLinear;break;case Md:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Pf;case this.InterpolantFactoryMethodLinear:return $c;case this.InterpolantFactoryMethodSmooth:return Md}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(e!==1)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;a!==-1&&n[a]>t;)--a;if(++a,i!==0||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);var o=this.getValueSize();this.times=Dt.arraySlice(n,i,a),this.values=Dt.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;i===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if(typeof s=="number"&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(a!==null&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(r!==void 0&&Dt.isTypedArray(r))for(var o=0,l=r.length;o!==l;++o){var u=r[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===Md,i=1,a=e.length-1,o=1;o<a;++o){var s=!1,l=e[o],u=e[o+1];if(l!==u&&(o!==1||l!==l[0]))if(r)s=!0;else for(var c=o*n,f=c-n,h=c+n,d=0;d!==n;++d){var p=t[c+d];if(p!==t[f+d]||p!==t[h+d]){s=!0;break}}if(s){if(o!==i){e[i]=e[o];for(var x=o*n,y=i*n,d=0;d!==n;++d)t[y+d]=t[x+d]}++i}}if(a>0){e[i]=e[a];for(var x=a*n,y=i*n,d=0;d!==n;++d)t[y+d]=t[x+d];++i}return i!==e.length&&(this.times=Dt.arraySlice(e,0,i),this.values=Dt.arraySlice(t,0,i*n)),this},clone:function(){var e=Dt.arraySlice(this.times,0),t=Dt.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}});function Mv(e,t,n){qt.call(this,e,t,n)}Mv.prototype=Object.assign(Object.create(qt.prototype),{constructor:Mv,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Pf,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function bv(e,t,n,r){qt.call(this,e,t,n,r)}bv.prototype=Object.assign(Object.create(qt.prototype),{constructor:bv,ValueTypeName:"color"});function Yl(e,t,n,r){qt.call(this,e,t,n,r)}Yl.prototype=Object.assign(Object.create(qt.prototype),{constructor:Yl,ValueTypeName:"number"});function Ev(e,t,n,r){Nn.call(this,e,t,n,r)}Ev.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Ev,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=(n-t)/(r-t),u=s+o;s!==u;s+=4)Bt.slerpFlat(i,0,a,s-o,a,s,l);return i}});function th(e,t,n,r){qt.call(this,e,t,n,r)}th.prototype=Object.assign(Object.create(qt.prototype),{constructor:th,ValueTypeName:"quaternion",DefaultInterpolation:$c,InterpolantFactoryMethodLinear:function(e){return new Ev(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0});function Sv(e,t,n,r){qt.call(this,e,t,n,r)}Sv.prototype=Object.assign(Object.create(qt.prototype),{constructor:Sv,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Pf,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function $l(e,t,n,r){qt.call(this,e,t,n,r)}$l.prototype=Object.assign(Object.create(qt.prototype),{constructor:$l,ValueTypeName:"vector"});function rr(e,t,n){this.name=e,this.tracks=n,this.duration=t!==void 0?t:-1,this.uuid=Be.generateUUID(),this.duration<0&&this.resetDuration()}function A3(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Yl;case"vector":case"vector2":case"vector3":case"vector4":return $l;case"color":return bv;case"quaternion":return th;case"bool":case"boolean":return Mv;case"string":return Sv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function L3(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=A3(e.type);if(e.times===void 0){var n=[],r=[];Dt.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(rr,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(L3(n[i]).scale(r));return new rr(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,a=n.length;i!==a;++i)t.push(qt.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],l=[];s.push((o+i-1)%i,o,(o+1)%i),l.push(0,1,0);var u=Dt.getKeyframeOrder(s);s=Dt.sortedArray(s,1,u),l=Dt.sortedArray(l,1,u),!r&&s[0]===0&&(s.push(i),l.push(l[0])),a.push(new Yl(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/n))}return new rr(e,-1,a)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],l=s.name.match(i);if(l&&l.length>1){var u=l[1],c=r[u];c||(r[u]=c=[]),c.push(s)}}var f=[];for(var u in r)f.push(rr.CreateFromMorphTargetSequence(u,r[u],t,n));return f},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(w,g,_,b,E){if(_.length!==0){var S=[],O=[];Dt.flattenJSON(_,S,O,b),S.length!==0&&E.push(new w(g,S,O))}},r=[],i=e.name||"default",a=e.length||-1,o=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var u=s[l].keys;if(!(!u||u.length===0))if(u[0].morphTargets){for(var c={},f=0;f<u.length;f++)if(u[f].morphTargets)for(var h=0;h<u[f].morphTargets.length;h++)c[u[f].morphTargets[h]]=-1;for(var d in c){for(var p=[],x=[],h=0;h!==u[f].morphTargets.length;++h){var y=u[f];p.push(y.time),x.push(y.morphTarget===d?1:0)}r.push(new Yl(".morphTargetInfluence["+d+"]",p,x))}a=c.length*(o||1)}else{var v=".bones["+t[l].name+"]";n($l,v+".position",u,"pos",r),n(th,v+".quaternion",u,"rot",r),n($l,v+".scale",u,"scl",r)}}if(r.length===0)return null;var m=new rr(i,a,r);return m}});Object.assign(rr.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,n=0,r=e.length;n!==r;++n){var i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new rr(this.name,this.duration,e)}});var es={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function $1(e,t,n){var r=this,i=!1,a=0,o=0,s=void 0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(u){o++,i===!1&&r.onStart!==void 0&&r.onStart(u,a,o),i=!0},this.itemEnd=function(u){a++,r.onProgress!==void 0&&r.onProgress(u,a,o),a===o&&(i=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return s?s(u):u},this.setURLModifier=function(u){return s=u,this},this.addHandler=function(u,c){return l.push(u,c),this},this.removeHandler=function(u){var c=l.indexOf(u);return c!==-1&&l.splice(c,2),this},this.getHandler=function(u){for(var c=0,f=l.length;c<f;c+=2){var h=l[c],d=l[c+1];if(h.test(u))return d}return null}}var C3=new $1;function nt(e){this.manager=e!==void 0?e:C3,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(nt.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this}});var Zn={};function Sr(e){nt.call(this,e)}Sr.prototype=Object.assign(Object.create(nt.prototype),{constructor:Sr,load:function(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=es.get(e);if(a!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;if(Zn[e]!==void 0){Zn[e].push({onLoad:t,onProgress:n,onError:r});return}var o=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(o);if(s){var l=s[1],u=!!s[2],c=s[3];c=decodeURIComponent(c),u&&(c=atob(c));try{var f,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(c.length),p=0;p<c.length;p++)d[p]=c.charCodeAt(p);h==="blob"?f=new Blob([d.buffer],{type:l}):f=d.buffer;break;case"document":var x=new DOMParser;f=x.parseFromString(c,l);break;case"json":f=JSON.parse(c);break;default:f=c;break}setTimeout(function(){t&&t(f),i.manager.itemEnd(e)},0)}catch(m){setTimeout(function(){r&&r(m),i.manager.itemError(e),i.manager.itemEnd(e)},0)}}else{Zn[e]=[],Zn[e].push({onLoad:t,onProgress:n,onError:r});var y=new XMLHttpRequest;y.open("GET",e,!0),y.addEventListener("load",function(m){var w=this.response;es.add(e,w);var g=Zn[e];if(delete Zn[e],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var _=0,b=g.length;_<b;_++){var E=g[_];E.onLoad&&E.onLoad(w)}i.manager.itemEnd(e)}else{for(var _=0,b=g.length;_<b;_++){var E=g[_];E.onError&&E.onError(m)}i.manager.itemError(e),i.manager.itemEnd(e)}},!1),y.addEventListener("progress",function(m){for(var w=Zn[e],g=0,_=w.length;g<_;g++){var b=w[g];b.onProgress&&b.onProgress(m)}},!1),y.addEventListener("error",function(m){var w=Zn[e];delete Zn[e];for(var g=0,_=w.length;g<_;g++){var b=w[g];b.onError&&b.onError(m)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),y.addEventListener("abort",function(m){var w=Zn[e];delete Zn[e];for(var g=0,_=w.length;g<_;g++){var b=w[g];b.onError&&b.onError(m)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),this.responseType!==void 0&&(y.responseType=this.responseType),this.withCredentials!==void 0&&(y.withCredentials=this.withCredentials),y.overrideMimeType&&y.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var v in this.requestHeader)y.setRequestHeader(v,this.requestHeader[v]);y.send(null)}return i.manager.itemStart(e),y},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});function $0(e){nt.call(this,e)}$0.prototype=Object.assign(Object.create(nt.prototype),{constructor:$0,load:function(e,t,n,r){var i=this,a=new Sr(i.manager);a.setPath(i.path),a.load(e,function(o){t(i.parse(JSON.parse(o)))},n,r)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var r=rr.parse(e[n]);t.push(r)}return t}});function Z0(e){nt.call(this,e)}Z0.prototype=Object.assign(Object.create(nt.prototype),{constructor:Z0,load:function(e,t,n,r){var i=this,a=[],o=new Ol;o.image=a;var s=new Sr(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer");function l(h){s.load(e[h],function(d){var p=i.parse(d,!0);a[h]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},u+=1,u===6&&(p.mipmapCount===1&&(o.minFilter=Ft),o.format=p.format,o.needsUpdate=!0,t&&t(o))},n,r)}if(Array.isArray(e))for(var u=0,c=0,f=e.length;c<f;++c)l(c);else s.load(e,function(h){var d=i.parse(h,!0);if(d.isCubemap)for(var p=d.mipmaps.length/d.mipmapCount,x=0;x<p;x++){a[x]={mipmaps:[]};for(var y=0;y<d.mipmapCount;y++)a[x].mipmaps.push(d.mipmaps[x*d.mipmapCount+y]),a[x].format=d.format,a[x].width=d.width,a[x].height=d.height}else o.image.width=d.width,o.image.height=d.height,o.mipmaps=d.mipmaps;d.mipmapCount===1&&(o.minFilter=Ft),o.format=d.format,o.needsUpdate=!0,t&&t(o)},n,r);return o}});function J0(e){nt.call(this,e)}J0.prototype=Object.assign(Object.create(nt.prototype),{constructor:J0,load:function(e,t,n,r){var i=this,a=new Bo,o=new Sr(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(e,function(s){var l=i.parse(s);!l||(l.image!==void 0?a.image=l.image:l.data!==void 0&&(a.image.width=l.width,a.image.height=l.height,a.image.data=l.data),a.wrapS=l.wrapS!==void 0?l.wrapS:sn,a.wrapT=l.wrapT!==void 0?l.wrapT:sn,a.magFilter=l.magFilter!==void 0?l.magFilter:Ft,a.minFilter=l.minFilter!==void 0?l.minFilter:kh,a.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.format!==void 0&&(a.format=l.format),l.type!==void 0&&(a.type=l.type),l.mipmaps!==void 0&&(a.mipmaps=l.mipmaps),l.mipmapCount===1&&(a.minFilter=Ft),a.needsUpdate=!0,t&&t(a,l))},n,r),a}});function Zl(e){nt.call(this,e)}Zl.prototype=Object.assign(Object.create(nt.prototype),{constructor:Zl,load:function(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=es.get(e);if(a!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),es.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(u){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),r&&r(u),i.manager.itemError(e),i.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}});function Tv(e){nt.call(this,e)}Tv.prototype=Object.assign(Object.create(nt.prototype),{constructor:Tv,load:function(e,t,n,r){var i=new zi,a=new Zl(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(u){a.load(e[u],function(c){i.images[u]=c,o++,o===6&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(var l=0;l<e.length;++l)s(l);return i}});function Ao(e){nt.call(this,e)}Ao.prototype=Object.assign(Object.create(nt.prototype),{constructor:Ao,load:function(e,t,n,r){var i=new it,a=new Zl(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){i.image=o;var s=e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0;i.format=s?Ea:Kr,i.needsUpdate=!0,t!==void 0&&t(i)},n,r),i}});function Se(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Se.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){e===void 0&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){e===void 0&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[],n,r=this.getPoint(0),i,a=0;for(t.push(0),i=1;i<=e;i++)n=this.getPoint(i/e),a+=n.distanceTo(r),t.push(a),r=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n=this.getLengths(),r=0,i=n.length,a;t?a=t:a=e*n[i-1];for(var o=0,s=i-1,l;o<=s;)if(r=Math.floor(o+(s-o)/2),l=n[r]-a,l<0)o=r+1;else if(l>0)s=r-1;else{s=r;break}if(r=s,n[r]===a)return r/(i-1);var u=n[r],c=n[r+1],f=c-u,h=(a-u)/f,d=(r+h)/(i-1);return d},getTangent:function(e){var t=1e-4,n=e-t,r=e+t;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),a=this.getPoint(r),o=a.clone().sub(i);return o.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n=new A,r=[],i=[],a=[],o=new A,s=new Ge,l,u,c;for(l=0;l<=e;l++)u=l/e,r[l]=this.getTangentAt(u),r[l].normalize();i[0]=new A,a[0]=new A;var f=Number.MAX_VALUE,h=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);for(h<=f&&(f=h,n.set(1,0,0)),d<=f&&(f=d,n.set(0,1,0)),p<=f&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]),l=1;l<=e;l++)i[l]=i[l-1].clone(),a[l]=a[l-1].clone(),o.crossVectors(r[l-1],r[l]),o.length()>Number.EPSILON&&(o.normalize(),c=Math.acos(Be.clamp(r[l-1].dot(r[l]),-1,1)),i[l].applyMatrix4(s.makeRotationAxis(o,c))),a[l].crossVectors(r[l],i[l]);if(t===!0)for(c=Math.acos(Be.clamp(i[0].dot(i[e]),-1,1)),c/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(c=-c),l=1;l<=e;l++)i[l].applyMatrix4(s.makeRotationAxis(r[l],c*l)),a[l].crossVectors(r[l],i[l]);return{tangents:r,normals:i,binormals:a}},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}});function Un(e,t,n,r,i,a,o,s){Se.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}Un.prototype=Object.create(Se.prototype);Un.prototype.constructor=Un;Un.prototype.isEllipseCurve=!0;Un.prototype.getPoint=function(e,t){for(var n=t||new X,r=Math.PI*2,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(a?i=0:i=r),this.aClockwise===!0&&!a&&(i===r?i=-r:i=i-r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),f=s-this.aX,h=l-this.aY;s=f*u-h*c+this.aX,l=f*c+h*u+this.aY}return n.set(s,l)};Un.prototype.copy=function(e){return Se.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this};Un.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e};Un.prototype.fromJSON=function(e){return Se.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this};function Jl(e,t,n,r,i,a){Un.call(this,e,t,n,n,r,i,a),this.type="ArcCurve"}Jl.prototype=Object.create(Un.prototype);Jl.prototype.constructor=Jl;Jl.prototype.isArcCurve=!0;function vg(){var e=0,t=0,n=0,r=0;function i(a,o,s,l){e=a,t=s,n=-3*a+3*o-2*s-l,r=2*a-2*o+s+l}return{initCatmullRom:function(a,o,s,l,u){i(o,s,u*(s-a),u*(l-o))},initNonuniformCatmullRom:function(a,o,s,l,u,c,f){var h=(o-a)/u-(s-a)/(u+c)+(s-o)/c,d=(s-o)/c-(l-o)/(c+f)+(l-s)/f;h*=c,d*=c,i(o,s,h,d)},calc:function(a){var o=a*a,s=o*a;return e+t*a+n*o+r*s}}}var mc=new A,qd=new vg,Yd=new vg,$d=new vg;function En(e,t,n,r){Se.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}En.prototype=Object.create(Se.prototype);En.prototype.constructor=En;En.prototype.isCatmullRomCurve3=!0;En.prototype.getPoint=function(e,t){var n=t||new A,r=this.points,i=r.length,a=(i-(this.closed?0:1))*e,o=Math.floor(a),s=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/i)+1)*i:s===0&&o===i-1&&(o=i-2,s=1);var l,u,c,f;if(this.closed||o>0?l=r[(o-1)%i]:(mc.subVectors(r[0],r[1]).add(r[0]),l=mc),u=r[o%i],c=r[(o+1)%i],this.closed||o+2<i?f=r[(o+2)%i]:(mc.subVectors(r[i-1],r[i-2]).add(r[i-1]),f=mc),this.curveType==="centripetal"||this.curveType==="chordal"){var h=this.curveType==="chordal"?.5:.25,d=Math.pow(l.distanceToSquared(u),h),p=Math.pow(u.distanceToSquared(c),h),x=Math.pow(c.distanceToSquared(f),h);p<1e-4&&(p=1),d<1e-4&&(d=p),x<1e-4&&(x=p),qd.initNonuniformCatmullRom(l.x,u.x,c.x,f.x,d,p,x),Yd.initNonuniformCatmullRom(l.y,u.y,c.y,f.y,d,p,x),$d.initNonuniformCatmullRom(l.z,u.z,c.z,f.z,d,p,x)}else this.curveType==="catmullrom"&&(qd.initCatmullRom(l.x,u.x,c.x,f.x,this.tension),Yd.initCatmullRom(l.y,u.y,c.y,f.y,this.tension),$d.initCatmullRom(l.z,u.z,c.z,f.z,this.tension));return n.set(qd.calc(s),Yd.calc(s),$d.calc(s)),n};En.prototype.copy=function(e){Se.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this};En.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e};En.prototype.fromJSON=function(e){Se.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(new A().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this};function Q0(e,t,n,r,i){var a=(r-t)*.5,o=(i-n)*.5,s=e*e,l=e*s;return(2*n-2*r+a+o)*l+(-3*n+3*r-2*a-o)*s+a*e+n}function R3(e,t){var n=1-e;return n*n*t}function O3(e,t){return 2*(1-e)*e*t}function D3(e,t){return e*e*t}function tl(e,t,n,r){return R3(e,t)+O3(e,n)+D3(e,r)}function I3(e,t){var n=1-e;return n*n*n*t}function N3(e,t){var n=1-e;return 3*n*n*e*t}function k3(e,t){return 3*(1-e)*e*e*t}function F3(e,t){return e*e*e*t}function nl(e,t,n,r,i){return I3(e,t)+N3(e,n)+k3(e,r)+F3(e,i)}function Tr(e,t,n,r){Se.call(this),this.type="CubicBezierCurve",this.v0=e||new X,this.v1=t||new X,this.v2=n||new X,this.v3=r||new X}Tr.prototype=Object.create(Se.prototype);Tr.prototype.constructor=Tr;Tr.prototype.isCubicBezierCurve=!0;Tr.prototype.getPoint=function(e,t){var n=t||new X,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(nl(e,r.x,i.x,a.x,o.x),nl(e,r.y,i.y,a.y,o.y)),n};Tr.prototype.copy=function(e){return Se.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this};Tr.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e};Tr.prototype.fromJSON=function(e){return Se.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this};function ri(e,t,n,r){Se.call(this),this.type="CubicBezierCurve3",this.v0=e||new A,this.v1=t||new A,this.v2=n||new A,this.v3=r||new A}ri.prototype=Object.create(Se.prototype);ri.prototype.constructor=ri;ri.prototype.isCubicBezierCurve3=!0;ri.prototype.getPoint=function(e,t){var n=t||new A,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(nl(e,r.x,i.x,a.x,o.x),nl(e,r.y,i.y,a.y,o.y),nl(e,r.z,i.z,a.z,o.z)),n};ri.prototype.copy=function(e){return Se.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this};ri.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e};ri.prototype.fromJSON=function(e){return Se.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this};function Sn(e,t){Se.call(this),this.type="LineCurve",this.v1=e||new X,this.v2=t||new X}Sn.prototype=Object.create(Se.prototype);Sn.prototype.constructor=Sn;Sn.prototype.isLineCurve=!0;Sn.prototype.getPoint=function(e,t){var n=t||new X;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n};Sn.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};Sn.prototype.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()};Sn.prototype.copy=function(e){return Se.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this};Sn.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};Sn.prototype.fromJSON=function(e){return Se.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Pr(e,t){Se.call(this),this.type="LineCurve3",this.v1=e||new A,this.v2=t||new A}Pr.prototype=Object.create(Se.prototype);Pr.prototype.constructor=Pr;Pr.prototype.isLineCurve3=!0;Pr.prototype.getPoint=function(e,t){var n=t||new A;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n};Pr.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};Pr.prototype.copy=function(e){return Se.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this};Pr.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};Pr.prototype.fromJSON=function(e){return Se.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Ar(e,t,n){Se.call(this),this.type="QuadraticBezierCurve",this.v0=e||new X,this.v1=t||new X,this.v2=n||new X}Ar.prototype=Object.create(Se.prototype);Ar.prototype.constructor=Ar;Ar.prototype.isQuadraticBezierCurve=!0;Ar.prototype.getPoint=function(e,t){var n=t||new X,r=this.v0,i=this.v1,a=this.v2;return n.set(tl(e,r.x,i.x,a.x),tl(e,r.y,i.y,a.y)),n};Ar.prototype.copy=function(e){return Se.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this};Ar.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};Ar.prototype.fromJSON=function(e){return Se.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function ii(e,t,n){Se.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new A,this.v1=t||new A,this.v2=n||new A}ii.prototype=Object.create(Se.prototype);ii.prototype.constructor=ii;ii.prototype.isQuadraticBezierCurve3=!0;ii.prototype.getPoint=function(e,t){var n=t||new A,r=this.v0,i=this.v1,a=this.v2;return n.set(tl(e,r.x,i.x,a.x),tl(e,r.y,i.y,a.y),tl(e,r.z,i.z,a.z)),n};ii.prototype.copy=function(e){return Se.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this};ii.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};ii.prototype.fromJSON=function(e){return Se.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Lr(e){Se.call(this),this.type="SplineCurve",this.points=e||[]}Lr.prototype=Object.create(Se.prototype);Lr.prototype.constructor=Lr;Lr.prototype.isSplineCurve=!0;Lr.prototype.getPoint=function(e,t){var n=t||new X,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[a===0?a:a-1],l=r[a],u=r[a>r.length-2?r.length-1:a+1],c=r[a>r.length-3?r.length-1:a+2];return n.set(Q0(o,s.x,l.x,u.x,c.x),Q0(o,s.y,l.y,u.y,c.y)),n};Lr.prototype.copy=function(e){Se.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this};Lr.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e};Lr.prototype.fromJSON=function(e){Se.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(new X().fromArray(r))}return this};var Pv=Object.freeze({ArcCurve:Jl,CatmullRomCurve3:En,CubicBezierCurve:Tr,CubicBezierCurve3:ri,EllipseCurve:Un,LineCurve:Sn,LineCurve3:Pr,QuadraticBezierCurve:Ar,QuadraticBezierCurve3:ii,SplineCurve:Lr});function Si(){Se.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}Si.prototype=Object.assign(Object.create(Se.prototype),{constructor:Si,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Sn(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,a=this.curves[r],o=a.getLength(),s=o===0?0:1-i/o;return a.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){e===void 0&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t=[],n,r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a&&a.isEllipseCurve?e*2:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];n&&n.equals(u)||(t.push(u),n=u)}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){Se.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Se.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){Se.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(new Pv[r.type]().fromJSON(r))}return this}});function gr(e){Si.call(this),this.type="Path",this.currentPoint=new X,e&&this.setFromPoints(e)}gr.prototype=Object.assign(Object.create(Si.prototype),{constructor:gr,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new Sn(this.currentPoint.clone(),new X(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new Ar(this.currentPoint.clone(),new X(e,t),new X(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,a){var o=new Tr(this.currentPoint.clone(),new X(e,t),new X(n,r),new X(i,a));this.curves.push(o),this.currentPoint.set(i,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new Lr(t);this.curves.push(n),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+o,t+s,n,r,i,a)},absarc:function(e,t,n,r,i,a){this.absellipse(e,t,n,n,r,i,a)},ellipse:function(e,t,n,r,i,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+l,t+u,n,r,i,a,o,s)},absellipse:function(e,t,n,r,i,a,o,s){var l=new Un(e,t,n,r,i,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)},copy:function(e){return Si.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Si.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Si.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}});function ma(e){gr.call(this,e),this.uuid=Be.generateUUID(),this.type="Shape",this.holes=[]}ma.prototype=Object.assign(Object.create(gr.prototype),{constructor:ma,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){gr.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=gr.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){gr.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(new gr().fromJSON(r))}return this}});function ct(e,t){re.call(this),this.type="Light",this.color=new he(e),this.intensity=t!==void 0?t:1,this.receiveShadow=void 0}ct.prototype=Object.assign(Object.create(re.prototype),{constructor:ct,isLight:!0,copy:function(e){return re.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=re.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}});function Av(e,t,n){ct.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(re.DefaultUp),this.updateMatrix(),this.groundColor=new he(t)}Av.prototype=Object.assign(Object.create(ct.prototype),{constructor:Av,isHemisphereLight:!0,copy:function(e){return ct.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}});function ai(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new X(512,512),this.map=null,this.mapPass=null,this.matrix=new Ge,this._frustum=new zh,this._frameExtents=new X(1,1),this._viewportCount=1,this._viewports=[new et(0,0,1,1)]}Object.assign(ai.prototype,{_projScreenMatrix:new Ge,_lightPositionWorld:new A,_lookTarget:new A,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(e.matrixWorld),t.position.copy(a),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),r.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e={};return this.bias!==0&&(e.bias=this.bias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}});function Lv(){ai.call(this,new wt(50,1,.5,500))}Lv.prototype=Object.assign(Object.create(ai.prototype),{constructor:Lv,isSpotLightShadow:!0,updateMatrices:function(e,t,n){var r=this.camera,i=Be.RAD2DEG*2*e.angle,a=this.mapSize.width/this.mapSize.height,o=e.distance||r.far;(i!==r.fov||a!==r.aspect||o!==r.far)&&(r.fov=i,r.aspect=a,r.far=o,r.updateProjectionMatrix()),ai.prototype.updateMatrices.call(this,e,t,n)}});function Cv(e,t,n,r,i,a){ct.call(this,e,t),this.type="SpotLight",this.position.copy(re.DefaultUp),this.updateMatrix(),this.target=new re,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(o){this.intensity=o/Math.PI}}),this.distance=n!==void 0?n:0,this.angle=r!==void 0?r:Math.PI/3,this.penumbra=i!==void 0?i:0,this.decay=a!==void 0?a:1,this.shadow=new Lv}Cv.prototype=Object.assign(Object.create(ct.prototype),{constructor:Cv,isSpotLight:!0,copy:function(e){return ct.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function Rv(){ai.call(this,new wt(90,1,.5,500)),this._frameExtents=new X(4,2),this._viewportCount=6,this._viewports=[new et(2,1,1,1),new et(0,1,1,1),new et(3,1,1,1),new et(1,1,1,1),new et(3,0,1,1),new et(1,0,1,1)],this._cubeDirections=[new A(1,0,0),new A(-1,0,0),new A(0,0,1),new A(0,0,-1),new A(0,1,0),new A(0,-1,0)],this._cubeUps=[new A(0,1,0),new A(0,1,0),new A(0,1,0),new A(0,1,0),new A(0,0,1),new A(0,0,-1)]}Rv.prototype=Object.assign(Object.create(ai.prototype),{constructor:Rv,isPointLightShadow:!0,updateMatrices:function(e,t,n){var r=this.camera,i=this.matrix,a=this._lightPositionWorld,o=this._lookTarget,s=this._projScreenMatrix;a.setFromMatrixPosition(e.matrixWorld),r.position.copy(a),o.copy(r.position),o.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(o),r.updateMatrixWorld(),i.makeTranslation(-a.x,-a.y,-a.z),s.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromMatrix(s)}});function Ql(e,t,n,r){ct.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(i){this.intensity=i/(4*Math.PI)}}),this.distance=n!==void 0?n:0,this.decay=r!==void 0?r:1,this.shadow=new Rv}Ql.prototype=Object.assign(Object.create(ct.prototype),{constructor:Ql,isPointLight:!0,copy:function(e){return ct.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}});function nh(e,t,n,r,i,a){ei.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e!==void 0?e:-1,this.right=t!==void 0?t:1,this.top=n!==void 0?n:1,this.bottom=r!==void 0?r:-1,this.near=i!==void 0?i:.1,this.far=a!==void 0?a:2e3,this.updateProjectionMatrix()}nh.prototype=Object.assign(Object.create(ei.prototype),{constructor:nh,isOrthographicCamera:!0,copy:function(e,t){return ei.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(this.view!==null&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,f=(this.top-this.bottom)/this.view.height;i+=c*(this.view.offsetX/l),a=i+c*(this.view.width/l),o-=f*(this.view.offsetY/u),s=o-f*(this.view.height/u)}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=re.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}});function Ov(){ai.call(this,new nh(-5,5,5,-5,.5,500))}Ov.prototype=Object.assign(Object.create(ai.prototype),{constructor:Ov,isDirectionalLightShadow:!0,updateMatrices:function(e,t,n){ai.prototype.updateMatrices.call(this,e,t,n)}});function Dv(e,t){ct.call(this,e,t),this.type="DirectionalLight",this.position.copy(re.DefaultUp),this.updateMatrix(),this.target=new re,this.shadow=new Ov}Dv.prototype=Object.assign(Object.create(ct.prototype),{constructor:Dv,isDirectionalLight:!0,copy:function(e){return ct.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function rh(e,t){ct.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}rh.prototype=Object.assign(Object.create(ct.prototype),{constructor:rh,isAmbientLight:!0});function Iv(e,t,n,r){ct.call(this,e,t),this.type="RectAreaLight",this.width=n!==void 0?n:10,this.height=r!==void 0?r:10}Iv.prototype=Object.assign(Object.create(ct.prototype),{constructor:Iv,isRectAreaLight:!0,copy:function(e){return ct.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=ct.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});function Nv(e){nt.call(this,e),this.textures={}}Nv.prototype=Object.assign(Object.create(nt.prototype),{constructor:Nv,load:function(e,t,n,r){var i=this,a=new Sr(i.manager);a.setPath(i.path),a.load(e,function(o){t(i.parse(JSON.parse(o)))},n,r)},parse:function(e){var t=this.textures;function n(l){return t[l]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",l),t[l]}var r=new P3[e.type];if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=new he().setHex(e.sheen)),e.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular.setHex(e.specular),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.vertexColors!==void 0&&(r.vertexColors=e.vertexColors),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.skinning!==void 0&&(r.skinning=e.skinning),e.morphTargets!==void 0&&(r.morphTargets=e.morphTargets),e.morphNormals!==void 0&&(r.morphNormals=e.morphNormals),e.dithering!==void 0&&(r.dithering=e.dithering),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.uniforms!==void 0)for(var i in e.uniforms){var a=e.uniforms[i];switch(r.uniforms[i]={},a.type){case"t":r.uniforms[i].value=n(a.value);break;case"c":r.uniforms[i].value=new he().setHex(a.value);break;case"v2":r.uniforms[i].value=new X().fromArray(a.value);break;case"v3":r.uniforms[i].value=new A().fromArray(a.value);break;case"v4":r.uniforms[i].value=new et().fromArray(a.value);break;case"m3":r.uniforms[i].value=new Ct().fromArray(a.value);case"m4":r.uniforms[i].value=new Ge().fromArray(a.value);break;default:r.uniforms[i].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(var o in e.extensions)r.extensions[o]=e.extensions[o];if(e.shading!==void 0&&(r.flatShading=e.shading===1),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){var s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new X().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new X().fromArray(e.clearcoatNormalScale)),r},setTextures:function(e){return this.textures=e,this}});var Z1={decodeText:function(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}},extractUrlBase:function(e){var t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}};function kv(){se.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}kv.prototype=Object.assign(Object.create(se.prototype),{constructor:kv,isInstancedBufferGeometry:!0,copy:function(e){return se.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e=se.prototype.toJSON.call(this);return e.maxInstancedCount=this.maxInstancedCount,e.isInstancedBufferGeometry=!0,e}});function Fv(e,t,n,r){typeof n=="number"&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Ie.call(this,e,t,n),this.meshPerAttribute=r||1}Fv.prototype=Object.assign(Object.create(Ie.prototype),{constructor:Fv,isInstancedBufferAttribute:!0,copy:function(e){return Ie.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=Ie.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}});function zv(e){nt.call(this,e)}zv.prototype=Object.assign(Object.create(nt.prototype),{constructor:zv,load:function(e,t,n,r){var i=this,a=new Sr(i.manager);a.setPath(i.path),a.load(e,function(o){t(i.parse(JSON.parse(o)))},n,r)},parse:function(e){var t=e.isInstancedBufferGeometry?new kv:new se,n=e.data.index;if(n!==void 0){var r=new Zd[n.type](n.array);t.setIndex(new Ie(r,1))}var i=e.data.attributes;for(var a in i){var o=i[a],r=new Zd[o.type](o.array),s=o.isInstancedBufferAttribute?Fv:Ie,l=new s(r,o.itemSize,o.normalized);o.name!==void 0&&(l.name=o.name),t.addAttribute(a,l)}var u=e.data.morphAttributes;if(u)for(var a in u){for(var c=u[a],f=[],h=0,d=c.length;h<d;h++){var o=c[h],r=new Zd[o.type](o.array),l=new Ie(r,o.itemSize,o.normalized);o.name!==void 0&&(l.name=o.name),f.push(l)}t.morphAttributes[a]=f}var p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(var h=0,x=p.length;h!==x;++h){var y=p[h];t.addGroup(y.start,y.count,y.materialIndex)}var v=e.data.boundingSphere;if(v!==void 0){var m=new A;v.center!==void 0&&m.fromArray(v.center),t.boundingSphere=new Wi(m,v.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t}});var Zd={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Bv(e){nt.call(this,e)}Bv.prototype=Object.assign(Object.create(nt.prototype),{constructor:Bv,load:function(e,t,n,r){var i=this,a=this.path===""?Z1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new Sr(i.manager);o.setPath(this.path),o.load(e,function(s){var l=null;try{l=JSON.parse(s)}catch(c){r!==void 0&&r(c),console.error("THREE:ObjectLoader: Can't parse "+e+".",c.message);return}var u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}i.parse(l,t)},n,r)},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,function(){t!==void 0&&t(s)}),a=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,r,o);return e.animations&&(s.animations=this.parseAnimations(e.animations)),(e.images===void 0||e.images.length===0)&&t!==void 0&&t(s),s},parseShape:function(e){var t={};if(e!==void 0)for(var n=0,r=e.length;n<r;n++){var i=new ma().fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(e!==void 0)for(var r=new zv,i=0,a=e.length;i<a;i++){var o,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new Yt[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new Yt[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new Yt[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new Yt[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new Yt[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new Yt[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new Yt[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new Yt[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new Yt[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new Yt[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new Yt[s.type](new Pv[s.path.type]().fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new Yt[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new Yt[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var f=[],l=0,u=s.shapes.length;l<u;l++){var c=t[s.shapes[l]];f.push(c)}o=new Yt[s.type](f,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var f=[],l=0,u=s.shapes.length;l<u;l++){var c=t[s.shapes[l]];f.push(c)}var h=s.options.extrudePath;h!==void 0&&(s.options.extrudePath=new Pv[h.type]().fromJSON(h)),o=new Yt[s.type](f,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var d=new THREE.LegacyJSONLoader;o=d.parse(s,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,s.name!==void 0&&(o.name=s.name),o.isBufferGeometry===!0&&s.userData!==void 0&&(o.userData=s.userData),n[s.uuid]=o}return n},parseMaterials:function(e,t){var n={},r={};if(e!==void 0){var i=new Nv;i.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];if(s.type==="MultiMaterial"){for(var l=[],u=0;u<s.materials.length;u++){var c=s.materials[u];n[c.uuid]===void 0&&(n[c.uuid]=i.parse(c)),l.push(n[c.uuid])}r[s.uuid]=l}else n[s.uuid]===void 0&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=rr.parse(r);r.uuid!==void 0&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(x){return n.manager.itemStart(x),o.load(x,function(){n.manager.itemEnd(x)},void 0,function(){n.manager.itemError(x),n.manager.itemEnd(x)})}if(e!==void 0&&e.length>0){var a=new $1(t),o=new Zl(a);o.setCrossOrigin(this.crossOrigin);for(var s=0,l=e.length;s<l;s++){var u=e[s],c=u.url;if(Array.isArray(c)){r[u.uuid]=[];for(var f=0,h=c.length;f<h;f++){var d=c[f],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;r[u.uuid].push(i(p))}}else{var p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.resourcePath+u.url;r[u.uuid]=i(p)}}}return r},parseTextures:function(e,t){function n(l,u){return typeof l=="number"?l:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",l),u[l])}var r={};if(e!==void 0)for(var i=0,a=e.length;i<a;i++){var o=e[i];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s;Array.isArray(t[o.image])?s=new zi(t[o.image]):s=new it(t[o.image]),s.needsUpdate=!0,s.uuid=o.uuid,o.name!==void 0&&(s.name=o.name),o.mapping!==void 0&&(s.mapping=n(o.mapping,z3)),o.offset!==void 0&&s.offset.fromArray(o.offset),o.repeat!==void 0&&s.repeat.fromArray(o.repeat),o.center!==void 0&&s.center.fromArray(o.center),o.rotation!==void 0&&(s.rotation=o.rotation),o.wrap!==void 0&&(s.wrapS=n(o.wrap[0],K0),s.wrapT=n(o.wrap[1],K0)),o.format!==void 0&&(s.format=o.format),o.type!==void 0&&(s.type=o.type),o.encoding!==void 0&&(s.encoding=o.encoding),o.minFilter!==void 0&&(s.minFilter=n(o.minFilter,ex)),o.magFilter!==void 0&&(s.magFilter=n(o.magFilter,ex)),o.anisotropy!==void 0&&(s.anisotropy=o.anisotropy),o.flipY!==void 0&&(s.flipY=o.flipY),o.premultiplyAlpha!==void 0&&(s.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(s.unpackAlignment=o.unpackAlignment),r[o.uuid]=s}return r},parseObject:function(e,t,n){var r;function i(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function a(p){if(p!==void 0){if(Array.isArray(p)){for(var x=[],y=0,v=p.length;y<v;y++){var m=p[y];n[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),x.push(n[m])}return x}return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),n[p]}}switch(e.type){case"Scene":r=new Sl,e.background!==void 0&&Number.isInteger(e.background)&&(r.background=new he(e.background)),e.fog!==void 0&&(e.fog.type==="Fog"?r.fog=new hv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(r.fog=new fv(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new wt(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(r.focus=e.focus),e.zoom!==void 0&&(r.zoom=e.zoom),e.filmGauge!==void 0&&(r.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(r.filmOffset=e.filmOffset),e.view!==void 0&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new nh(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(r.zoom=e.zoom),e.view!==void 0&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new rh(e.color,e.intensity);break;case"DirectionalLight":r=new Dv(e.color,e.intensity);break;case"PointLight":r=new Ql(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new Iv(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new Cv(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new Av(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=i(e.geometry),s=a(e.material);o.bones&&o.bones.length>0?r=new If(o,s):r=new ot(o,s),e.drawMode!==void 0&&r.setDrawMode(e.drawMode);break;case"LOD":r=new Df;break;case"Line":r=new Xt(i(e.geometry),a(e.material),e.mode);break;case"LineLoop":r=new vv(i(e.geometry),a(e.material));break;case"LineSegments":r=new ht(i(e.geometry),a(e.material));break;case"PointCloud":case"Points":r=new gv(i(e.geometry),a(e.material));break;case"Sprite":r=new dv(a(e.material));break;case"Group":r=new Go;break;default:r=new re}if(r.uuid=e.uuid,e.name!==void 0&&(r.name=e.name),e.matrix!==void 0?(r.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(e.position!==void 0&&r.position.fromArray(e.position),e.rotation!==void 0&&r.rotation.fromArray(e.rotation),e.quaternion!==void 0&&r.quaternion.fromArray(e.quaternion),e.scale!==void 0&&r.scale.fromArray(e.scale)),e.castShadow!==void 0&&(r.castShadow=e.castShadow),e.receiveShadow!==void 0&&(r.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(r.shadow.bias=e.shadow.bias),e.shadow.radius!==void 0&&(r.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&r.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(r.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(r.visible=e.visible),e.frustumCulled!==void 0&&(r.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(r.renderOrder=e.renderOrder),e.userData!==void 0&&(r.userData=e.userData),e.layers!==void 0&&(r.layers.mask=e.layers),e.children!==void 0)for(var l=e.children,u=0;u<l.length;u++)r.add(this.parseObject(l[u],t,n));if(e.type==="LOD")for(var c=e.levels,f=0;f<c.length;f++){var h=c[f],d=r.getObjectByProperty("uuid",h.object);d!==void 0&&r.addLevel(d,h.distance)}return r}});var z3={UVMapping:tg,CubeReflectionMapping:ng,CubeRefractionMapping:rg,EquirectangularReflectionMapping:E1,EquirectangularRefractionMapping:ig,SphericalReflectionMapping:S1,CubeUVReflectionMapping:ag,CubeUVRefractionMapping:og},K0={RepeatWrapping:bf,ClampToEdgeWrapping:sn,MirroredRepeatWrapping:Ef},ex={NearestFilter:Ht,NearestMipmapNearestFilter:sg,NearestMipmapLinearFilter:lg,LinearFilter:Ft,LinearMipmapNearestFilter:T1,LinearMipmapLinearFilter:kh};function tx(e){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),nt.call(this,e),this.options=void 0}tx.prototype=Object.assign(Object.create(nt.prototype),{constructor:tx,setOptions:function(t){return this.options=t,this},load:function(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=es.get(e);if(a!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;fetch(e).then(function(o){return o.blob()}).then(function(o){return i.options===void 0?createImageBitmap(o):createImageBitmap(o,i.options)}).then(function(o){es.add(e,o),t&&t(o),i.manager.itemEnd(e)}).catch(function(o){r&&r(o),i.manager.itemError(e),i.manager.itemEnd(e)}),i.manager.itemStart(e)}});function J1(){this.type="ShapePath",this.color=new he,this.subPaths=[],this.currentPath=null}Object.assign(J1.prototype,{moveTo:function(e,t){this.currentPath=new gr,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,a){this.currentPath.bezierCurveTo(e,t,n,r,i,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(G){for(var W=[],Y=0,z=G.length;Y<z;Y++){var V=G[Y],j=new ma;j.curves=V.curves,W.push(j)}return W}function r(G,W){for(var Y=W.length,z=!1,V=Y-1,j=0;j<Y;V=j++){var q=W[V],K=W[j],Pe=K.x-q.x,H=K.y-q.y;if(Math.abs(H)>Number.EPSILON){if(H<0&&(q=W[j],Pe=-Pe,K=W[V],H=-H),G.y<q.y||G.y>K.y)continue;if(G.y===q.y){if(G.x===q.x)return!0}else{var ue=H*(G.x-q.x)-Pe*(G.y-q.y);if(ue===0)return!0;if(ue<0)continue;z=!z}}else{if(G.y!==q.y)continue;if(K.x<=G.x&&G.x<=q.x||q.x<=G.x&&G.x<=K.x)return!0}}return z}var i=Ni.isClockWise,a=this.subPaths;if(a.length===0)return[];if(t===!0)return n(a);var o,s,l,u=[];if(a.length===1)return s=a[0],l=new ma,l.curves=s.curves,u.push(l),u;var c=!i(a[0].getPoints());c=e?!c:c;var f=[],h=[],d=[],p=0,x;h[p]=void 0,d[p]=[];for(var y=0,v=a.length;y<v;y++)s=a[y],x=s.getPoints(),o=i(x),o=e?!o:o,o?(!c&&h[p]&&p++,h[p]={s:new ma,p:x},h[p].s.curves=s.curves,c&&p++,d[p]=[]):d[p].push({h:s,p:x[0]});if(!h[0])return n(a);if(h.length>1){for(var m=!1,w=[],g=0,_=h.length;g<_;g++)f[g]=[];for(var g=0,_=h.length;g<_;g++)for(var b=d[g],E=0;E<b.length;E++){for(var S=b[E],O=!0,D=0;D<h.length;D++)r(S.p,h[D].p)&&(g!==D&&w.push({froms:g,tos:D,hole:E}),O?(O=!1,f[D].push(S)):m=!0);O&&f[g].push(S)}w.length>0&&(m||(d=f))}for(var L,y=0,R=h.length;y<R;y++){l=h[y].s,u.push(l),L=d[y];for(var N=0,B=L.length;N<B;N++)l.holes.push(L[N].h)}return u}});function Q1(e){this.type="Font",this.data=e}Object.assign(Q1.prototype,{isFont:!0,generateShapes:function(e,t){t===void 0&&(t=100);for(var n=[],r=B3(e,t,this.data),i=0,a=r.length;i<a;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}});function B3(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[],s=0,l=0,u=0;u<r.length;u++){var c=r[u];if(c===`
`)s=0,l-=a;else{var f=U3(c,i,s,l,n);s+=f.offsetX,o.push(f.path)}}return o}function U3(e,t,n,r,i){var a=i.glyphs[e]||i.glyphs["?"];if(!a){console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".");return}var o=new J1,s,l,u,c,f,h,d,p;if(a.o)for(var x=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),y=0,v=x.length;y<v;){var m=x[y++];switch(m){case"m":s=x[y++]*t+n,l=x[y++]*t+r,o.moveTo(s,l);break;case"l":s=x[y++]*t+n,l=x[y++]*t+r,o.lineTo(s,l);break;case"q":u=x[y++]*t+n,c=x[y++]*t+r,f=x[y++]*t+n,h=x[y++]*t+r,o.quadraticCurveTo(f,h,u,c);break;case"b":u=x[y++]*t+n,c=x[y++]*t+r,f=x[y++]*t+n,h=x[y++]*t+r,d=x[y++]*t+n,p=x[y++]*t+r,o.bezierCurveTo(f,h,d,p,u,c);break}}return{offsetX:a.ha*t,path:o}}function nx(e){nt.call(this,e)}nx.prototype=Object.assign(Object.create(nt.prototype),{constructor:nx,load:function(e,t,n,r){var i=this,a=new Sr(this.manager);a.setPath(this.path),a.load(e,function(o){var s;try{s=JSON.parse(o)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),s=JSON.parse(o.substring(65,o.length-2))}var l=i.parse(s);t&&t(l)},n,r)},parse:function(e){return new Q1(e)}});var gc,K1={getContext:function(){return gc===void 0&&(gc=new(window.AudioContext||window.webkitAudioContext)),gc},setContext:function(e){gc=e}};function Uv(e){nt.call(this,e)}Uv.prototype=Object.assign(Object.create(nt.prototype),{constructor:Uv,load:function(e,t,n,r){var i=new Sr(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(e,function(a){var o=a.slice(0),s=K1.getContext();s.decodeAudioData(o,function(l){t(l)})},n,r)}});function mg(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new A)}Object.assign(mg.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScale(a[1],.488603*r),t.addScale(a[2],.488603*i),t.addScale(a[3],.488603*n),t.addScale(a[4],1.092548*(n*r)),t.addScale(a[5],1.092548*(r*i)),t.addScale(a[6],.315392*(3*i*i-1)),t.addScale(a[7],1.092548*(n*i)),t.addScale(a[8],.546274*(n*n-r*r)),t},getIrradianceAt:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScale(a[1],2*.511664*r),t.addScale(a[2],2*.511664*i),t.addScale(a[3],2*.511664*n),t.addScale(a[4],2*.429043*n*r),t.addScale(a[5],2*.429043*r*i),t.addScale(a[6],.743125*i*i-.247708),t.addScale(a[7],2*.429043*n*i),t.addScale(a[8],.429043*(n*n-r*r)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(e,t){t===void 0&&(t=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}});Object.assign(mg,{getBasisAt:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}});function _r(e,t){ct.call(this,void 0,t),this.sh=e!==void 0?e:new mg}_r.prototype=Object.assign(Object.create(ct.prototype),{constructor:_r,isLightProbe:!0,copy:function(e){return ct.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){var t=ct.prototype.toJSON.call(this,e);return t}});function rx(e,t,n){_r.call(this,void 0,n);var r=new he().set(e),i=new he().set(t),a=new A(r.r,r.g,r.b),o=new A(i.r,i.g,i.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(l)}rx.prototype=Object.assign(Object.create(_r.prototype),{constructor:rx,isHemisphereLightProbe:!0,copy:function(e){return _r.prototype.copy.call(this,e),this},toJSON:function(e){var t=_r.prototype.toJSON.call(this,e);return t}});function ix(e,t){_r.call(this,void 0,t);var n=new he().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}ix.prototype=Object.assign(Object.create(_r.prototype),{constructor:ix,isAmbientLightProbe:!0,copy:function(e){return _r.prototype.copy.call(this,e),this},toJSON:function(e){var t=_r.prototype.toJSON.call(this,e);return t}});var ax=new Ge,ox=new Ge;function G3(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new wt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new wt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(G3.prototype,{update:function(e){var t=this._cache,n=t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep;if(n){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var r=e.projectionMatrix.clone(),i=t.eyeSep/2,a=i*t.near/t.focus,o=t.near*Math.tan(Be.DEG2RAD*t.fov*.5)/t.zoom,s,l;ox.elements[12]=-i,ax.elements[12]=i,s=-o*t.aspect+a,l=o*t.aspect+a,r.elements[0]=2*t.near/(l-s),r.elements[8]=(l+s)/(l-s),this.cameraL.projectionMatrix.copy(r),s=-o*t.aspect-a,l=o*t.aspect-a,r.elements[0]=2*t.near/(l-s),r.elements[8]=(l+s)/(l-s),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ox),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ax)}});function eM(e){this.autoStart=e!==void 0?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(eM.prototype,{start:function(){this.startTime=(typeof performance>"u"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=(typeof performance>"u"?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});var na=new A,sx=new Bt,V3=new A,ra=new A;function lx(){re.call(this),this.type="AudioListener",this.context=K1.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new eM}lx.prototype=Object.assign(Object.create(re.prototype),{constructor:lx,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){re.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(na,sx,V3),ra.set(0,0,-1).applyQuaternion(sx),t.positionX){var r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(na.x,r),t.positionY.linearRampToValueAtTime(na.y,r),t.positionZ.linearRampToValueAtTime(na.z,r),t.forwardX.linearRampToValueAtTime(ra.x,r),t.forwardY.linearRampToValueAtTime(ra.y,r),t.forwardZ.linearRampToValueAtTime(ra.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(na.x,na.y,na.z),t.setOrientation(ra.x,ra.y,ra.z,n.x,n.y,n.z)}});function Kl(e){re.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}Kl.prototype=Object.assign(Object.create(re.prototype),{constructor:Kl,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),this.isPlaying===!0?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var ia=new A,ux=new Bt,H3=new A,aa=new A;function cx(e){Kl.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}cx.prototype=Object.assign(Object.create(Kl.prototype),{constructor:cx,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(e){if(re.prototype.updateMatrixWorld.call(this,e),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(ia,ux,H3),aa.set(0,0,1).applyQuaternion(ux);var t=this.panner;if(t.positionX){var n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ia.x,n),t.positionY.linearRampToValueAtTime(ia.y,n),t.positionZ.linearRampToValueAtTime(ia.z,n),t.orientationX.linearRampToValueAtTime(aa.x,n),t.orientationY.linearRampToValueAtTime(aa.y,n),t.orientationZ.linearRampToValueAtTime(aa.z,n)}else t.setPosition(ia.x,ia.y,ia.z),t.setOrientation(aa.x,aa.y,aa.z)}}});function tM(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t!==void 0?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}Object.assign(tM.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}});function nM(e,t,n){this.binding=e,this.valueSize=n;var r=Float64Array,i;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(n*4),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(nM.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(a===0){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else{a+=t;var s=t/a;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,i<1){var o=t*3;this._mixBufferRegion(n,r,o,1-i,t)}for(var s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){a.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*3;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=this.valueSize*3;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,r){Bt.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}}});var gg="\\[\\]\\.:\\/",W3=new RegExp("["+gg+"]","g"),yg="[^"+gg+"]",j3="[^"+gg.replace("\\.","")+"]",X3=/((?:WC+[\/:])*)/.source.replace("WC",yg),q3=/(WCOD+)?/.source.replace("WCOD",j3),Y3=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",yg),$3=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",yg),Z3=new RegExp("^"+X3+q3+Y3+$3+"$"),J3=["material","materials","bones"];function rM(e,t,n){var r=n||Jt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}Object.assign(rM.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}});function Jt(e,t,n){this.path=t,this.parsedPath=n||Jt.parseTrackName(t),this.node=Jt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(Jt,{Composite:rM,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Jt.Composite(e,t,n):new Jt(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(W3,"")},parseTrackName:function(e){var t=Z3.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){var i=n.nodeName.substring(r+1);J3.indexOf(i)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||t===""||t==="root"||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){var r=function(a){for(var o=0;o<a.length;o++){var s=a[o];if(s.name===t||s.uuid===t)return s;var l=r(s.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}});Object.assign(Jt.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,n){t[n]=this.node[this.propertyName]},function(t,n){for(var r=this.resolvedProperty,i=0,a=r.length;i!==a;++i)t[n++]=r[i]},function(t,n){t[n]=this.resolvedProperty[this.propertyIndex]},function(t,n){this.resolvedProperty.toArray(t,n)}],SetterByBindingTypeAndVersioning:[[function(t,n){this.targetObject[this.propertyName]=t[n]},function(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){for(var r=this.resolvedProperty,i=0,a=r.length;i!==a;++i)r[i]=t[n++]},function(t,n){for(var r=this.resolvedProperty,i=0,a=r.length;i!==a;++i)r[i]=t[n++];this.targetObject.needsUpdate=!0},function(t,n){for(var r=this.resolvedProperty,i=0,a=r.length;i!==a;++i)r[i]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty[this.propertyIndex]=t[n]},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty.fromArray(t,n)},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,n){this.bind(),this.getValue(t,n)},setValue:function(t,n){this.bind(),this.setValue(t,n)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Jt.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(a!==void 0){if(e[a]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[a]}}var s=e[r];if(s===void 0){var l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e);return}var u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(i!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(var o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(e.geometry.morphAttributes.position[o].name===i){i=o;break}}else{if(!e.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(var o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===i){i=o;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else s.fromArray!==void 0&&s.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Jt.prototype,{_getValue_unbound:Jt.prototype.getValue,_setValue_unbound:Jt.prototype.setValue});function Q3(){this.uuid=Be.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}Object.assign(Q3.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,l=void 0,u=0,c=arguments.length;u!==c;++u){var f=arguments[u],h=f.uuid,d=r[h];if(d===void 0){d=t++,r[h]=d,e.push(f);for(var p=0,x=s;p!==x;++p)o[p].push(new Jt(f,i[p],a[p]))}else if(d<n){l=e[d];var y=--n,v=e[y];r[v.uuid]=d,e[d]=v,r[h]=y,e[y]=f;for(var p=0,x=s;p!==x;++p){var m=o[p],w=m[y],g=m[d];m[d]=w,g===void 0&&(g=new Jt(f,i[p],a[p])),m[y]=g}}else e[d]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,u=n[l];if(u!==void 0&&u>=t){var c=t++,f=e[c];n[f.uuid]=u,e[u]=f,n[l]=c,e[c]=s;for(var h=0,d=i;h!==d;++h){var p=r[h],x=p[c],y=p[u];p[u]=x,p[c]=y}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,a=i.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o],u=l.uuid,c=r[u];if(c!==void 0)if(delete r[u],c<n){var f=--n,h=e[f],d=--t,p=e[d];r[h.uuid]=c,e[c]=h,r[p.uuid]=f,e[f]=p,e.pop();for(var x=0,y=a;x!==y;++x){var v=i[x],m=v[f],w=v[d];v[c]=m,v[f]=w,v.pop()}}else{var d=--t,p=e[d];r[p.uuid]=c,e[c]=p,e.pop();for(var x=0,y=a;x!==y;++x){var v=i[x];v[c]=v[d],v.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(r!==void 0)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(c);for(var f=u,h=s.length;f!==h;++f){var d=s[f];c[f]=new Jt(d,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o],l=e[o];t[l]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}});function iM(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,a=new Array(i),o={endingStart:Fo,endingEnd:Fo},s=0;s!==i;++s){var l=r[s].createInterpolant(null);a[s]=l,l.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=qT,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(iM.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,o=r/i;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,a=this._timeScaleInterpolant,o=this.timeScale;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,l=a.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/o,l[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}var i=this._startTime;if(i!==null){var a=(e-i)*n;if(a<0||n===0)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulate(r,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(n!==null){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(n!==null){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,a=r===YT;if(e===0)return i===-1?t:a&&(i&1)===1?n-t:t;if(r===XT){i===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else if(t<0)t=0;else{this.time=t;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(i===-1&&(e>=0?(i=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),t>=n||t<0){var o=Math.floor(t/n);t-=n*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(s===1){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=t;if(a&&(i&1)===1)return n-t}return t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=vo,r.endingEnd=vo):(e?r.endingStart=this.zeroSlopeAtStart?vo:Fo:r.endingStart=Af,t?r.endingEnd=this.zeroSlopeAtEnd?vo:Fo:r.endingEnd=Af)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}});function fx(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}fx.prototype=Object.assign(Object.create(Pt.prototype),{constructor:fx,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];u===void 0&&(u={},l[s]=u);for(var c=0;c!==i;++c){var f=r[c],h=f.name,d=u[h];if(d!==void 0)a[c]=d;else{if(d=a[c],d!==void 0){d._cacheIndex===null&&(++d.referenceCount,this._addInactiveBinding(d,s,h));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;d=new nM(Jt.create(n,h,p),f.ValueTypeName,f.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,s,h),a[c]=d}o[c].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];--i.useCount===0&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return t!==null&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null;var c=o.actionByRoot,f=(e._localRoot||this._root).uuid;delete c[f],s.length===0&&delete a[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];--i.referenceCount===0&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],a=this._bindings;i===void 0&&(i={},r[t]=i),i[n]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[i],Object.keys(o).length===0&&delete a[r]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return n===void 0&&(n=new eh(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i=typeof e=="string"?rr.findByName(n,e):e,a=i!==null?i.uuid:e,o=this._actionsByClip[a],s=null;if(o!==void 0){var l=o.actionByRoot[r];if(l!==void 0)return l;s=o.knownActions[0],i===null&&(i=s._clip)}if(i===null)return null;var u=new iM(this,i,t);return this._bindAction(u,s),this._addInactiveAction(u,a,r),u},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i=typeof e=="string"?rr.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(var i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){var s=t[o];s._update(r,e,i,a)}for(var l=this._bindings,u=this._nActiveBindings,o=0;o!==u;++o)l[o].apply(a);return this},setTime:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(i!==void 0){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,a=i[t];a!==void 0&&(this._deactivateAction(a),this._removeInactiveAction(a))}var o=this._bindingsByRootAndName,s=o[t];if(s!==void 0)for(var l in s){var u=s[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}});function Gv(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}Gv.prototype.clone=function(){return new Gv(this.value.clone===void 0?this.value:this.value.clone())};function hx(e,t,n){La.call(this,e,t),this.meshPerAttribute=n||1}hx.prototype=Object.assign(Object.create(La.prototype),{constructor:hx,isInstancedInterleavedBuffer:!0,copy:function(e){return La.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}});function xg(e,t,n,r){this.ray=new fs(e,t),this.near=n||0,this.far=r||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function dx(e,t){return e.distance-t.distance}function Vv(e,t,n,r){if(e.visible!==!1&&(e.raycast(t,n),r===!0))for(var i=e.children,a=0,o=i.length;a<o;a++)Vv(i[a],t,n,!0)}Object.assign(xg.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return Vv(e,this,r,t),r.sort(dx),r},intersectObjects:function(e,t,n){var r=n||[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,a=e.length;i<a;i++)Vv(e[i],this,r,t);return r.sort(dx),r}});function Hv(e,t,n){return this.radius=e!==void 0?e:1,this.phi=t!==void 0?t:0,this.theta=n!==void 0?n:0,this}Object.assign(Hv.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Be.clamp(t/this.radius,-1,1))),this}});function K3(e,t,n){return this.radius=e!==void 0?e:1,this.theta=t!==void 0?t:0,this.y=n!==void 0?n:0,this}Object.assign(K3.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}});var px=new X;function aM(e,t){this.min=e!==void 0?e:new X(1/0,1/0),this.max=t!==void 0?t:new X(-1/0,-1/0)}Object.assign(aM.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=px.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return e===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new X),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new X),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return t===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new X),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return t===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new X),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){var t=px.copy(e).clamp(this.min,this.max);return t.sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var vx=new A,yc=new A;function oM(e,t){this.start=e!==void 0?e:new A,this.end=t!==void 0?t:new A}Object.assign(oM.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return e===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new A),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return e===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),e=new A),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return t===void 0&&(console.warn("THREE.Line3: .at() target is now required"),t=new A),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){vx.subVectors(e,this.start),yc.subVectors(this.end,this.start);var n=yc.dot(yc),r=yc.dot(vx),i=r/n;return t&&(i=Be.clamp(i,0,1)),i},closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return n===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new A),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}});function ih(e){re.call(this),this.material=e,this.render=function(){}}ih.prototype=Object.create(re.prototype);ih.prototype.constructor=ih;ih.prototype.isImmediateRenderObject=!0;var hr=new A,zr=new A,Jd=new Ct,eC=["a","b","c"];function ah(e,t,n,r){this.object=e,this.size=t!==void 0?t:1;var i=n!==void 0?n:16711680,a=r!==void 0?r:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length*3:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var l=new se,u=new ie(o*2*3,3);l.addAttribute("position",u),ht.call(this,l,new st({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}ah.prototype=Object.create(ht.prototype);ah.prototype.constructor=ah;ah.prototype.update=function(){this.object.updateMatrixWorld(!0),Jd.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,t=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)for(var r=n.vertices,i=n.faces,a=0,o=0,s=i.length;o<s;o++)for(var l=i[o],u=0,c=l.vertexNormals.length;u<c;u++){var f=r[l[eC[u]]],h=l.vertexNormals[u];hr.copy(f).applyMatrix4(e),zr.copy(h).applyMatrix3(Jd).normalize().multiplyScalar(this.size).add(hr),t.setXYZ(a,hr.x,hr.y,hr.z),a=a+1,t.setXYZ(a,zr.x,zr.y,zr.z),a=a+1}else if(n&&n.isBufferGeometry)for(var d=n.attributes.position,p=n.attributes.normal,a=0,u=0,c=d.count;u<c;u++)hr.set(d.getX(u),d.getY(u),d.getZ(u)).applyMatrix4(e),zr.set(p.getX(u),p.getY(u),p.getZ(u)),zr.applyMatrix3(Jd).normalize().multiplyScalar(this.size).add(hr),t.setXYZ(a,hr.x,hr.y,hr.z),a=a+1,t.setXYZ(a,zr.x,zr.y,zr.z),a=a+1;t.needsUpdate=!0};var mx=new A;function eu(e,t){re.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new se,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,a=1,o=32;i<o;i++,a++){var s=i/o*Math.PI*2,l=a/o*Math.PI*2;r.push(Math.cos(s),Math.sin(s),1,Math.cos(l),Math.sin(l),1)}n.addAttribute("position",new ie(r,3));var u=new st({fog:!1});this.cone=new ht(n,u),this.add(this.cone),this.update()}eu.prototype=Object.create(re.prototype);eu.prototype.constructor=eu;eu.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};eu.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),mx.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(mx),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var mi=new A,xc=new Ge,Qd=new Ge;function sM(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,sM(e.children[n]));return t}function tu(e){for(var t=sM(e),n=new se,r=[],i=[],a=new he(0,0,1),o=new he(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}n.addAttribute("position",new ie(r,3)),n.addAttribute("color",new ie(i,3));var u=new st({vertexColors:_u,depthTest:!1,depthWrite:!1,transparent:!0});ht.call(this,n,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}tu.prototype=Object.create(ht.prototype);tu.prototype.constructor=tu;tu.prototype.updateMatrixWorld=function(e){var t=this.bones,n=this.geometry,r=n.getAttribute("position");Qd.getInverse(this.root.matrixWorld);for(var i=0,a=0;i<t.length;i++){var o=t[i];o.parent&&o.parent.isBone&&(xc.multiplyMatrices(Qd,o.matrixWorld),mi.setFromMatrixPosition(xc),r.setXYZ(a,mi.x,mi.y,mi.z),xc.multiplyMatrices(Qd,o.parent.matrixWorld),mi.setFromMatrixPosition(xc),r.setXYZ(a+1,mi.x,mi.y,mi.z),a+=2)}n.getAttribute("position").needsUpdate=!0,re.prototype.updateMatrixWorld.call(this,e)};function nu(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new Oa(t,4,2),i=new Qt({wireframe:!0,fog:!1});ot.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}nu.prototype=Object.create(ot.prototype);nu.prototype.constructor=nu;nu.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};nu.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};function ru(e,t){this.type="RectAreaLightHelper",this.light=e,this.color=t;var n=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],r=new se;r.addAttribute("position",new ie(n,3)),r.computeBoundingSphere();var i=new st({fog:!1});Xt.call(this,r,i);var a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],o=new se;o.addAttribute("position",new ie(a,3)),o.computeBoundingSphere(),this.add(new ot(o,new Qt({side:Et,fog:!1}))),this.update()}ru.prototype=Object.create(Xt.prototype);ru.prototype.constructor=ru;ru.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),this.color!==void 0)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}};ru.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()};var tC=new A,gx=new he,yx=new he;function iu(e,t,n){re.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new Vo(t);r.rotateY(Math.PI*.5),this.material=new Qt({wireframe:!0,fog:!1}),this.color===void 0&&(this.material.vertexColors=_u);var i=r.getAttribute("position"),a=new Float32Array(i.count*3);r.addAttribute("color",new Ie(a,3)),this.add(new ot(r,this.material)),this.update()}iu.prototype=Object.create(re.prototype);iu.prototype.constructor=iu;iu.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};iu.prototype.update=function(){var e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");gx.copy(this.light.color),yx.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?gx:yx;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(tC.setFromMatrixPosition(this.light.matrixWorld).negate())};function au(e,t){this.lightProbe=e,this.size=t;var n={};n.GAMMA_OUTPUT="";var r=new jt({defines:n,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","	vNormal = normalize( normalMatrix * normal );","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","	// matrix is assumed to be orthogonal","	return normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","	#ifdef GAMMA_OUTPUT","		return pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","	#else","		return a;","	#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","	// normal is assumed to have unit length","	float x = normal.x, y = normal.y, z = normal.z;","	// band 0","	vec3 result = shCoefficients[ 0 ] * 0.886227;","	// band 1","	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","	// band 2","	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","	return result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","	vec3 normal = normalize( vNormal );","	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","	vec3 irradiance = shGetIrradianceAt( worldNormal, sh );","	vec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","	outgoingLight = linearToOutput( outgoingLight );","	gl_FragColor = vec4( outgoingLight, 1.0 );","}"].join(`
`)}),i=new Oa(1,32,16);ot.call(this,i,r),this.onBeforeRender()}au.prototype=Object.create(ot.prototype);au.prototype.constructor=au;au.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};au.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity};function Wv(e,t,n,r){e=e||10,t=t||10,n=new he(n!==void 0?n:4473924),r=new he(r!==void 0?r:8947848);for(var i=t/2,a=e/t,o=e/2,s=[],l=[],u=0,c=0,f=-o;u<=t;u++,f+=a){s.push(-o,0,f,o,0,f),s.push(f,0,-o,f,0,o);var h=u===i?n:r;h.toArray(l,c),c+=3,h.toArray(l,c),c+=3,h.toArray(l,c),c+=3,h.toArray(l,c),c+=3}var d=new se;d.addAttribute("position",new ie(s,3)),d.addAttribute("color",new ie(l,3));var p=new st({vertexColors:_u});ht.call(this,d,p)}Wv.prototype=Object.assign(Object.create(ht.prototype),{constructor:Wv,copy:function(e){return ht.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return new this.constructor().copy(this)}});function jv(e,t,n,r,i,a){e=e||10,t=t||16,n=n||8,r=r||64,i=new he(i!==void 0?i:4473924),a=new he(a!==void 0?a:8947848);var o=[],s=[],l,u,c,f,h,d,p;for(f=0;f<=t;f++)c=f/t*(Math.PI*2),l=Math.sin(c)*e,u=Math.cos(c)*e,o.push(0,0,0),o.push(l,0,u),p=f&1?i:a,s.push(p.r,p.g,p.b),s.push(p.r,p.g,p.b);for(f=0;f<=n;f++)for(p=f&1?i:a,d=e-e/n*f,h=0;h<r;h++)c=h/r*(Math.PI*2),l=Math.sin(c)*d,u=Math.cos(c)*d,o.push(l,0,u),s.push(p.r,p.g,p.b),c=(h+1)/r*(Math.PI*2),l=Math.sin(c)*d,u=Math.cos(c)*d,o.push(l,0,u),s.push(p.r,p.g,p.b);var x=new se;x.addAttribute("position",new ie(o,3)),x.addAttribute("color",new ie(s,3));var y=new st({vertexColors:_u});ht.call(this,x,y)}jv.prototype=Object.create(ht.prototype);jv.prototype.constructor=jv;function ou(e,t,n,r){this.audio=e,this.range=t||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=r||2;var i=new se,a=this.divisionsInnerAngle+this.divisionsOuterAngle*2,o=new Float32Array((a*3+3)*3);i.addAttribute("position",new Ie(o,3));var s=new st({color:65280}),l=new st({color:16776960});Xt.call(this,i,[l,s]),this.update()}ou.prototype=Object.create(Xt.prototype);ou.prototype.constructor=ou;ou.prototype.update=function(){var e=this.audio,t=this.range,n=this.divisionsInnerAngle,r=this.divisionsOuterAngle,i=Be.degToRad(e.panner.coneInnerAngle),a=Be.degToRad(e.panner.coneOuterAngle),o=i/2,s=a/2,l=0,u=0,c,f,h=this.geometry,d=h.attributes.position;h.clearGroups();function p(x,y,v,m){var w=(y-x)/v;for(d.setXYZ(l,0,0,0),u++,c=x;c<y;c+=w)f=l+u,d.setXYZ(f,Math.sin(c)*t,0,Math.cos(c)*t),d.setXYZ(f+1,Math.sin(Math.min(c+w,y))*t,0,Math.cos(Math.min(c+w,y))*t),d.setXYZ(f+2,0,0,0),u+=3;h.addGroup(l,u,m),l+=u,u=0}p(-s,-o,r,0),p(-o,o,n,1),p(o,s,r,0),d.needsUpdate=!0,i===a&&(this.material[0].visible=!1)};ou.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()};var Cs=new A,wc=new A,xx=new Ct;function oh(e,t,n,r){this.object=e,this.size=t!==void 0?t:1;var i=n!==void 0?n:16776960,a=r!==void 0?r:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new se,u=new ie(o*2*3,3);l.addAttribute("position",u),ht.call(this,l,new st({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}oh.prototype=Object.create(ht.prototype);oh.prototype.constructor=oh;oh.prototype.update=function(){this.object.updateMatrixWorld(!0),xx.getNormalMatrix(this.object.matrixWorld);for(var e=this.object.matrixWorld,t=this.geometry.attributes.position,n=this.object.geometry,r=n.vertices,i=n.faces,a=0,o=0,s=i.length;o<s;o++){var l=i[o],u=l.normal;Cs.copy(r[l.a]).add(r[l.b]).add(r[l.c]).divideScalar(3).applyMatrix4(e),wc.copy(u).applyMatrix3(xx).normalize().multiplyScalar(this.size).add(Cs),t.setXYZ(a,Cs.x,Cs.y,Cs.z),a=a+1,t.setXYZ(a,wc.x,wc.y,wc.z),a=a+1}t.needsUpdate=!0};var wx=new A,_c=new A,_x=new A;function su(e,t,n){re.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,t===void 0&&(t=1);var r=new se;r.addAttribute("position",new ie([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new st({fog:!1});this.lightPlane=new Xt(r,i),this.add(this.lightPlane),r=new se,r.addAttribute("position",new ie([0,0,0,0,0,1],3)),this.targetLine=new Xt(r,i),this.add(this.targetLine),this.update()}su.prototype=Object.create(re.prototype);su.prototype.constructor=su;su.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};su.prototype.update=function(){wx.setFromMatrixPosition(this.light.matrixWorld),_c.setFromMatrixPosition(this.light.target.matrixWorld),_x.subVectors(_c,wx),this.lightPlane.lookAt(_c),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_c),this.targetLine.scale.z=_x.length()};var Mc=new A,mt=new ei;function sh(e){var t=new se,n=new st({color:16777215,vertexColors:$S}),r=[],i=[],a={},o=new he(16755200),s=new he(16711680),l=new he(43775),u=new he(16777215),c=new he(3355443);f("n1","n2",o),f("n2","n4",o),f("n4","n3",o),f("n3","n1",o),f("f1","f2",o),f("f2","f4",o),f("f4","f3",o),f("f3","f1",o),f("n1","f1",o),f("n2","f2",o),f("n3","f3",o),f("n4","f4",o),f("p","n1",s),f("p","n2",s),f("p","n3",s),f("p","n4",s),f("u1","u2",l),f("u2","u3",l),f("u3","u1",l),f("c","t",u),f("p","c",c),f("cn1","cn2",c),f("cn3","cn4",c),f("cf1","cf2",c),f("cf3","cf4",c);function f(d,p,x){h(d,x),h(p,x)}function h(d,p){r.push(0,0,0),i.push(p.r,p.g,p.b),a[d]===void 0&&(a[d]=[]),a[d].push(r.length/3-1)}t.addAttribute("position",new ie(r,3)),t.addAttribute("color",new ie(i,3)),ht.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}sh.prototype=Object.create(ht.prototype);sh.prototype.constructor=sh;sh.prototype.update=function(){var e=this.geometry,t=this.pointMap,n=1,r=1;mt.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),yt("c",t,e,mt,0,0,-1),yt("t",t,e,mt,0,0,1),yt("n1",t,e,mt,-n,-r,-1),yt("n2",t,e,mt,n,-r,-1),yt("n3",t,e,mt,-n,r,-1),yt("n4",t,e,mt,n,r,-1),yt("f1",t,e,mt,-n,-r,1),yt("f2",t,e,mt,n,-r,1),yt("f3",t,e,mt,-n,r,1),yt("f4",t,e,mt,n,r,1),yt("u1",t,e,mt,n*.7,r*1.1,-1),yt("u2",t,e,mt,-n*.7,r*1.1,-1),yt("u3",t,e,mt,0,r*2,-1),yt("cf1",t,e,mt,-n,0,1),yt("cf2",t,e,mt,n,0,1),yt("cf3",t,e,mt,0,-r,1),yt("cf4",t,e,mt,0,r,1),yt("cn1",t,e,mt,-n,0,-1),yt("cn2",t,e,mt,n,0,-1),yt("cn3",t,e,mt,0,-r,-1),yt("cn4",t,e,mt,0,r,-1),e.getAttribute("position").needsUpdate=!0};function yt(e,t,n,r,i,a,o){Mc.set(i,a,o).unproject(r);var s=t[e];if(s!==void 0)for(var l=n.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],Mc.x,Mc.y,Mc.z)}var bc=new li;function Da(e,t){this.object=e,t===void 0&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),i=new se;i.setIndex(new Ie(n,1)),i.addAttribute("position",new Ie(r,3)),ht.call(this,i,new st({color:t})),this.matrixAutoUpdate=!1,this.update()}Da.prototype=Object.create(ht.prototype);Da.prototype.constructor=Da;Da.prototype.update=function(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&bc.setFromObject(this.object),!bc.isEmpty()){var t=bc.min,n=bc.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}};Da.prototype.setFromObject=function(e){return this.object=e,this.update(),this};Da.prototype.copy=function(e){return ht.prototype.copy.call(this,e),this.object=e.object,this};Da.prototype.clone=function(){return new this.constructor().copy(this)};function lh(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],i=new se;i.setIndex(new Ie(n,1)),i.addAttribute("position",new ie(r,3)),ht.call(this,i,new st({color:t})),this.geometry.computeBoundingSphere()}lh.prototype=Object.create(ht.prototype);lh.prototype.constructor=lh;lh.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),re.prototype.updateMatrixWorld.call(this,e))};function uh(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=t===void 0?1:t;var r=n!==void 0?n:16776960,i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],a=new se;a.addAttribute("position",new ie(i,3)),a.computeBoundingSphere(),Xt.call(this,a,new st({color:r}));var o=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new se;s.addAttribute("position",new ie(o,3)),s.computeBoundingSphere(),this.add(new ot(s,new Qt({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}uh.prototype=Object.create(Xt.prototype);uh.prototype.constructor=uh;uh.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?Et:wu,this.lookAt(this.plane.normal),re.prototype.updateMatrixWorld.call(this,e)};var Mx=new A,Ec,Kd;function Ui(e,t,n,r,i,a){re.call(this),e===void 0&&(e=new A(0,0,1)),t===void 0&&(t=new A(0,0,0)),n===void 0&&(n=1),r===void 0&&(r=16776960),i===void 0&&(i=.2*n),a===void 0&&(a=.2*i),Ec===void 0&&(Ec=new se,Ec.addAttribute("position",new ie([0,0,0,0,1,0],3)),Kd=new Bi(0,.5,1,5,1),Kd.translate(0,-.5,0)),this.position.copy(t),this.line=new Xt(Ec,new st({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ot(Kd,new Qt({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}Ui.prototype=Object.create(re.prototype);Ui.prototype.constructor=Ui;Ui.prototype.setDirection=function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Mx.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Mx,t)}};Ui.prototype.setLength=function(e,t,n){t===void 0&&(t=.2*e),n===void 0&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()};Ui.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)};Ui.prototype.copy=function(e){return re.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this};Ui.prototype.clone=function(){return new this.constructor().copy(this)};function Xv(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new se;r.addAttribute("position",new ie(t,3)),r.addAttribute("color",new ie(n,3));var i=new st({vertexColors:_u});ht.call(this,r,i)}Xv.prototype=Object.create(ht.prototype);Xv.prototype.constructor=Xv;Se.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Se.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e};Object.assign(Si.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Oe,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new A(i.x,i.y,i.z||0))}return t}});Object.assign(gr.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}});Object.create(En.prototype);Object.create(En.prototype);function lM(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),En.call(this,e),this.type="catmullrom"}lM.prototype=Object.create(En.prototype);Object.assign(lM.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});Wv.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};tu.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(nt.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Z1.extractUrlBase(e)}});nt.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Object.assign(Bv.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}});Object.assign(aM.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}});Object.assign(li.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}});oM.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)};Object.assign(Be,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Be.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Be.ceilPowerOfTwo(e)}});Object.assign(Ct.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Ge.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new A().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)}});Vr.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)};Bt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)};Object.assign(fs.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}});Object.assign(It.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}});Object.assign(It,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),It.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),It.getNormal(e,t,n,r)}});Object.assign(ma.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Wo(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new jo(this,e)}});Object.assign(X.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(A.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(et.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Oe.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}});Object.assign(re.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}});Object.defineProperties(re.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(Df.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(pv.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});If.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Se.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}});wt.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(e)};Object.defineProperties(ct.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}});Object.defineProperties(Ie.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}});Object.assign(Ie.prototype,{copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(e){return console.warn("THREE.BufferAttribute: .setArray has been deprecated. Use BufferGeometry .setAttribute to replace/resize attribute buffers"),this.count=e!==void 0?e.length/this.itemSize:0,this.array=e,this}});Object.assign(se.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(se.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.assign(La.prototype,{setArray:function(e){return console.warn("THREE.InterleavedBuffer: .setArray has been deprecated. Use BufferGeometry .setAttribute to replace/resize attribute buffers"),this.count=e!==void 0?e.length/this.stride:0,this.array=e,this}});Object.assign(ti.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Gv.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Ne.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new he}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===x1}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}});Object.defineProperties(Er.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(jt.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}});Object.assign(pg.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(pg.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}}});Object.defineProperties(U1.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Ta.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}});Object.defineProperties(fn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}});Object.defineProperties(dg.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}});Kl.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this,n=new Uv;return n.load(e,function(r){t.setBuffer(r)}),this};tM.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};Ll.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};Sa.crossOrigin=void 0;Sa.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Ao;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a};Sa.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Tv;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a};Sa.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Sa.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:jS}}));var uM=function(){if(typeof Map<"u")return Map;function e(t,n){var r=-1;return t.some(function(i,a){return i[0]===n?(r=a,!0):!1}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(n){var r=e(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},t.prototype.set=function(n,r){var i=e(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},t.prototype.delete=function(n){var r=this.__entries__,i=e(r,n);~i&&r.splice(i,1)},t.prototype.has=function(n){return!!~e(this.__entries__,n)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,a=this.__entries__;i<a.length;i++){var o=a[i];n.call(r,o[1],o[0])}},t}()}(),qv=typeof window<"u"&&typeof document<"u"&&window.document===document,ch=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),nC=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(ch):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),rC=2;function iC(e,t){var n=!1,r=!1,i=0;function a(){n&&(n=!1,e()),r&&s()}function o(){nC(a)}function s(){var l=Date.now();if(n){if(l-i<rC)return;r=!0}else n=!0,r=!1,setTimeout(o,t);i=l}return s}var aC=20,oC=["top","right","bottom","left","width","height","size","weight"],sC=typeof MutationObserver<"u",lC=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=iC(this.refresh.bind(this),aC)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var n=this.observers_,r=n.indexOf(t);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!qv||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),sC?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!qv||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var n=t.propertyName,r=n===void 0?"":n,i=oC.some(function(a){return!!~r.indexOf(a)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),cM=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},ts=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||ch},fM=Bh(0,0,0,0);function fh(e){return parseFloat(e)||0}function bx(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(r,i){var a=e["border-"+i+"-width"];return r+fh(a)},0)}function uC(e){for(var t=["top","right","bottom","left"],n={},r=0,i=t;r<i.length;r++){var a=i[r],o=e["padding-"+a];n[a]=fh(o)}return n}function cC(e){var t=e.getBBox();return Bh(0,0,t.width,t.height)}function fC(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return fM;var r=ts(e).getComputedStyle(e),i=uC(r),a=i.left+i.right,o=i.top+i.bottom,s=fh(r.width),l=fh(r.height);if(r.boxSizing==="border-box"&&(Math.round(s+a)!==t&&(s-=bx(r,"left","right")+a),Math.round(l+o)!==n&&(l-=bx(r,"top","bottom")+o)),!dC(e)){var u=Math.round(s+a)-t,c=Math.round(l+o)-n;Math.abs(u)!==1&&(s-=u),Math.abs(c)!==1&&(l-=c)}return Bh(i.left,i.top,s,l)}var hC=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof ts(e).SVGGraphicsElement}:function(e){return e instanceof ts(e).SVGElement&&typeof e.getBBox=="function"}}();function dC(e){return e===ts(e).document.documentElement}function pC(e){return qv?hC(e)?cC(e):fC(e):fM}function vC(e){var t=e.x,n=e.y,r=e.width,i=e.height,a=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(a.prototype);return cM(o,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),o}function Bh(e,t,n,r){return{x:e,y:t,width:n,height:r}}var mC=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Bh(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=pC(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),gC=function(){function e(t,n){var r=vC(n);cM(this,{target:t,contentRect:r})}return e}(),yC=function(){function e(t,n,r){if(this.activeObservations_=[],this.observations_=new uM,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof ts(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new mC(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof ts(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;!n.has(t)||(n.delete(t),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},e.prototype.broadcastActive=function(){if(!!this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new gC(r.target,r.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),hM=typeof WeakMap<"u"?new WeakMap:new uM,dM=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=lC.getInstance(),r=new yC(t,n,this);hM.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach(function(e){dM.prototype[e]=function(){var t;return(t=hM.get(this))[e].apply(t,arguments)}});var xC=function(){return typeof ch.ResizeObserver<"u"?ch.ResizeObserver:dM}(),wC={backside:!0,coefficient:.5,color:"gold",size:2,power:1};function _C(e,t,n){return new jt({depthWrite:!1,fragmentShader:`
uniform vec3 color;
uniform float coefficient;
uniform float power;
varying vec3 vVertexNormal;
varying vec3 vVertexWorldPosition;
void main() {
  vec3 worldCameraToVertex = vVertexWorldPosition - cameraPosition;
  vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;
  viewCameraToVertex = normalize(viewCameraToVertex);
  float intensity	= pow(
    coefficient + dot(vVertexNormal, viewCameraToVertex),
    power
  );
  gl_FragColor = vec4(color, intensity);
}`,transparent:!0,uniforms:{coefficient:{value:e},color:{value:new he(t)},power:{value:n}},vertexShader:`
varying vec3 vVertexWorldPosition;
varying vec3 vVertexNormal;
void main() {
  vVertexNormal	= normalize(normalMatrix * normal);
  vVertexWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;
  gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`})}function MC(e,t){var n=e.clone(),r=new Array(n.vertices.length);return n.faces.forEach(function(i){i instanceof Tl?(r[i.a]=i.vertexNormals[0],r[i.b]=i.vertexNormals[1],r[i.c]=i.vertexNormals[2]):console.error("Face needs to be an instance of THREE.Face3.")}),n.vertices.forEach(function(i,a){var o=r[a],s=o.y,l=o.z;i.x+=o.x*t,i.y+=s*t,i.z+=l*t}),n}function Ex(e,t){t===void 0&&(t=wC);var n=t.backside,r=t.coefficient,i=t.color,a=t.power,o=MC(e,t.size),s=_C(r,i,a);return n&&(s.side=Et),new ot(o,s)}function pM(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vM(e){let t=e,n=e;e.length===1&&(t=(o,s)=>e(o)-s,n=bC(e));function r(o,s,l,u){for(l==null&&(l=0),u==null&&(u=o.length);l<u;){const c=l+u>>>1;n(o[c],s)<0?l=c+1:u=c}return l}function i(o,s,l,u){for(l==null&&(l=0),u==null&&(u=o.length);l<u;){const c=l+u>>>1;n(o[c],s)>0?u=c:l=c+1}return l}function a(o,s,l,u){l==null&&(l=0),u==null&&(u=o.length);const c=r(o,s,l,u-1);return c>l&&t(o[c-1],s)>-t(o[c],s)?c-1:c}return{left:r,center:a,right:i}}function bC(e){return(t,n)=>pM(e(t),n)}function EC(e){return e===null?NaN:+e}const SC=vM(pM),TC=SC.right;vM(EC).center;const PC=TC;var Yv=Math.sqrt(50),$v=Math.sqrt(10),Zv=Math.sqrt(2);function AC(e,t,n){var r,i=-1,a,o,s;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(s=mM(e,t,n))===0||!isFinite(s))return[];if(s>0){let l=Math.round(e/s),u=Math.round(t/s);for(l*s<e&&++l,u*s>t&&--u,o=new Array(a=u-l+1);++i<a;)o[i]=(l+i)*s}else{s=-s;let l=Math.round(e*s),u=Math.round(t*s);for(l/s<e&&++l,u/s>t&&--u,o=new Array(a=u-l+1);++i<a;)o[i]=(l+i)/s}return r&&o.reverse(),o}function mM(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Yv?10:a>=$v?5:a>=Zv?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Yv?10:a>=$v?5:a>=Zv?2:1)}function LC(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Yv?i*=10:a>=$v?i*=5:a>=Zv&&(i*=2),t<e?-i:i}function CC(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function wg(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function gM(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function bu(){}var lu=.7,hh=1/lu,Lo="\\s*([+-]?\\d+)\\s*",uu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",RC=/^#([0-9a-f]{3,8})$/,OC=new RegExp("^rgb\\("+[Lo,Lo,Lo]+"\\)$"),DC=new RegExp("^rgb\\("+[Mr,Mr,Mr]+"\\)$"),IC=new RegExp("^rgba\\("+[Lo,Lo,Lo,uu]+"\\)$"),NC=new RegExp("^rgba\\("+[Mr,Mr,Mr,uu]+"\\)$"),kC=new RegExp("^hsl\\("+[uu,Mr,Mr]+"\\)$"),FC=new RegExp("^hsla\\("+[uu,Mr,Mr,uu]+"\\)$"),Sx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wg(bu,cu,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Tx,formatHex:Tx,formatHsl:zC,formatRgb:Px,toString:Px});function Tx(){return this.rgb().formatHex()}function zC(){return yM(this).formatHsl()}function Px(){return this.rgb().formatRgb()}function cu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=RC.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ax(t):n===3?new xn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Sc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Sc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=OC.exec(e))?new xn(t[1],t[2],t[3],1):(t=DC.exec(e))?new xn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=IC.exec(e))?Sc(t[1],t[2],t[3],t[4]):(t=NC.exec(e))?Sc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=kC.exec(e))?Rx(t[1],t[2]/100,t[3]/100,1):(t=FC.exec(e))?Rx(t[1],t[2]/100,t[3]/100,t[4]):Sx.hasOwnProperty(e)?Ax(Sx[e]):e==="transparent"?new xn(NaN,NaN,NaN,0):null}function Ax(e){return new xn(e>>16&255,e>>8&255,e&255,1)}function Sc(e,t,n,r){return r<=0&&(e=t=n=NaN),new xn(e,t,n,r)}function BC(e){return e instanceof bu||(e=cu(e)),e?(e=e.rgb(),new xn(e.r,e.g,e.b,e.opacity)):new xn}function Jv(e,t,n,r){return arguments.length===1?BC(e):new xn(e,t,n,r==null?1:r)}function xn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}wg(xn,Jv,gM(bu,{brighter:function(e){return e=e==null?hh:Math.pow(hh,e),new xn(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?lu:Math.pow(lu,e),new xn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lx,formatHex:Lx,formatRgb:Cx,toString:Cx}));function Lx(){return"#"+ep(this.r)+ep(this.g)+ep(this.b)}function Cx(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function ep(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Rx(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new yr(e,t,n,r)}function yM(e){if(e instanceof yr)return new yr(e.h,e.s,e.l,e.opacity);if(e instanceof bu||(e=cu(e)),!e)return new yr;if(e instanceof yr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new yr(o,s,l,e.opacity)}function UC(e,t,n,r){return arguments.length===1?yM(e):new yr(e,t,n,r==null?1:r)}function yr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}wg(yr,UC,gM(bu,{brighter:function(e){return e=e==null?hh:Math.pow(hh,e),new yr(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?lu:Math.pow(lu,e),new yr(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new xn(tp(e>=240?e-240:e+120,i,r),tp(e,i,r),tp(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function tp(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const _g=e=>()=>e;function GC(e,t){return function(n){return e+n*t}}function VC(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function HC(e){return(e=+e)==1?xM:function(t,n){return n-t?VC(t,n,e):_g(isNaN(t)?n:t)}}function xM(e,t){var n=t-e;return n?GC(e,n):_g(isNaN(e)?t:e)}const Ox=function e(t){var n=HC(t);function r(i,a){var o=n((i=Jv(i)).r,(a=Jv(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=xM(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function WC(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function jC(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function XC(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Mg(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function qC(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function dh(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function YC(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Mg(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Qv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,np=new RegExp(Qv.source,"g");function $C(e){return function(){return e}}function ZC(e){return function(t){return e(t)+""}}function JC(e,t){var n=Qv.lastIndex=np.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Qv.exec(e))&&(i=np.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:dh(r,i)})),n=np.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?ZC(l[0].x):$C(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function Mg(e,t){var n=typeof t,r;return t==null||n==="boolean"?_g(t):(n==="number"?dh:n==="string"?(r=cu(t))?(t=r,Ox):JC:t instanceof cu?Ox:t instanceof Date?qC:jC(t)?WC:Array.isArray(t)?XC:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?YC:dh)(e,t)}function QC(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function KC(e){return function(){return e}}function eR(e){return+e}var Dx=[0,1];function wo(e){return e}function Kv(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:KC(isNaN(t)?NaN:.5)}function tR(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function nR(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=Kv(i,r),a=n(o,a)):(r=Kv(r,i),a=n(a,o)),function(s){return a(r(s))}}function rR(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Kv(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(s){var l=PC(e,s,1,r)-1;return a[l](i[l](s))}}function iR(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function aR(){var e=Dx,t=Dx,n=Mg,r,i,a,o=wo,s,l,u;function c(){var h=Math.min(e.length,t.length);return o!==wo&&(o=tR(e[0],e[h-1])),s=h>2?rR:nR,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(l||(l=s(e.map(r),t,n)))(r(o(h)))}return f.invert=function(h){return o(i((u||(u=s(t,e.map(r),dh)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,eR),c()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=QC,c()},f.clamp=function(h){return arguments.length?(o=h?!0:wo,c()):o!==wo},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return r=h,i=d,c()}}function oR(){return aR()(wo,wo)}function sR(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ph(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ns(e){return e=ph(Math.abs(e)),e?e[1]:NaN}function lR(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function uR(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var cR=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vh(e){if(!(t=cR.exec(e)))throw new Error("invalid format: "+e);var t;return new bg({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}vh.prototype=bg.prototype;function bg(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}bg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fR(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var wM;function hR(e,t){var n=ph(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(wM=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ph(e,Math.max(0,t+a-1))[0]}function Ix(e,t){var n=ph(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Nx={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:sR,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ix(e*100,t),r:Ix,s:hR,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function kx(e){return e}var Fx=Array.prototype.map,zx=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function dR(e){var t=e.grouping===void 0||e.thousands===void 0?kx:lR(Fx.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?kx:uR(Fx.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=vh(f);var h=f.fill,d=f.align,p=f.sign,x=f.symbol,y=f.zero,v=f.width,m=f.comma,w=f.precision,g=f.trim,_=f.type;_==="n"?(m=!0,_="g"):Nx[_]||(w===void 0&&(w=12),g=!0,_="g"),(y||h==="0"&&d==="=")&&(y=!0,h="0",d="=");var b=x==="$"?n:x==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",E=x==="$"?r:/[%p]/.test(_)?o:"",S=Nx[_],O=/[defgprs%]/.test(_);w=w===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function D(L){var R=b,N=E,B,G,W;if(_==="c")N=S(L)+N,L="";else{L=+L;var Y=L<0||1/L<0;if(L=isNaN(L)?l:S(Math.abs(L),w),g&&(L=fR(L)),Y&&+L==0&&p!=="+"&&(Y=!1),R=(Y?p==="("?p:s:p==="-"||p==="("?"":p)+R,N=(_==="s"?zx[8+wM/3]:"")+N+(Y&&p==="("?")":""),O){for(B=-1,G=L.length;++B<G;)if(W=L.charCodeAt(B),48>W||W>57){N=(W===46?i+L.slice(B+1):L.slice(B))+N,L=L.slice(0,B);break}}}m&&!y&&(L=t(L,1/0));var z=R.length+L.length+N.length,V=z<v?new Array(v-z+1).join(h):"";switch(m&&y&&(L=t(V+L,V.length?v-N.length:1/0),V=""),d){case"<":L=R+L+N+V;break;case"=":L=R+V+L+N;break;case"^":L=V.slice(0,z=V.length>>1)+R+L+N+V.slice(z);break;default:L=V+R+L+N;break}return a(L)}return D.toString=function(){return f+""},D}function c(f,h){var d=u((f=vh(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(ns(h)/3)))*3,x=Math.pow(10,-p),y=zx[8+p/3];return function(v){return d(x*v)+y}}return{format:u,formatPrefix:c}}var Tc,_M,MM;pR({thousands:",",grouping:[3],currency:["$",""]});function pR(e){return Tc=dR(e),_M=Tc.format,MM=Tc.formatPrefix,Tc}function vR(e){return Math.max(0,-ns(Math.abs(e)))}function mR(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ns(t)/3)))*3-ns(Math.abs(e)))}function gR(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ns(t)-ns(e))+1}function yR(e,t,n,r){var i=LC(e,t,n),a;switch(r=vh(r==null?",f":r),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=mR(i,o))&&(r.precision=a),MM(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=gR(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=vR(i))&&(r.precision=a-(r.type==="%")*2);break}}return _M(r)}function xR(e){var t=e.domain;return e.ticks=function(n){var r=t();return AC(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return yR(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],s=r[a],l,u,c=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);c-- >0;){if(u=mM(o,s,n),u===l)return r[i]=o,r[a]=s,t(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function bM(){var e=oR();return e.copy=function(){return iR(e,bM())},CC.apply(e,arguments),xR(e)}var fu=function(e,t){this.object=e,this.domElement=t!==void 0?t:document,this.enabled=!0,this.target=new A,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:pr.ROTATE,MIDDLE:pr.DOLLY,RIGHT:pr.PAN},this.touches={ONE:wi.ROTATE,TWO:wi.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),s=o.NONE},this.update=function(){var I=new A,le=new Bt().setFromUnitVectors(e.up,new A(0,1,0)),Me=le.clone().inverse(),ze=new A,Te=new Bt;return function(){var ne=n.object.position;return I.copy(ne).sub(n.target),I.applyQuaternion(le),u.setFromVector3(I),n.autoRotate&&s===o.NONE&&O(E()),n.enableDamping?(u.theta+=c.theta*n.dampingFactor,u.phi+=c.phi*n.dampingFactor):(u.theta+=c.theta,u.phi+=c.phi),u.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=f,u.radius=Math.max(n.minDistance,Math.min(n.maxDistance,u.radius)),n.enableDamping===!0?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),I.setFromSpherical(u),I.applyQuaternion(Me),ne.copy(n.target).add(I),n.object.lookAt(n.target),n.enableDamping===!0?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),h.set(0,0,0)),f=1,d||ze.distanceToSquared(n.object.position)>l||8*(1-Te.dot(n.object.quaternion))>l?(n.dispatchEvent(r),ze.copy(n.object.position),Te.copy(n.object.quaternion),d=!1,!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",ve,!1),n.domElement.removeEventListener("mousedown",be,!1),n.domElement.removeEventListener("wheel",we,!1),n.domElement.removeEventListener("touchstart",Ue,!1),n.domElement.removeEventListener("touchend",Ve,!1),n.domElement.removeEventListener("touchmove",ke,!1),document.removeEventListener("mousemove",pe,!1),document.removeEventListener("mouseup",ae,!1),window.removeEventListener("keydown",Le,!1)};var n=this,r={type:"change"},i={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},s=o.NONE,l=1e-6,u=new Hv,c=new Hv,f=1,h=new A,d=!1,p=new X,x=new X,y=new X,v=new X,m=new X,w=new X,g=new X,_=new X,b=new X;function E(){return 2*Math.PI/60/60*n.autoRotateSpeed}function S(){return Math.pow(.95,n.zoomSpeed)}function O(I){c.theta-=I}function D(I){c.phi-=I}var L=function(){var I=new A;return function(Me,ze){I.setFromMatrixColumn(ze,0),I.multiplyScalar(-Me),h.add(I)}}(),R=function(){var I=new A;return function(Me,ze){n.screenSpacePanning===!0?I.setFromMatrixColumn(ze,1):(I.setFromMatrixColumn(ze,0),I.crossVectors(n.object.up,I)),I.multiplyScalar(Me),h.add(I)}}(),N=function(){var I=new A;return function(Me,ze){var Te=n.domElement===document?n.domElement.body:n.domElement;if(n.object.isPerspectiveCamera){var k=n.object.position;I.copy(k).sub(n.target);var ne=I.length();ne*=Math.tan(n.object.fov/2*Math.PI/180),L(2*Me*ne/Te.clientHeight,n.object.matrix),R(2*ze*ne/Te.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(L(Me*(n.object.right-n.object.left)/n.object.zoom/Te.clientWidth,n.object.matrix),R(ze*(n.object.top-n.object.bottom)/n.object.zoom/Te.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function B(I){n.object.isPerspectiveCamera?f/=I:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*I)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function G(I){n.object.isPerspectiveCamera?f*=I:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/I)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function W(I){p.set(I.clientX,I.clientY)}function Y(I){g.set(I.clientX,I.clientY)}function z(I){v.set(I.clientX,I.clientY)}function V(I){x.set(I.clientX,I.clientY),y.subVectors(x,p).multiplyScalar(n.rotateSpeed);var le=n.domElement===document?n.domElement.body:n.domElement;O(2*Math.PI*y.x/le.clientHeight),D(2*Math.PI*y.y/le.clientHeight),p.copy(x),n.update()}function j(I){_.set(I.clientX,I.clientY),b.subVectors(_,g),b.y>0?B(S()):b.y<0&&G(S()),g.copy(_),n.update()}function q(I){m.set(I.clientX,I.clientY),w.subVectors(m,v).multiplyScalar(n.panSpeed),N(w.x,w.y),v.copy(m),n.update()}function K(I){I.deltaY<0?G(S()):I.deltaY>0&&B(S()),n.update()}function Pe(I){var le=!1;switch(I.keyCode){case n.keys.UP:N(0,n.keyPanSpeed),le=!0;break;case n.keys.BOTTOM:N(0,-n.keyPanSpeed),le=!0;break;case n.keys.LEFT:N(n.keyPanSpeed,0),le=!0;break;case n.keys.RIGHT:N(-n.keyPanSpeed,0),le=!0;break}le&&(I.preventDefault(),n.update())}function H(I){if(I.touches.length==1)p.set(I.touches[0].pageX,I.touches[0].pageY);else{var le=.5*(I.touches[0].pageX+I.touches[1].pageX),Me=.5*(I.touches[0].pageY+I.touches[1].pageY);p.set(le,Me)}}function ue(I){if(I.touches.length==1)v.set(I.touches[0].pageX,I.touches[0].pageY);else{var le=.5*(I.touches[0].pageX+I.touches[1].pageX),Me=.5*(I.touches[0].pageY+I.touches[1].pageY);v.set(le,Me)}}function te(I){var le=I.touches[0].pageX-I.touches[1].pageX,Me=I.touches[0].pageY-I.touches[1].pageY,ze=Math.sqrt(le*le+Me*Me);g.set(0,ze)}function de(I){n.enableZoom&&te(I),n.enablePan&&ue(I)}function xe(I){n.enableZoom&&te(I),n.enableRotate&&H(I)}function Ye(I){if(I.touches.length==1)x.set(I.touches[0].pageX,I.touches[0].pageY);else{var le=.5*(I.touches[0].pageX+I.touches[1].pageX),Me=.5*(I.touches[0].pageY+I.touches[1].pageY);x.set(le,Me)}y.subVectors(x,p).multiplyScalar(n.rotateSpeed);var ze=n.domElement===document?n.domElement.body:n.domElement;O(2*Math.PI*y.x/ze.clientHeight),D(2*Math.PI*y.y/ze.clientHeight),p.copy(x)}function C(I){if(I.touches.length==1)m.set(I.touches[0].pageX,I.touches[0].pageY);else{var le=.5*(I.touches[0].pageX+I.touches[1].pageX),Me=.5*(I.touches[0].pageY+I.touches[1].pageY);m.set(le,Me)}w.subVectors(m,v).multiplyScalar(n.panSpeed),N(w.x,w.y),v.copy(m)}function T(I){var le=I.touches[0].pageX-I.touches[1].pageX,Me=I.touches[0].pageY-I.touches[1].pageY,ze=Math.sqrt(le*le+Me*Me);_.set(0,ze),b.set(0,Math.pow(_.y/g.y,n.zoomSpeed)),B(b.y),g.copy(_)}function $(I){n.enableZoom&&T(I),n.enablePan&&C(I)}function ee(I){n.enableZoom&&T(I),n.enableRotate&&Ye(I)}function be(I){if(n.enabled!==!1){switch(I.preventDefault(),n.domElement.focus?n.domElement.focus():window.focus(),I.button){case 0:switch(n.mouseButtons.LEFT){case pr.ROTATE:if(I.ctrlKey||I.metaKey||I.shiftKey){if(n.enablePan===!1)return;z(I),s=o.PAN}else{if(n.enableRotate===!1)return;W(I),s=o.ROTATE}break;case pr.PAN:if(I.ctrlKey||I.metaKey||I.shiftKey){if(n.enableRotate===!1)return;W(I),s=o.ROTATE}else{if(n.enablePan===!1)return;z(I),s=o.PAN}break;default:s=o.NONE}break;case 1:switch(n.mouseButtons.MIDDLE){case pr.DOLLY:if(n.enableZoom===!1)return;Y(I),s=o.DOLLY;break;default:s=o.NONE}break;case 2:switch(n.mouseButtons.RIGHT){case pr.ROTATE:if(n.enableRotate===!1)return;W(I),s=o.ROTATE;break;case pr.PAN:if(n.enablePan===!1)return;z(I),s=o.PAN;break;default:s=o.NONE}break}s!==o.NONE&&(document.addEventListener("mousemove",pe,!1),document.addEventListener("mouseup",ae,!1),n.dispatchEvent(i))}}function pe(I){if(n.enabled!==!1)switch(I.preventDefault(),s){case o.ROTATE:if(n.enableRotate===!1)return;V(I);break;case o.DOLLY:if(n.enableZoom===!1)return;j(I);break;case o.PAN:if(n.enablePan===!1)return;q(I);break}}function ae(I){n.enabled!==!1&&(document.removeEventListener("mousemove",pe,!1),document.removeEventListener("mouseup",ae,!1),n.dispatchEvent(a),s=o.NONE)}function we(I){n.enabled===!1||n.enableZoom===!1||s!==o.NONE&&s!==o.ROTATE||(I.preventDefault(),I.stopPropagation(),n.dispatchEvent(i),K(I),n.dispatchEvent(a))}function Le(I){n.enabled===!1||n.enableKeys===!1||n.enablePan===!1||Pe(I)}function Ue(I){if(n.enabled!==!1){switch(I.preventDefault(),I.touches.length){case 1:switch(n.touches.ONE){case wi.ROTATE:if(n.enableRotate===!1)return;H(I),s=o.TOUCH_ROTATE;break;case wi.PAN:if(n.enablePan===!1)return;ue(I),s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(n.touches.TWO){case wi.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;de(I),s=o.TOUCH_DOLLY_PAN;break;case wi.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;xe(I),s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&n.dispatchEvent(i)}}function ke(I){if(n.enabled!==!1)switch(I.preventDefault(),I.stopPropagation(),s){case o.TOUCH_ROTATE:if(n.enableRotate===!1)return;Ye(I),n.update();break;case o.TOUCH_PAN:if(n.enablePan===!1)return;C(I),n.update();break;case o.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;$(I),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;ee(I),n.update();break;default:s=o.NONE}}function Ve(I){n.enabled!==!1&&(n.dispatchEvent(a),s=o.NONE)}function ve(I){n.enabled!==!1&&I.preventDefault()}n.domElement.addEventListener("contextmenu",ve,!1),n.domElement.addEventListener("mousedown",be,!1),n.domElement.addEventListener("wheel",we,!1),n.domElement.addEventListener("touchstart",Ue,!1),n.domElement.addEventListener("touchend",Ve,!1),n.domElement.addEventListener("touchmove",ke,!1),window.addEventListener("keydown",Le,!1),this.update()};fu.prototype=Object.create(Pt.prototype);fu.prototype.constructor=fu;var em=function(e,t){fu.call(this,e,t),this.mouseButtons.LEFT=pr.PAN,this.mouseButtons.RIGHT=pr.ROTATE,this.touches.ONE=wi.PAN,this.touches.TWO=wi.DOLLY_ROTATE};em.prototype=Object.create(Pt.prototype);em.prototype.constructor=em;function Bx(e){return Object.prototype.toString.call(e)}var Eg={isFunction:function(){var e=Bx(function(){});return function(t){return Bx(t)===e}}(),isUndefined:function(t){return typeof t>"u"}};Pt.prototype.on=function(e,t){if(!!Eg.isFunction(t))return this instanceof re&&(this.interactive=!0),this.addEventListener(e,t),this};Pt.prototype.off=function(e,t){return this.removeEventListener(e,t),this};Pt.prototype.once=function(e,t){var n=this;if(!!Eg.isFunction(t)){var r=function i(a){t(a),n.off(e,i)};return this.on(e,r),this}};Pt.prototype.emit=function(e){if(!(this._listeners===void 0||Eg.isUndefined(this._listeners[e]))){for(var t=this._listeners[e]||[],n=t.slice(0),r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];for(var o=0;o<n.length;o++)n[o].apply(this,i);return this}};re.prototype.interactive=!1;re.prototype.interactiveChildren=!0;re.prototype.started=!1;Object.defineProperty(re.prototype,"trackedPointers",{get:function(){return this._trackedPointers||(this._trackedPointers={}),this._trackedPointers}});re.prototype.raycastTest=function(e){var t=[];return this.raycast(e,t),t.length>0?t[0]:!1};var EM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fa=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ds=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Uh=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Gh=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},mh=function(){function e(){Fa(this,e),this.global=new X,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return ds(e,[{key:"_copyEvent",value:function(n){n.isPrimary&&(this.isPrimary=!0),this.button=n.button,this.buttons=n.buttons,this.width=n.width,this.height=n.height,this.tiltX=n.tiltX,this.tiltY=n.tiltY,this.pointerType=n.pointerType,this.pressure=n.pressure,this.rotationAngle=n.rotationAngle,this.twist=n.twist||0,this.tangentialPressure=n.tangentialPressure||0}},{key:"_reset",value:function(){this.isPrimary=!1}},{key:"pointerId",get:function(){return this.identifier}}]),e}(),SM=function(){function e(){Fa(this,e),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null,this.intersects=[]}return ds(e,[{key:"stopPropagation",value:function(){this.stopped=!0}},{key:"_reset",value:function(){this.stopped=!1,this.currentTarget=null,this.target=null,this.intersects=[]}}]),e}(),ga=function(){function e(t){Fa(this,e),this._pointerId=t,this._flags=e.FLAGS.NONE}return ds(e,[{key:"_doSet",value:function(n,r){r?this._flags=this._flags|n:this._flags=this._flags&~n}},{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(n){this._flags=n}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return(this._flags&this.constructor.FLAGS.OVER)!==0},set:function(n){this._doSet(this.constructor.FLAGS.OVER,n)}},{key:"rightDown",get:function(){return(this._flags&this.constructor.FLAGS.RIGHT_DOWN)!==0},set:function(n){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,n)}},{key:"leftDown",get:function(){return(this._flags&this.constructor.FLAGS.LEFT_DOWN)!==0},set:function(n){this._doSet(this.constructor.FLAGS.LEFT_DOWN,n)}}]),e}();ga.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2});var Pc="MOUSE",Ac={target:null,data:{global:null}},wR=function(e){Uh(t,e);function t(n,r,i,a){Fa(this,t);var o=Gh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a=a||{},o.renderer=n,o.scene=r,o.camera=i,o.autoPreventDefault=a.autoPreventDefault||!1,o.interactionFrequency=a.interactionFrequency||10,o.mouse=new mh,o.mouse.identifier=Pc,o.mouse.global.set(-999999),o.activeInteractionData={},o.activeInteractionData[Pc]=o.mouse,o.interactionDataPool=[],o.eventData=new SM,o.interactionDOMElement=null,o.moveWhenInside=!0,o.eventsAdded=!1,o.mouseOverRenderer=!1,o.supportsTouchEvents="ontouchstart"in window,o.supportsPointerEvents=!!window.PointerEvent,o.onClick=o.onClick.bind(o),o.processClick=o.processClick.bind(o),o.onPointerUp=o.onPointerUp.bind(o),o.processPointerUp=o.processPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.processPointerCancel=o.processPointerCancel.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.processPointerDown=o.processPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.processPointerMove=o.processPointerMove.bind(o),o.onPointerOut=o.onPointerOut.bind(o),o.processPointerOverOut=o.processPointerOverOut.bind(o),o.onPointerOver=o.onPointerOver.bind(o),o.cursorStyles={default:"inherit",pointer:"pointer"},o.currentCursorMode=null,o.cursor=null,o.raycaster=new xg,o._deltaTime=0,o.setTargetElement(o.renderer.domElement),o}return ds(t,[{key:"hitTest",value:function(r,i){return Ac.target=null,Ac.data.global=r,i||(i=this.scene),this.processInteractive(Ac,i,null,!0),Ac.target}},{key:"setTargetElement",value:function(r){this.removeEvents(),this.interactionDOMElement=r,this.addEvents()}},{key:"addEvents",value:function(){!this.interactionDOMElement||this.eventsAdded||(this.emit("addevents"),this.interactionDOMElement.addEventListener("click",this.onClick,!0),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)}},{key:"removeEvents",value:function(){!this.interactionDOMElement||(this.emit("removeevents"),this.interactionDOMElement.removeEventListener("click",this.onClick,!0),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)}},{key:"update",value:function(r){var i=r.snippet;if(this._deltaTime+=i,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,!!this.interactionDOMElement)){if(this.didMove){this.didMove=!1;return}this.cursor=null;for(var a in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(a)){var o=this.activeInteractionData[a];if(o.originalEvent&&o.pointerType!=="touch"){var s=this.configureInteractionEventForDOMEvent(this.eventData,o.originalEvent,o);this.processInteractive(s,this.scene,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}}},{key:"setCursorMode",value:function(r){if(r=r||"default",this.currentCursorMode!==r){this.currentCursorMode=r;var i=this.cursorStyles[r];if(i)switch(typeof i>"u"?"undefined":EM(i)){case"string":this.interactionDOMElement.style.cursor=i;break;case"function":i(r);break;case"object":Object.assign(this.interactionDOMElement.style,i);break}else typeof r=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,r)&&(this.interactionDOMElement.style.cursor=r)}}},{key:"triggerEvent",value:function(r,i,a){a.stopped||(a.currentTarget=r,a.type=i,r.emit(i,a),r[i]&&r[i](a))}},{key:"processInteractive",value:function(r,i,a,o,s){if(!i||!i.visible)return!1;s=i.interactive||s;var l=!1,u=s;if(i.interactiveChildren&&i.children)for(var c=i.children,f=c.length-1;f>=0;f--){var h=c[f],d=this.processInteractive(r,h,a,o,u);if(d){if(!h.parent)continue;u=!1,d&&(r.target&&(o=!1),l=!0)}}return s&&(o&&!r.target&&r.intersects[0]&&r.intersects[0].object===i&&(l=!0),i.interactive&&(l&&!r.target&&(r.data.target=r.target=i),a&&a(r,i,!!l))),l}},{key:"onClick",value:function(r){if(r.type==="click"){var i=this.normalizeToPointerData(r);this.autoPreventDefault&&i[0].isNormalized&&r.preventDefault();var a=this.getInteractionDataForPointerId(i[0]),o=this.configureInteractionEventForDOMEvent(this.eventData,i[0],a);o.data.originalEvent=r,this.processInteractive(o,this.scene,this.processClick,!0),this.emit("click",o)}}},{key:"processClick",value:function(r,i,a){a&&this.triggerEvent(i,"click",r)}},{key:"onPointerDown",value:function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r);this.autoPreventDefault&&i[0].isNormalized&&r.preventDefault();for(var a=i.length,o=0;o<a;o++){var s=i[o],l=this.getInteractionDataForPointerId(s),u=this.configureInteractionEventForDOMEvent(this.eventData,s,l);if(u.data.originalEvent=r,this.processInteractive(u,this.scene,this.processPointerDown,!0),this.emit("pointerdown",u),s.pointerType==="touch")this.emit("touchstart",u);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var c=s.button===2;this.emit(c?"rightdown":"mousedown",this.eventData)}}}}},{key:"processPointerDown",value:function(r,i,a){var o=r.data,s=r.data.identifier;if(a){if(i.trackedPointers[s]||(i.trackedPointers[s]=new ga(s)),this.triggerEvent(i,"pointerdown",r),o.pointerType==="touch")i.started=!0,this.triggerEvent(i,"touchstart",r);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var l=o.button===2;l?i.trackedPointers[s].rightDown=!0:i.trackedPointers[s].leftDown=!0,this.triggerEvent(i,l?"rightdown":"mousedown",r)}}}},{key:"onPointerComplete",value:function(r,i,a){for(var o=this.normalizeToPointerData(r),s=o.length,l=r.target!==this.interactionDOMElement?"outside":"",u=0;u<s;u++){var c=o[u],f=this.getInteractionDataForPointerId(c),h=this.configureInteractionEventForDOMEvent(this.eventData,c,f);if(h.data.originalEvent=r,this.processInteractive(h,this.scene,a,i||!l),this.emit(i?"pointercancel":"pointerup"+l,h),c.pointerType==="mouse"||c.pointerType==="pen"){var d=c.button===2;this.emit(d?"rightup"+l:"mouseup"+l,h)}else c.pointerType==="touch"&&(this.emit(i?"touchcancel":"touchend"+l,h),this.releaseInteractionDataForPointerId(c.pointerId,f))}}},{key:"onPointerCancel",value:function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!0,this.processPointerCancel)}},{key:"processPointerCancel",value:function(r,i){var a=r.data,o=r.data.identifier;i.trackedPointers[o]!==void 0&&(delete i.trackedPointers[o],this.triggerEvent(i,"pointercancel",r),a.pointerType==="touch"&&this.triggerEvent(i,"touchcancel",r))}},{key:"onPointerUp",value:function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!1,this.processPointerUp)}},{key:"processPointerUp",value:function(r,i,a){var o=r.data,s=r.data.identifier,l=i.trackedPointers[s],u=o.pointerType==="touch",c=o.pointerType==="mouse"||o.pointerType==="pen";if(c){var f=o.button===2,h=ga.FLAGS,d=f?h.RIGHT_DOWN:h.LEFT_DOWN,p=l!==void 0&&l.flags&d;a?(this.triggerEvent(i,f?"rightup":"mouseup",r),p&&this.triggerEvent(i,f?"rightclick":"leftclick",r)):p&&this.triggerEvent(i,f?"rightupoutside":"mouseupoutside",r),l&&(f?l.rightDown=!1:l.leftDown=!1)}u&&i.started&&(i.started=!1,this.triggerEvent(i,"touchend",r)),a?(this.triggerEvent(i,"pointerup",r),l&&(this.triggerEvent(i,"pointertap",r),u&&(this.triggerEvent(i,"tap",r),l.over=!1))):l&&(this.triggerEvent(i,"pointerupoutside",r),u&&this.triggerEvent(i,"touchendoutside",r)),l&&l.none&&delete i.trackedPointers[s]}},{key:"onPointerMove",value:function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r);i[0].pointerType==="mouse"&&(this.didMove=!0,this.cursor=null);for(var a=i.length,o=0;o<a;o++){var s=i[o],l=this.getInteractionDataForPointerId(s),u=this.configureInteractionEventForDOMEvent(this.eventData,s,l);u.data.originalEvent=r;var c=s.pointerType==="touch"?this.moveWhenInside:!0;this.processInteractive(u,this.scene,this.processPointerMove,c),this.emit("pointermove",u),s.pointerType==="touch"&&this.emit("touchmove",u),(s.pointerType==="mouse"||s.pointerType==="pen")&&this.emit("mousemove",u)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}}},{key:"processPointerMove",value:function(r,i,a){var o=r.data,s=o.pointerType==="touch",l=o.pointerType==="mouse"||o.pointerType==="pen";l&&this.processPointerOverOut(r,i,a),s&&i.started&&this.triggerEvent(i,"touchmove",r),(!this.moveWhenInside||a)&&(this.triggerEvent(i,"pointermove",r),l&&this.triggerEvent(i,"mousemove",r))}},{key:"onPointerOut",value:function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r),a=i[0];a.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(a),s=this.configureInteractionEventForDOMEvent(this.eventData,a,o);s.data.originalEvent=a,this.processInteractive(s,this.scene,this.processPointerOverOut,!1),this.emit("pointerout",s),a.pointerType==="mouse"||a.pointerType==="pen"?this.emit("mouseout",s):this.releaseInteractionDataForPointerId(o.identifier)}}},{key:"processPointerOverOut",value:function(r,i,a){var o=r.data,s=r.data.identifier,l=o.pointerType==="mouse"||o.pointerType==="pen",u=i.trackedPointers[s];a&&!u&&(u=i.trackedPointers[s]=new ga(s)),u!==void 0&&(a&&this.mouseOverRenderer?(u.over||(u.over=!0,this.triggerEvent(i,"pointerover",r),l&&this.triggerEvent(i,"mouseover",r)),l&&this.cursor===null&&(this.cursor=i.cursor)):u.over&&(u.over=!1,this.triggerEvent(i,"pointerout",this.eventData),l&&this.triggerEvent(i,"mouseout",r),u.none&&delete i.trackedPointers[s]))}},{key:"onPointerOver",value:function(r){var i=this.normalizeToPointerData(r),a=i[0],o=this.getInteractionDataForPointerId(a),s=this.configureInteractionEventForDOMEvent(this.eventData,a,o);s.data.originalEvent=a,a.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",s),(a.pointerType==="mouse"||a.pointerType==="pen")&&this.emit("mouseover",s)}},{key:"getInteractionDataForPointerId",value:function(r){var i=r.pointerId,a=void 0;return i===Pc||r.pointerType==="mouse"?a=this.mouse:this.activeInteractionData[i]?a=this.activeInteractionData[i]:(a=this.interactionDataPool.pop()||new mh,a.identifier=i,this.activeInteractionData[i]=a),a._copyEvent(r),a}},{key:"releaseInteractionDataForPointerId",value:function(r){var i=this.activeInteractionData[r];i&&(delete this.activeInteractionData[r],i._reset(),this.interactionDataPool.push(i))}},{key:"mapPositionToPoint",value:function(r,i,a){var o=void 0;this.interactionDOMElement.parentElement?o=this.interactionDOMElement.getBoundingClientRect():o={x:0,y:0,left:0,top:0,width:0,height:0},r.x=(i-o.left)/o.width*2-1,r.y=-((a-o.top)/o.height)*2+1}},{key:"configureInteractionEventForDOMEvent",value:function(r,i,a){return r.data=a,this.mapPositionToPoint(a.global,i.clientX,i.clientY),this.raycaster.setFromCamera(a.global,this.camera),i.pointerType==="touch"&&(i.globalX=a.global.x,i.globalY=a.global.y),a.originalEvent=i,r._reset(),r.intersects=this.raycaster.intersectObjects(this.scene.children,!0),r}},{key:"normalizeToPointerData",value:function(r){var i=[];if(this.supportsTouchEvents&&r instanceof TouchEvent)for(var a=0,o=r.changedTouches.length;a<o;a++){var s=r.changedTouches[a];typeof s.button>"u"&&(s.button=r.touches.length?1:0),typeof s.buttons>"u"&&(s.buttons=r.touches.length?1:0),typeof s.isPrimary>"u"&&(s.isPrimary=r.touches.length===1&&r.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),s.twist=0,s.tangentialPressure=0,typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,i.push(s)}else r instanceof MouseEvent&&(!this.supportsPointerEvents||!(r instanceof window.PointerEvent))&&(typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=Pc),typeof r.pressure>"u"&&(r.pressure=.5),r.twist=0,r.tangentialPressure=0,r.isNormalized=!0),i.push(r);return i}},{key:"destroy",value:function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null}}]),t}(Pt),Lc="MOUSE",Cc={target:null,data:{global:null}};(function(e){Uh(t,e);function t(n,r){Fa(this,t);var i=Gh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r=r||{},i.renderer=n,i.layer=null,i.autoPreventDefault=r.autoPreventDefault||!1,i.interactionFrequency=r.interactionFrequency||10,i.mouse=new mh,i.mouse.identifier=Lc,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[Lc]=i.mouse,i.interactionDataPool=[],i.eventData=new SM,i.interactionDOMElement=null,i.moveWhenInside=!0,i.eventsAdded=!1,i.mouseOverRenderer=!1,i.supportsTouchEvents="ontouchstart"in window,i.supportsPointerEvents=!!window.PointerEvent,i.onClick=i.onClick.bind(i),i.processClick=i.processClick.bind(i),i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.raycaster=new xg,i._deltaTime=0,i.setTargetElement(i.renderer.domElement),i}return ds(t,[{key:"isAble",value:function(){return this.layer&&this.layer.interactive}},{key:"setLayer",value:function(r){this.layer=r}},{key:"hitTest",value:function(r,i){return this.isAble()?(Cc.target=null,Cc.data.global=r,i||(i=this.layer.scene),this.processInteractive(Cc,i,null,!0),Cc.target):null}},{key:"setTargetElement",value:function(r){this.removeEvents(),this.interactionDOMElement=r,this.addEvents()}},{key:"addEvents",value:function(){!this.interactionDOMElement||this.eventsAdded||(this.emit("addevents"),this.interactionDOMElement.addEventListener("click",this.onClick,!0),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)}},{key:"removeEvents",value:function(){!this.interactionDOMElement||(this.emit("removeevents"),this.interactionDOMElement.removeEventListener("click",this.onClick,!0),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)}},{key:"update",value:function(r){var i=r.snippet;if(!!this.isAble()&&(this._deltaTime+=i,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,!!this.interactionDOMElement))){if(this.didMove){this.didMove=!1;return}this.cursor=null;for(var a in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(a)){var o=this.activeInteractionData[a];if(o.originalEvent&&o.pointerType!=="touch"){var s=this.configureInteractionEventForDOMEvent(this.eventData,o.originalEvent,o);this.processInteractive(s,this.layer.scene,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}}},{key:"setCursorMode",value:function(r){if(r=r||"default",this.currentCursorMode!==r){this.currentCursorMode=r;var i=this.cursorStyles[r];if(i)switch(typeof i>"u"?"undefined":EM(i)){case"string":this.interactionDOMElement.style.cursor=i;break;case"function":i(r);break;case"object":Object.assign(this.interactionDOMElement.style,i);break}else typeof r=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,r)&&(this.interactionDOMElement.style.cursor=r)}}},{key:"triggerEvent",value:function(r,i,a){a.stopped||(a.currentTarget=r,a.type=i,r.emit(i,a),r[i]&&r[i](a))}},{key:"processInteractive",value:function(r,i,a,o,s){if(!i||!i.visible)return!1;s=i.interactive||s;var l=!1,u=s;if(i.interactiveChildren&&i.children)for(var c=i.children,f=c.length-1;f>=0;f--){var h=c[f],d=this.processInteractive(r,h,a,o,u);if(d){if(!h.parent)continue;u=!1,d&&(r.target&&(o=!1),l=!0)}}return s&&(o&&!r.target&&r.intersects[0]&&r.intersects[0].object===i&&(l=!0),i.interactive&&(l&&!r.target&&(r.data.target=r.target=i),a&&a(r,i,!!l))),l}},{key:"onClick",value:function(r){if(!!this.isAble()&&r.type==="click"){var i=this.normalizeToPointerData(r);this.autoPreventDefault&&i[0].isNormalized&&r.preventDefault();var a=this.getInteractionDataForPointerId(i[0]),o=this.configureInteractionEventForDOMEvent(this.eventData,i[0],a);o.data.originalEvent=r,this.processInteractive(o,this.layer.scene,this.processClick,!0),this.emit("click",o)}}},{key:"processClick",value:function(r,i,a){a&&this.triggerEvent(i,"click",r)}},{key:"onPointerDown",value:function(r){if(!!this.isAble()&&!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r);this.autoPreventDefault&&i[0].isNormalized&&r.preventDefault();for(var a=i.length,o=0;o<a;o++){var s=i[o],l=this.getInteractionDataForPointerId(s),u=this.configureInteractionEventForDOMEvent(this.eventData,s,l);if(u.data.originalEvent=r,this.processInteractive(u,this.layer.scene,this.processPointerDown,!0),this.emit("pointerdown",u),s.pointerType==="touch")this.emit("touchstart",u);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var c=s.button===2;this.emit(c?"rightdown":"mousedown",this.eventData)}}}}},{key:"processPointerDown",value:function(r,i,a){var o=r.data,s=r.data.identifier;if(a){if(i.trackedPointers[s]||(i.trackedPointers[s]=new ga(s)),this.triggerEvent(i,"pointerdown",r),o.pointerType==="touch")i.started=!0,this.triggerEvent(i,"touchstart",r);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var l=o.button===2;l?i.trackedPointers[s].rightDown=!0:i.trackedPointers[s].leftDown=!0,this.triggerEvent(i,l?"rightdown":"mousedown",r)}}}},{key:"onPointerComplete",value:function(r,i,a){for(var o=this.normalizeToPointerData(r),s=o.length,l=r.target!==this.interactionDOMElement?"outside":"",u=0;u<s;u++){var c=o[u],f=this.getInteractionDataForPointerId(c),h=this.configureInteractionEventForDOMEvent(this.eventData,c,f);if(h.data.originalEvent=r,this.processInteractive(h,this.layer.scene,a,i||!l),this.emit(i?"pointercancel":"pointerup"+l,h),c.pointerType==="mouse"||c.pointerType==="pen"){var d=c.button===2;this.emit(d?"rightup"+l:"mouseup"+l,h)}else c.pointerType==="touch"&&(this.emit(i?"touchcancel":"touchend"+l,h),this.releaseInteractionDataForPointerId(c.pointerId,f))}}},{key:"onPointerCancel",value:function(r){!this.isAble()||this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!0,this.processPointerCancel)}},{key:"processPointerCancel",value:function(r,i){var a=r.data,o=r.data.identifier;i.trackedPointers[o]!==void 0&&(delete i.trackedPointers[o],this.triggerEvent(i,"pointercancel",r),a.pointerType==="touch"&&this.triggerEvent(i,"touchcancel",r))}},{key:"onPointerUp",value:function(r){!this.isAble()||this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!1,this.processPointerUp)}},{key:"processPointerUp",value:function(r,i,a){var o=r.data,s=r.data.identifier,l=i.trackedPointers[s],u=o.pointerType==="touch",c=o.pointerType==="mouse"||o.pointerType==="pen";if(c){var f=o.button===2,h=ga.FLAGS,d=f?h.RIGHT_DOWN:h.LEFT_DOWN,p=l!==void 0&&l.flags&d;a?(this.triggerEvent(i,f?"rightup":"mouseup",r),p&&this.triggerEvent(i,f?"rightclick":"leftclick",r)):p&&this.triggerEvent(i,f?"rightupoutside":"mouseupoutside",r),l&&(f?l.rightDown=!1:l.leftDown=!1)}u&&i.started&&(i.started=!1,this.triggerEvent(i,"touchend",r)),a?(this.triggerEvent(i,"pointerup",r),l&&(this.triggerEvent(i,"pointertap",r),u&&(this.triggerEvent(i,"tap",r),l.over=!1))):l&&(this.triggerEvent(i,"pointerupoutside",r),u&&this.triggerEvent(i,"touchendoutside",r)),l&&l.none&&delete i.trackedPointers[s]}},{key:"onPointerMove",value:function(r){if(!!this.isAble()&&!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r);i[0].pointerType==="mouse"&&(this.didMove=!0,this.cursor=null);for(var a=i.length,o=0;o<a;o++){var s=i[o],l=this.getInteractionDataForPointerId(s),u=this.configureInteractionEventForDOMEvent(this.eventData,s,l);u.data.originalEvent=r;var c=s.pointerType==="touch"?this.moveWhenInside:!0;this.processInteractive(u,this.layer.scene,this.processPointerMove,c),this.emit("pointermove",u),s.pointerType==="touch"&&this.emit("touchmove",u),(s.pointerType==="mouse"||s.pointerType==="pen")&&this.emit("mousemove",u)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}}},{key:"processPointerMove",value:function(r,i,a){var o=r.data,s=o.pointerType==="touch",l=o.pointerType==="mouse"||o.pointerType==="pen";l&&this.processPointerOverOut(r,i,a),s&&i.started&&this.triggerEvent(i,"touchmove",r),(!this.moveWhenInside||a)&&(this.triggerEvent(i,"pointermove",r),l&&this.triggerEvent(i,"mousemove",r))}},{key:"onPointerOut",value:function(r){if(!!this.isAble()&&!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r),a=i[0];a.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(a),s=this.configureInteractionEventForDOMEvent(this.eventData,a,o);s.data.originalEvent=a,this.processInteractive(s,this.layer.scene,this.processPointerOverOut,!1),this.emit("pointerout",s),a.pointerType==="mouse"||a.pointerType==="pen"?this.emit("mouseout",s):this.releaseInteractionDataForPointerId(o.identifier)}}},{key:"processPointerOverOut",value:function(r,i,a){var o=r.data,s=r.data.identifier,l=o.pointerType==="mouse"||o.pointerType==="pen",u=i.trackedPointers[s];a&&!u&&(u=i.trackedPointers[s]=new ga(s)),u!==void 0&&(a&&this.mouseOverRenderer?(u.over||(u.over=!0,this.triggerEvent(i,"pointerover",r),l&&this.triggerEvent(i,"mouseover",r)),l&&this.cursor===null&&(this.cursor=i.cursor)):u.over&&(u.over=!1,this.triggerEvent(i,"pointerout",this.eventData),l&&this.triggerEvent(i,"mouseout",r),u.none&&delete i.trackedPointers[s]))}},{key:"onPointerOver",value:function(r){if(!!this.isAble()){var i=this.normalizeToPointerData(r),a=i[0],o=this.getInteractionDataForPointerId(a),s=this.configureInteractionEventForDOMEvent(this.eventData,a,o);s.data.originalEvent=a,a.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",s),(a.pointerType==="mouse"||a.pointerType==="pen")&&this.emit("mouseover",s)}}},{key:"getInteractionDataForPointerId",value:function(r){var i=r.pointerId,a=void 0;return i===Lc||r.pointerType==="mouse"?a=this.mouse:this.activeInteractionData[i]?a=this.activeInteractionData[i]:(a=this.interactionDataPool.pop()||new mh,a.identifier=i,this.activeInteractionData[i]=a),a._copyEvent(r),a}},{key:"releaseInteractionDataForPointerId",value:function(r){var i=this.activeInteractionData[r];i&&(delete this.activeInteractionData[r],i._reset(),this.interactionDataPool.push(i))}},{key:"mapPositionToPoint",value:function(r,i,a){var o=void 0;this.interactionDOMElement.parentElement?o=this.interactionDOMElement.getBoundingClientRect():o={x:0,y:0,left:0,top:0,width:0,height:0},r.x=(i-o.left)/o.width*2-1,r.y=-((a-o.top)/o.height)*2+1}},{key:"configureInteractionEventForDOMEvent",value:function(r,i,a){return r.data=a,this.mapPositionToPoint(a.global,i.clientX,i.clientY),this.layer&&this.layer.interactive&&this.raycaster.setFromCamera(a.global,this.layer.camera),i.pointerType==="touch"&&(i.globalX=a.global.x,i.globalY=a.global.y),a.originalEvent=i,r._reset(),r.intersects=this.raycaster.intersectObjects(this.scene.children,!0),r}},{key:"normalizeToPointerData",value:function(r){var i=[];if(this.supportsTouchEvents&&r instanceof TouchEvent)for(var a=0,o=r.changedTouches.length;a<o;a++){var s=r.changedTouches[a];typeof s.button>"u"&&(s.button=r.touches.length?1:0),typeof s.buttons>"u"&&(s.buttons=r.touches.length?1:0),typeof s.isPrimary>"u"&&(s.isPrimary=r.touches.length===1&&r.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),s.twist=0,s.tangentialPressure=0,typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,i.push(s)}else r instanceof MouseEvent&&(!this.supportsPointerEvents||!(r instanceof window.PointerEvent))&&(typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=Lc),typeof r.pressure>"u"&&(r.pressure=.5),r.twist=0,r.tangentialPressure=0,r.isNormalized=!0),i.push(r);return i}},{key:"destroy",value:function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null}}]),t})(Pt);(function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(r){var i=new Date().getTime(),a=Math.max(0,16-(i-e)),o=window.setTimeout(function(){r(i+a)},a);return e=i+a,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(r){clearTimeout(r)}),window.RAF=window.requestAnimationFrame,window.CAF=window.cancelAnimationFrame})();var _R=function(e){Uh(t,e);function t(){Fa(this,t);var n=Gh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.timer=null,n.started=!1,n.pt=0,n.snippet=0,n.start(),n}return ds(t,[{key:"start",value:function(){var r=this;if(!this.started){var i=function a(){r.timeline(),r.emit("tick",{snippet:r.snippet}),r.timer=RAF(a)};i()}}},{key:"stop",value:function(){CAF(this.timer),this.started=!1}},{key:"timeline",value:function(){this.snippet=Date.now()-this.pt,(this.pt===0||this.snippet>200)&&(this.pt=Date.now(),this.snippet=Date.now()-this.pt),this.pt+=this.snippet}}]),t}(Pt),MR=function(e){Uh(t,e);function t(n,r,i,a){Fa(this,t),a=Object.assign({autoAttach:!1},a);var o=Gh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,r,i,a));return o.ticker=new _R,o.update=o.update.bind(o),o.on("addevents",function(){o.ticker.on("tick",o.update)}),o.on("removeevents",function(){o.ticker.off("tick",o.update)}),o.setTargetElement(o.renderer.domElement),o}return t}(wR),hn="top",Gn="bottom",Vn="right",dn="left",Sg="auto",Eu=[hn,Gn,Vn,dn],rs="start",hu="end",bR="clippingParents",TM="viewport",Rs="popper",ER="reference",Ux=Eu.reduce(function(e,t){return e.concat([t+"-"+rs,t+"-"+hu])},[]),PM=[].concat(Eu,[Sg]).reduce(function(e,t){return e.concat([t,t+"-"+rs,t+"-"+hu])},[]),SR="beforeRead",TR="read",PR="afterRead",AR="beforeMain",LR="main",CR="afterMain",RR="beforeWrite",OR="write",DR="afterWrite",IR=[SR,TR,PR,AR,LR,CR,RR,OR,DR];function Cr(e){return e?(e.nodeName||"").toLowerCase():null}function Tn(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ia(e){var t=Tn(e).Element;return e instanceof t||e instanceof Element}function kn(e){var t=Tn(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Tg(e){if(typeof ShadowRoot>"u")return!1;var t=Tn(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function NR(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},i=t.attributes[n]||{},a=t.elements[n];!kn(a)||!Cr(a)||(Object.assign(a.style,r),Object.keys(i).forEach(function(o){var s=i[o];s===!1?a.removeAttribute(o):a.setAttribute(o,s===!0?"":s)}))})}function kR(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],a=t.attributes[r]||{},o=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),s=o.reduce(function(l,u){return l[u]="",l},{});!kn(i)||!Cr(i)||(Object.assign(i.style,s),Object.keys(a).forEach(function(l){i.removeAttribute(l)}))})}}const AM={name:"applyStyles",enabled:!0,phase:"write",fn:NR,effect:kR,requires:["computeStyles"]};function br(e){return e.split("-")[0]}var ya=Math.max,gh=Math.min,is=Math.round;function tm(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function LM(){return!/^((?!chrome|android).)*safari/i.test(tm())}function as(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,a=1;t&&kn(e)&&(i=e.offsetWidth>0&&is(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&is(r.height)/e.offsetHeight||1);var o=Ia(e)?Tn(e):window,s=o.visualViewport,l=!LM()&&n,u=(r.left+(l&&s?s.offsetLeft:0))/i,c=(r.top+(l&&s?s.offsetTop:0))/a,f=r.width/i,h=r.height/a;return{width:f,height:h,top:c,right:u+f,bottom:c+h,left:u,x:u,y:c}}function Pg(e){var t=as(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function CM(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Tg(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function oi(e){return Tn(e).getComputedStyle(e)}function FR(e){return["table","td","th"].indexOf(Cr(e))>=0}function ji(e){return((Ia(e)?e.ownerDocument:e.document)||window.document).documentElement}function Vh(e){return Cr(e)==="html"?e:e.assignedSlot||e.parentNode||(Tg(e)?e.host:null)||ji(e)}function Gx(e){return!kn(e)||oi(e).position==="fixed"?null:e.offsetParent}function zR(e){var t=/firefox/i.test(tm()),n=/Trident/i.test(tm());if(n&&kn(e)){var r=oi(e);if(r.position==="fixed")return null}var i=Vh(e);for(Tg(i)&&(i=i.host);kn(i)&&["html","body"].indexOf(Cr(i))<0;){var a=oi(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function Su(e){for(var t=Tn(e),n=Gx(e);n&&FR(n)&&oi(n).position==="static";)n=Gx(n);return n&&(Cr(n)==="html"||Cr(n)==="body"&&oi(n).position==="static")?t:n||zR(e)||t}function Ag(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function rl(e,t,n){return ya(e,gh(t,n))}function BR(e,t,n){var r=rl(e,t,n);return r>n?n:r}function RM(){return{top:0,right:0,bottom:0,left:0}}function OM(e){return Object.assign({},RM(),e)}function DM(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var UR=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,OM(typeof t!="number"?t:DM(t,Eu))};function GR(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=br(n.placement),l=Ag(s),u=[dn,Vn].indexOf(s)>=0,c=u?"height":"width";if(!(!a||!o)){var f=UR(i.padding,n),h=Pg(a),d=l==="y"?hn:dn,p=l==="y"?Gn:Vn,x=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],y=o[l]-n.rects.reference[l],v=Su(a),m=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,w=x/2-y/2,g=f[d],_=m-h[c]-f[p],b=m/2-h[c]/2+w,E=rl(g,b,_),S=l;n.modifiersData[r]=(t={},t[S]=E,t.centerOffset=E-b,t)}}function VR(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||!CM(t.elements.popper,i)||(t.elements.arrow=i))}const HR={name:"arrow",enabled:!0,phase:"main",fn:GR,effect:VR,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function os(e){return e.split("-")[1]}var WR={top:"auto",right:"auto",bottom:"auto",left:"auto"};function jR(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:is(n*i)/i||0,y:is(r*i)/i||0}}function Vx(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,o=e.offsets,s=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,f=e.isFixed,h=o.x,d=h===void 0?0:h,p=o.y,x=p===void 0?0:p,y=typeof c=="function"?c({x:d,y:x}):{x:d,y:x};d=y.x,x=y.y;var v=o.hasOwnProperty("x"),m=o.hasOwnProperty("y"),w=dn,g=hn,_=window;if(u){var b=Su(n),E="clientHeight",S="clientWidth";if(b===Tn(n)&&(b=ji(n),oi(b).position!=="static"&&s==="absolute"&&(E="scrollHeight",S="scrollWidth")),b=b,i===hn||(i===dn||i===Vn)&&a===hu){g=Gn;var O=f&&b===_&&_.visualViewport?_.visualViewport.height:b[E];x-=O-r.height,x*=l?1:-1}if(i===dn||(i===hn||i===Gn)&&a===hu){w=Vn;var D=f&&b===_&&_.visualViewport?_.visualViewport.width:b[S];d-=D-r.width,d*=l?1:-1}}var L=Object.assign({position:s},u&&WR),R=c===!0?jR({x:d,y:x},Tn(n)):{x:d,y:x};if(d=R.x,x=R.y,l){var N;return Object.assign({},L,(N={},N[g]=m?"0":"",N[w]=v?"0":"",N.transform=(_.devicePixelRatio||1)<=1?"translate("+d+"px, "+x+"px)":"translate3d("+d+"px, "+x+"px, 0)",N))}return Object.assign({},L,(t={},t[g]=m?x+"px":"",t[w]=v?d+"px":"",t.transform="",t))}function XR(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,a=n.adaptive,o=a===void 0?!0:a,s=n.roundOffsets,l=s===void 0?!0:s,u={placement:br(t.placement),variation:os(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Vx(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Vx(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const qR={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:XR,data:{}};var Rc={passive:!0};function YR(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=i===void 0?!0:i,o=r.resize,s=o===void 0?!0:o,l=Tn(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&u.forEach(function(c){c.addEventListener("scroll",n.update,Rc)}),s&&l.addEventListener("resize",n.update,Rc),function(){a&&u.forEach(function(c){c.removeEventListener("scroll",n.update,Rc)}),s&&l.removeEventListener("resize",n.update,Rc)}}const $R={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:YR,data:{}};var ZR={left:"right",right:"left",bottom:"top",top:"bottom"};function Zc(e){return e.replace(/left|right|bottom|top/g,function(t){return ZR[t]})}var JR={start:"end",end:"start"};function Hx(e){return e.replace(/start|end/g,function(t){return JR[t]})}function Lg(e){var t=Tn(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Cg(e){return as(ji(e)).left+Lg(e).scrollLeft}function QR(e,t){var n=Tn(e),r=ji(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;var u=LM();(u||!u&&t==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s+Cg(e),y:l}}function KR(e){var t,n=ji(e),r=Lg(e),i=(t=e.ownerDocument)==null?void 0:t.body,a=ya(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=ya(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+Cg(e),l=-r.scrollTop;return oi(i||n).direction==="rtl"&&(s+=ya(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}function Rg(e){var t=oi(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function IM(e){return["html","body","#document"].indexOf(Cr(e))>=0?e.ownerDocument.body:kn(e)&&Rg(e)?e:IM(Vh(e))}function il(e,t){var n;t===void 0&&(t=[]);var r=IM(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),a=Tn(r),o=i?[a].concat(a.visualViewport||[],Rg(r)?r:[]):r,s=t.concat(o);return i?s:s.concat(il(Vh(o)))}function nm(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function eO(e,t){var n=as(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Wx(e,t,n){return t===TM?nm(QR(e,n)):Ia(t)?eO(t,n):nm(KR(ji(e)))}function tO(e){var t=il(Vh(e)),n=["absolute","fixed"].indexOf(oi(e).position)>=0,r=n&&kn(e)?Su(e):e;return Ia(r)?t.filter(function(i){return Ia(i)&&CM(i,r)&&Cr(i)!=="body"}):[]}function nO(e,t,n,r){var i=t==="clippingParents"?tO(e):[].concat(t),a=[].concat(i,[n]),o=a[0],s=a.reduce(function(l,u){var c=Wx(e,u,r);return l.top=ya(c.top,l.top),l.right=gh(c.right,l.right),l.bottom=gh(c.bottom,l.bottom),l.left=ya(c.left,l.left),l},Wx(e,o,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function NM(e){var t=e.reference,n=e.element,r=e.placement,i=r?br(r):null,a=r?os(r):null,o=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,l;switch(i){case hn:l={x:o,y:t.y-n.height};break;case Gn:l={x:o,y:t.y+t.height};break;case Vn:l={x:t.x+t.width,y:s};break;case dn:l={x:t.x-n.width,y:s};break;default:l={x:t.x,y:t.y}}var u=i?Ag(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(a){case rs:l[u]=l[u]-(t[c]/2-n[c]/2);break;case hu:l[u]=l[u]+(t[c]/2-n[c]/2);break}}return l}function du(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,a=n.strategy,o=a===void 0?e.strategy:a,s=n.boundary,l=s===void 0?bR:s,u=n.rootBoundary,c=u===void 0?TM:u,f=n.elementContext,h=f===void 0?Rs:f,d=n.altBoundary,p=d===void 0?!1:d,x=n.padding,y=x===void 0?0:x,v=OM(typeof y!="number"?y:DM(y,Eu)),m=h===Rs?ER:Rs,w=e.rects.popper,g=e.elements[p?m:h],_=nO(Ia(g)?g:g.contextElement||ji(e.elements.popper),l,c,o),b=as(e.elements.reference),E=NM({reference:b,element:w,strategy:"absolute",placement:i}),S=nm(Object.assign({},w,E)),O=h===Rs?S:b,D={top:_.top-O.top+v.top,bottom:O.bottom-_.bottom+v.bottom,left:_.left-O.left+v.left,right:O.right-_.right+v.right},L=e.modifiersData.offset;if(h===Rs&&L){var R=L[i];Object.keys(D).forEach(function(N){var B=[Vn,Gn].indexOf(N)>=0?1:-1,G=[hn,Gn].indexOf(N)>=0?"y":"x";D[N]+=R[G]*B})}return D}function rO(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?PM:l,c=os(r),f=c?s?Ux:Ux.filter(function(p){return os(p)===c}):Eu,h=f.filter(function(p){return u.indexOf(p)>=0});h.length===0&&(h=f);var d=h.reduce(function(p,x){return p[x]=du(e,{placement:x,boundary:i,rootBoundary:a,padding:o})[br(x)],p},{});return Object.keys(d).sort(function(p,x){return d[p]-d[x]})}function iO(e){if(br(e)===Sg)return[];var t=Zc(e);return[Hx(e),t,Hx(t)]}function aO(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=i===void 0?!0:i,o=n.altAxis,s=o===void 0?!0:o,l=n.fallbackPlacements,u=n.padding,c=n.boundary,f=n.rootBoundary,h=n.altBoundary,d=n.flipVariations,p=d===void 0?!0:d,x=n.allowedAutoPlacements,y=t.options.placement,v=br(y),m=v===y,w=l||(m||!p?[Zc(y)]:iO(y)),g=[y].concat(w).reduce(function(H,ue){return H.concat(br(ue)===Sg?rO(t,{placement:ue,boundary:c,rootBoundary:f,padding:u,flipVariations:p,allowedAutoPlacements:x}):ue)},[]),_=t.rects.reference,b=t.rects.popper,E=new Map,S=!0,O=g[0],D=0;D<g.length;D++){var L=g[D],R=br(L),N=os(L)===rs,B=[hn,Gn].indexOf(R)>=0,G=B?"width":"height",W=du(t,{placement:L,boundary:c,rootBoundary:f,altBoundary:h,padding:u}),Y=B?N?Vn:dn:N?Gn:hn;_[G]>b[G]&&(Y=Zc(Y));var z=Zc(Y),V=[];if(a&&V.push(W[R]<=0),s&&V.push(W[Y]<=0,W[z]<=0),V.every(function(H){return H})){O=L,S=!1;break}E.set(L,V)}if(S)for(var j=p?3:1,q=function(ue){var te=g.find(function(de){var xe=E.get(de);if(xe)return xe.slice(0,ue).every(function(Ye){return Ye})});if(te)return O=te,"break"},K=j;K>0;K--){var Pe=q(K);if(Pe==="break")break}t.placement!==O&&(t.modifiersData[r]._skip=!0,t.placement=O,t.reset=!0)}}const oO={name:"flip",enabled:!0,phase:"main",fn:aO,requiresIfExists:["offset"],data:{_skip:!1}};function jx(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Xx(e){return[hn,Vn,Gn,dn].some(function(t){return e[t]>=0})}function sO(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,o=du(t,{elementContext:"reference"}),s=du(t,{altBoundary:!0}),l=jx(o,r),u=jx(s,i,a),c=Xx(l),f=Xx(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}const lO={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:sO};function uO(e,t,n){var r=br(e),i=[dn,hn].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[dn,Vn].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}function cO(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=i===void 0?[0,0]:i,o=PM.reduce(function(c,f){return c[f]=uO(f,t.rects,a),c},{}),s=o[t.placement],l=s.x,u=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=o}const fO={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:cO};function hO(e){var t=e.state,n=e.name;t.modifiersData[n]=NM({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const dO={name:"popperOffsets",enabled:!0,phase:"read",fn:hO,data:{}};function pO(e){return e==="x"?"y":"x"}function vO(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=i===void 0?!0:i,o=n.altAxis,s=o===void 0?!1:o,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,f=n.padding,h=n.tether,d=h===void 0?!0:h,p=n.tetherOffset,x=p===void 0?0:p,y=du(t,{boundary:l,rootBoundary:u,padding:f,altBoundary:c}),v=br(t.placement),m=os(t.placement),w=!m,g=Ag(v),_=pO(g),b=t.modifiersData.popperOffsets,E=t.rects.reference,S=t.rects.popper,O=typeof x=="function"?x(Object.assign({},t.rects,{placement:t.placement})):x,D=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),L=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,R={x:0,y:0};if(!!b){if(a){var N,B=g==="y"?hn:dn,G=g==="y"?Gn:Vn,W=g==="y"?"height":"width",Y=b[g],z=Y+y[B],V=Y-y[G],j=d?-S[W]/2:0,q=m===rs?E[W]:S[W],K=m===rs?-S[W]:-E[W],Pe=t.elements.arrow,H=d&&Pe?Pg(Pe):{width:0,height:0},ue=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:RM(),te=ue[B],de=ue[G],xe=rl(0,E[W],H[W]),Ye=w?E[W]/2-j-xe-te-D.mainAxis:q-xe-te-D.mainAxis,C=w?-E[W]/2+j+xe+de+D.mainAxis:K+xe+de+D.mainAxis,T=t.elements.arrow&&Su(t.elements.arrow),$=T?g==="y"?T.clientTop||0:T.clientLeft||0:0,ee=(N=L==null?void 0:L[g])!=null?N:0,be=Y+Ye-ee-$,pe=Y+C-ee,ae=rl(d?gh(z,be):z,Y,d?ya(V,pe):V);b[g]=ae,R[g]=ae-Y}if(s){var we,Le=g==="x"?hn:dn,Ue=g==="x"?Gn:Vn,ke=b[_],Ve=_==="y"?"height":"width",ve=ke+y[Le],I=ke-y[Ue],le=[hn,dn].indexOf(v)!==-1,Me=(we=L==null?void 0:L[_])!=null?we:0,ze=le?ve:ke-E[Ve]-S[Ve]-Me+D.altAxis,Te=le?ke+E[Ve]+S[Ve]-Me-D.altAxis:I,k=d&&le?BR(ze,ke,Te):rl(d?ze:ve,ke,d?Te:I);b[_]=k,R[_]=k-ke}t.modifiersData[r]=R}}const mO={name:"preventOverflow",enabled:!0,phase:"main",fn:vO,requiresIfExists:["offset"]};function gO(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function yO(e){return e===Tn(e)||!kn(e)?Lg(e):gO(e)}function xO(e){var t=e.getBoundingClientRect(),n=is(t.width)/e.offsetWidth||1,r=is(t.height)/e.offsetHeight||1;return n!==1||r!==1}function wO(e,t,n){n===void 0&&(n=!1);var r=kn(t),i=kn(t)&&xO(t),a=ji(t),o=as(e,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Cr(t)!=="body"||Rg(a))&&(s=yO(t)),kn(t)?(l=as(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=Cg(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function _O(e){var t=new Map,n=new Set,r=[];e.forEach(function(a){t.set(a.name,a)});function i(a){n.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(s){if(!n.has(s)){var l=t.get(s);l&&i(l)}}),r.push(a)}return e.forEach(function(a){n.has(a.name)||i(a)}),r}function MO(e){var t=_O(e);return IR.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function bO(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function EO(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var qx={placement:"bottom",modifiers:[],strategy:"absolute"};function Yx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function SO(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,a=i===void 0?qx:i;return function(s,l,u){u===void 0&&(u=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},qx,a),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},f=[],h=!1,d={state:c,setOptions:function(v){var m=typeof v=="function"?v(c.options):v;x(),c.options=Object.assign({},a,c.options,m),c.scrollParents={reference:Ia(s)?il(s):s.contextElement?il(s.contextElement):[],popper:il(l)};var w=MO(EO([].concat(r,c.options.modifiers)));return c.orderedModifiers=w.filter(function(g){return g.enabled}),p(),d.update()},forceUpdate:function(){if(!h){var v=c.elements,m=v.reference,w=v.popper;if(!!Yx(m,w)){c.rects={reference:wO(m,Su(w),c.options.strategy==="fixed"),popper:Pg(w)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(D){return c.modifiersData[D.name]=Object.assign({},D.data)});for(var g=0;g<c.orderedModifiers.length;g++){if(c.reset===!0){c.reset=!1,g=-1;continue}var _=c.orderedModifiers[g],b=_.fn,E=_.options,S=E===void 0?{}:E,O=_.name;typeof b=="function"&&(c=b({state:c,options:S,name:O,instance:d})||c)}}}},update:bO(function(){return new Promise(function(y){d.forceUpdate(),y(c)})}),destroy:function(){x(),h=!0}};if(!Yx(s,l))return d;d.setOptions(u).then(function(y){!h&&u.onFirstUpdate&&u.onFirstUpdate(y)});function p(){c.orderedModifiers.forEach(function(y){var v=y.name,m=y.options,w=m===void 0?{}:m,g=y.effect;if(typeof g=="function"){var _=g({state:c,name:v,instance:d,options:w}),b=function(){};f.push(_||b)}})}function x(){f.forEach(function(y){return y()}),f=[]}return d}}var TO=[$R,dO,qR,AM,fO,oO,mO,HR,lO],PO=SO({defaultModifiers:TO}),AO="tippy-box",kM="tippy-content",LO="tippy-backdrop",FM="tippy-arrow",zM="tippy-svg-arrow",la={passive:!0,capture:!0},BM=function(){return document.body};function rp(e,t,n){if(Array.isArray(e)){var r=e[t];return r==null?Array.isArray(n)?n[t]:n:r}return e}function Og(e,t){var n={}.toString.call(e);return n.indexOf("[object")===0&&n.indexOf(t+"]")>-1}function UM(e,t){return typeof e=="function"?e.apply(void 0,t):e}function $x(e,t){if(t===0)return e;var n;return function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function CO(e){return e.split(/\s+/).filter(Boolean)}function Ka(e){return[].concat(e)}function Zx(e,t){e.indexOf(t)===-1&&e.push(t)}function RO(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function OO(e){return e.split("-")[0]}function yh(e){return[].slice.call(e)}function Jx(e){return Object.keys(e).reduce(function(t,n){return e[n]!==void 0&&(t[n]=e[n]),t},{})}function al(){return document.createElement("div")}function Hh(e){return["Element","Fragment"].some(function(t){return Og(e,t)})}function DO(e){return Og(e,"NodeList")}function IO(e){return Og(e,"MouseEvent")}function NO(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function kO(e){return Hh(e)?[e]:DO(e)?yh(e):Array.isArray(e)?e:yh(document.querySelectorAll(e))}function ip(e,t){e.forEach(function(n){n&&(n.style.transitionDuration=t+"ms")})}function Qx(e,t){e.forEach(function(n){n&&n.setAttribute("data-state",t)})}function FO(e){var t,n=Ka(e),r=n[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function zO(e,t){var n=t.clientX,r=t.clientY;return e.every(function(i){var a=i.popperRect,o=i.popperState,s=i.props,l=s.interactiveBorder,u=OO(o.placement),c=o.modifiersData.offset;if(!c)return!0;var f=u==="bottom"?c.top.y:0,h=u==="top"?c.bottom.y:0,d=u==="right"?c.left.x:0,p=u==="left"?c.right.x:0,x=a.top-r+f>l,y=r-a.bottom-h>l,v=a.left-n+d>l,m=n-a.right-p>l;return x||y||v||m})}function ap(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){e[r](i,n)})}function Kx(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var vr={isTouch:!1},ew=0;function BO(){vr.isTouch||(vr.isTouch=!0,window.performance&&document.addEventListener("mousemove",GM))}function GM(){var e=performance.now();e-ew<20&&(vr.isTouch=!1,document.removeEventListener("mousemove",GM)),ew=e}function UO(){var e=document.activeElement;if(NO(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function GO(){document.addEventListener("touchstart",BO,la),window.addEventListener("blur",UO)}var VO=typeof window<"u"&&typeof document<"u",HO=VO?!!window.msCrypto:!1,WO={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},jO={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ir=Object.assign({appendTo:BM,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},WO,jO),XO=Object.keys(ir),qO=function(t){var n=Object.keys(t);n.forEach(function(r){ir[r]=t[r]})};function VM(e){var t=e.plugins||[],n=t.reduce(function(r,i){var a=i.name,o=i.defaultValue;if(a){var s;r[a]=e[a]!==void 0?e[a]:(s=ir[a])!=null?s:o}return r},{});return Object.assign({},e,n)}function YO(e,t){var n=t?Object.keys(VM(Object.assign({},ir,{plugins:t}))):XO,r=n.reduce(function(i,a){var o=(e.getAttribute("data-tippy-"+a)||"").trim();if(!o)return i;if(a==="content")i[a]=o;else try{i[a]=JSON.parse(o)}catch{i[a]=o}return i},{});return r}function tw(e,t){var n=Object.assign({},t,{content:UM(t.content,[e])},t.ignoreAttributes?{}:YO(e,t.plugins));return n.aria=Object.assign({},ir.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?t.interactive:n.aria.expanded,content:n.aria.content==="auto"?t.interactive?null:"describedby":n.aria.content},n}var $O=function(){return"innerHTML"};function rm(e,t){e[$O()]=t}function nw(e){var t=al();return e===!0?t.className=FM:(t.className=zM,Hh(e)?t.appendChild(e):rm(t,e)),t}function rw(e,t){Hh(t.content)?(rm(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?rm(e,t.content):e.textContent=t.content)}function im(e){var t=e.firstElementChild,n=yh(t.children);return{box:t,content:n.find(function(r){return r.classList.contains(kM)}),arrow:n.find(function(r){return r.classList.contains(FM)||r.classList.contains(zM)}),backdrop:n.find(function(r){return r.classList.contains(LO)})}}function HM(e){var t=al(),n=al();n.className=AO,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=al();r.className=kM,r.setAttribute("data-state","hidden"),rw(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props);function i(a,o){var s=im(t),l=s.box,u=s.content,c=s.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(a.content!==o.content||a.allowHTML!==o.allowHTML)&&rw(u,e.props),o.arrow?c?a.arrow!==o.arrow&&(l.removeChild(c),l.appendChild(nw(o.arrow))):l.appendChild(nw(o.arrow)):c&&l.removeChild(c)}return{popper:t,onUpdate:i}}HM.$$tippy=!0;var ZO=1,Oc=[],op=[];function JO(e,t){var n=tw(e,Object.assign({},ir,VM(Jx(t)))),r,i,a,o=!1,s=!1,l=!1,u=!1,c,f,h,d=[],p=$x(be,n.interactiveDebounce),x,y=ZO++,v=null,m=RO(n.plugins),w={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},g={id:y,reference:e,popper:al(),popperInstance:v,props:n,state:w,plugins:m,clearDelayTimeouts:ze,setProps:Te,setContent:k,show:ne,hide:me,hideWithInteractivity:Ce,enable:le,disable:Me,unmount:ge,destroy:$e};if(!n.render)return g;var _=n.render(g),b=_.popper,E=_.onUpdate;b.setAttribute("data-tippy-root",""),b.id="tippy-"+g.id,g.popper=b,e._tippy=g,b._tippy=g;var S=m.map(function(U){return U.fn(g)}),O=e.hasAttribute("aria-expanded");return T(),j(),Y(),z("onCreate",[g]),n.showOnCreate&&ve(),b.addEventListener("mouseenter",function(){g.props.interactive&&g.state.isVisible&&g.clearDelayTimeouts()}),b.addEventListener("mouseleave",function(){g.props.interactive&&g.props.trigger.indexOf("mouseenter")>=0&&B().addEventListener("mousemove",p)}),g;function D(){var U=g.props.touch;return Array.isArray(U)?U:[U,0]}function L(){return D()[0]==="hold"}function R(){var U;return!!((U=g.props.render)!=null&&U.$$tippy)}function N(){return x||e}function B(){var U=N().parentNode;return U?FO(U):document}function G(){return im(b)}function W(U){return g.state.isMounted&&!g.state.isVisible||vr.isTouch||c&&c.type==="focus"?0:rp(g.props.delay,U?0:1,ir.delay)}function Y(U){U===void 0&&(U=!1),b.style.pointerEvents=g.props.interactive&&!U?"":"none",b.style.zIndex=""+g.props.zIndex}function z(U,Q,ce){if(ce===void 0&&(ce=!0),S.forEach(function(Ae){Ae[U]&&Ae[U].apply(Ae,Q)}),ce){var _e;(_e=g.props)[U].apply(_e,Q)}}function V(){var U=g.props.aria;if(!!U.content){var Q="aria-"+U.content,ce=b.id,_e=Ka(g.props.triggerTarget||e);_e.forEach(function(Ae){var Ke=Ae.getAttribute(Q);if(g.state.isVisible)Ae.setAttribute(Q,Ke?Ke+" "+ce:ce);else{var bt=Ke&&Ke.replace(ce,"").trim();bt?Ae.setAttribute(Q,bt):Ae.removeAttribute(Q)}})}}function j(){if(!(O||!g.props.aria.expanded)){var U=Ka(g.props.triggerTarget||e);U.forEach(function(Q){g.props.interactive?Q.setAttribute("aria-expanded",g.state.isVisible&&Q===N()?"true":"false"):Q.removeAttribute("aria-expanded")})}}function q(){B().removeEventListener("mousemove",p),Oc=Oc.filter(function(U){return U!==p})}function K(U){if(!(vr.isTouch&&(l||U.type==="mousedown"))){var Q=U.composedPath&&U.composedPath()[0]||U.target;if(!(g.props.interactive&&Kx(b,Q))){if(Ka(g.props.triggerTarget||e).some(function(ce){return Kx(ce,Q)})){if(vr.isTouch||g.state.isVisible&&g.props.trigger.indexOf("click")>=0)return}else z("onClickOutside",[g,U]);g.props.hideOnClick===!0&&(g.clearDelayTimeouts(),g.hide(),s=!0,setTimeout(function(){s=!1}),g.state.isMounted||te())}}}function Pe(){l=!0}function H(){l=!1}function ue(){var U=B();U.addEventListener("mousedown",K,!0),U.addEventListener("touchend",K,la),U.addEventListener("touchstart",H,la),U.addEventListener("touchmove",Pe,la)}function te(){var U=B();U.removeEventListener("mousedown",K,!0),U.removeEventListener("touchend",K,la),U.removeEventListener("touchstart",H,la),U.removeEventListener("touchmove",Pe,la)}function de(U,Q){Ye(U,function(){!g.state.isVisible&&b.parentNode&&b.parentNode.contains(b)&&Q()})}function xe(U,Q){Ye(U,Q)}function Ye(U,Q){var ce=G().box;function _e(Ae){Ae.target===ce&&(ap(ce,"remove",_e),Q())}if(U===0)return Q();ap(ce,"remove",f),ap(ce,"add",_e),f=_e}function C(U,Q,ce){ce===void 0&&(ce=!1);var _e=Ka(g.props.triggerTarget||e);_e.forEach(function(Ae){Ae.addEventListener(U,Q,ce),d.push({node:Ae,eventType:U,handler:Q,options:ce})})}function T(){L()&&(C("touchstart",ee,{passive:!0}),C("touchend",pe,{passive:!0})),CO(g.props.trigger).forEach(function(U){if(U!=="manual")switch(C(U,ee),U){case"mouseenter":C("mouseleave",pe);break;case"focus":C(HO?"focusout":"blur",ae);break;case"focusin":C("focusout",ae);break}})}function $(){d.forEach(function(U){var Q=U.node,ce=U.eventType,_e=U.handler,Ae=U.options;Q.removeEventListener(ce,_e,Ae)}),d=[]}function ee(U){var Q,ce=!1;if(!(!g.state.isEnabled||we(U)||s)){var _e=((Q=c)==null?void 0:Q.type)==="focus";c=U,x=U.currentTarget,j(),!g.state.isVisible&&IO(U)&&Oc.forEach(function(Ae){return Ae(U)}),U.type==="click"&&(g.props.trigger.indexOf("mouseenter")<0||o)&&g.props.hideOnClick!==!1&&g.state.isVisible?ce=!0:ve(U),U.type==="click"&&(o=!ce),ce&&!_e&&I(U)}}function be(U){var Q=U.target,ce=N().contains(Q)||b.contains(Q);if(!(U.type==="mousemove"&&ce)){var _e=Ve().concat(b).map(function(Ae){var Ke,bt=Ae._tippy,Ln=(Ke=bt.popperInstance)==null?void 0:Ke.state;return Ln?{popperRect:Ae.getBoundingClientRect(),popperState:Ln,props:n}:null}).filter(Boolean);zO(_e,U)&&(q(),I(U))}}function pe(U){var Q=we(U)||g.props.trigger.indexOf("click")>=0&&o;if(!Q){if(g.props.interactive){g.hideWithInteractivity(U);return}I(U)}}function ae(U){g.props.trigger.indexOf("focusin")<0&&U.target!==N()||g.props.interactive&&U.relatedTarget&&b.contains(U.relatedTarget)||I(U)}function we(U){return vr.isTouch?L()!==U.type.indexOf("touch")>=0:!1}function Le(){Ue();var U=g.props,Q=U.popperOptions,ce=U.placement,_e=U.offset,Ae=U.getReferenceClientRect,Ke=U.moveTransition,bt=R()?im(b).arrow:null,Ln=Ae?{getBoundingClientRect:Ae,contextElement:Ae.contextElement||N()}:e,tn={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Rr){var Wn=Rr.state;if(R()){var ui=G(),ps=ui.box;["placement","reference-hidden","escaped"].forEach(function(qi){qi==="placement"?ps.setAttribute("data-placement",Wn.placement):Wn.attributes.popper["data-popper-"+qi]?ps.setAttribute("data-"+qi,""):ps.removeAttribute("data-"+qi)}),Wn.attributes.popper={}}}},Hn=[{name:"offset",options:{offset:_e}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Ke}},tn];R()&&bt&&Hn.push({name:"arrow",options:{element:bt,padding:3}}),Hn.push.apply(Hn,(Q==null?void 0:Q.modifiers)||[]),g.popperInstance=PO(Ln,b,Object.assign({},Q,{placement:ce,onFirstUpdate:h,modifiers:Hn}))}function Ue(){g.popperInstance&&(g.popperInstance.destroy(),g.popperInstance=null)}function ke(){var U=g.props.appendTo,Q,ce=N();g.props.interactive&&U===BM||U==="parent"?Q=ce.parentNode:Q=UM(U,[ce]),Q.contains(b)||Q.appendChild(b),g.state.isMounted=!0,Le()}function Ve(){return yh(b.querySelectorAll("[data-tippy-root]"))}function ve(U){g.clearDelayTimeouts(),U&&z("onTrigger",[g,U]),ue();var Q=W(!0),ce=D(),_e=ce[0],Ae=ce[1];vr.isTouch&&_e==="hold"&&Ae&&(Q=Ae),Q?r=setTimeout(function(){g.show()},Q):g.show()}function I(U){if(g.clearDelayTimeouts(),z("onUntrigger",[g,U]),!g.state.isVisible){te();return}if(!(g.props.trigger.indexOf("mouseenter")>=0&&g.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(U.type)>=0&&o)){var Q=W(!1);Q?i=setTimeout(function(){g.state.isVisible&&g.hide()},Q):a=requestAnimationFrame(function(){g.hide()})}}function le(){g.state.isEnabled=!0}function Me(){g.hide(),g.state.isEnabled=!1}function ze(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(a)}function Te(U){if(!g.state.isDestroyed){z("onBeforeUpdate",[g,U]),$();var Q=g.props,ce=tw(e,Object.assign({},Q,Jx(U),{ignoreAttributes:!0}));g.props=ce,T(),Q.interactiveDebounce!==ce.interactiveDebounce&&(q(),p=$x(be,ce.interactiveDebounce)),Q.triggerTarget&&!ce.triggerTarget?Ka(Q.triggerTarget).forEach(function(_e){_e.removeAttribute("aria-expanded")}):ce.triggerTarget&&e.removeAttribute("aria-expanded"),j(),Y(),E&&E(Q,ce),g.popperInstance&&(Le(),Ve().forEach(function(_e){requestAnimationFrame(_e._tippy.popperInstance.forceUpdate)})),z("onAfterUpdate",[g,U])}}function k(U){g.setProps({content:U})}function ne(){var U=g.state.isVisible,Q=g.state.isDestroyed,ce=!g.state.isEnabled,_e=vr.isTouch&&!g.props.touch,Ae=rp(g.props.duration,0,ir.duration);if(!(U||Q||ce||_e)&&!N().hasAttribute("disabled")&&(z("onShow",[g],!1),g.props.onShow(g)!==!1)){if(g.state.isVisible=!0,R()&&(b.style.visibility="visible"),Y(),ue(),g.state.isMounted||(b.style.transition="none"),R()){var Ke=G(),bt=Ke.box,Ln=Ke.content;ip([bt,Ln],0)}h=function(){var Hn;if(!(!g.state.isVisible||u)){if(u=!0,b.offsetHeight,b.style.transition=g.props.moveTransition,R()&&g.props.animation){var Xi=G(),Rr=Xi.box,Wn=Xi.content;ip([Rr,Wn],Ae),Qx([Rr,Wn],"visible")}V(),j(),Zx(op,g),(Hn=g.popperInstance)==null||Hn.forceUpdate(),z("onMount",[g]),g.props.animation&&R()&&xe(Ae,function(){g.state.isShown=!0,z("onShown",[g])})}},ke()}}function me(){var U=!g.state.isVisible,Q=g.state.isDestroyed,ce=!g.state.isEnabled,_e=rp(g.props.duration,1,ir.duration);if(!(U||Q||ce)&&(z("onHide",[g],!1),g.props.onHide(g)!==!1)){if(g.state.isVisible=!1,g.state.isShown=!1,u=!1,o=!1,R()&&(b.style.visibility="hidden"),q(),te(),Y(!0),R()){var Ae=G(),Ke=Ae.box,bt=Ae.content;g.props.animation&&(ip([Ke,bt],_e),Qx([Ke,bt],"hidden"))}V(),j(),g.props.animation?R()&&de(_e,g.unmount):g.unmount()}}function Ce(U){B().addEventListener("mousemove",p),Zx(Oc,p),p(U)}function ge(){g.state.isVisible&&g.hide(),g.state.isMounted&&(Ue(),Ve().forEach(function(U){U._tippy.unmount()}),b.parentNode&&b.parentNode.removeChild(b),op=op.filter(function(U){return U!==g}),g.state.isMounted=!1,z("onHidden",[g]))}function $e(){g.state.isDestroyed||(g.clearDelayTimeouts(),g.unmount(),$(),delete e._tippy,g.state.isDestroyed=!0,z("onDestroy",[g]))}}function Tu(e,t){t===void 0&&(t={});var n=ir.plugins.concat(t.plugins||[]);GO();var r=Object.assign({},t,{plugins:n}),i=kO(e),a=i.reduce(function(o,s){var l=s&&JO(s,r);return l&&o.push(l),o},[]);return Hh(e)?a[0]:a}Tu.defaultProps=ir;Tu.setDefaultProps=qO;Tu.currentInput=vr;Object.assign({},AM,{effect:function(t){var n=t.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});Tu.setDefaultProps({render:HM});var Dg={exports:{}},Wh={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QO=rn.exports,KO=Symbol.for("react.element"),eD=Symbol.for("react.fragment"),tD=Object.prototype.hasOwnProperty,nD=QO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rD={key:!0,ref:!0,__self:!0,__source:!0};function WM(e,t,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)tD.call(t,r)&&!rD.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:KO,type:e,key:a,ref:o,props:i,_owner:nD.current}}Wh.Fragment=eD;Wh.jsx=WM;Wh.jsxs=WM;(function(e){e.exports=Wh})(Dg);const pu=Dg.exports.jsx,iD=Dg.exports.jsxs;var iw={onClickMarker:function(e,t,n){},onDefocus:function(e){},onGlobeBackgroundTextureLoaded:function(){},onGlobeCloudsTextureLoaded:function(){},onGlobeTextureLoaded:function(){},onMouseOutMarker:function(e,t,n){},onMouseOverMarker:function(e,t,n){}},aD="https://raw.githubusercontent.com/chrisrzhou/react-globe/main/textures/clouds.png",oD="https://raw.githubusercontent.com/chrisrzhou/react-globe/main/textures/globe.jpg",sD=[1.29027,103.851959],Jc={ambientLightColor:"white",ambientLightIntensity:.8,cameraAutoRotateSpeed:.1,cameraDistanceRadiusScale:3,cameraMaxDistanceRadiusScale:100,cameraMaxPolarAngle:Math.PI,cameraMinPolarAngle:0,cameraRotateSpeed:.2,cameraZoomSpeed:1,enableCameraAutoRotate:!0,enableCameraRotate:!0,enableCameraZoom:!0,enableDefocus:!0,enableGlobeGlow:!0,enableMarkerGlow:!0,enableMarkerTooltip:!0,focusAnimationDuration:1e3,focusDistanceRadiusScale:1.5,focusEasingFunction:["Cubic","Out"],globeCloudsOpacity:.3,globeGlowCoefficient:.1,globeGlowColor:"#d1d1d1",globeGlowPower:3,globeGlowRadiusScale:.2,markerEnterAnimationDuration:1e3,markerEnterEasingFunction:["Linear","None"],markerExitAnimationDuration:500,markerExitEasingFunction:["Cubic","Out"],markerGlowCoefficient:0,markerGlowPower:3,markerGlowRadiusScale:2,markerOffsetRadiusScale:0,markerRadiusScaleRange:[.005,.02],markerRenderer:null,markerTooltipRenderer:function(e){return JSON.stringify(e.coordinates)},markerType:"dot",pointLightColor:"white",pointLightIntensity:1,pointLightPositionRadiusScales:[-2,1,-1]};function jM(){return(jM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dc(e,t){var n=e[0]*Math.PI/180,r=(e[1]-180)*Math.PI/180;return[-t*Math.cos(n)*Math.cos(r),t*Math.sin(n),t*Math.cos(n)*Math.sin(r)]}function sp(e,t){var n=jM({},t);return Object.keys(n).forEach(function(r){var i=e[r];n[r]=i===void 0?n[r]:i}),n}function Ic(e){var t=e.to,n=e.animationDuration,r=e.easingFunction,i=e.onUpdate,a=e.onEnd,o=a===void 0?null:a,s=e.delay,l=s===void 0?0:s,u=r[0],c=r[1];new Jn(e.from).to(t,n).easing($s[u][c]).on("update",i).on("complete",o).delay(l).start()}var lD=function(){function e(n){this.element=n,this.instance=Tu([n],{animation:"scale",arrow:!1})[0]}var t=e.prototype;return t.destroy=function(){this.instance.destroy()},t.hide=function(){document.body.style.cursor="inherit",this.element.style.position="fixed",this.element.style.left="0",this.element.style.top="0",this.instance.hide()},t.show=function(n,r,i){document.body.style.cursor="pointer",this.element.style.position="fixed",this.element.style.left=n+10+"px",this.element.style.top=r+10+"px",this.instance.setContent(i),this.instance.show()},e}(),uD=function(){function e(n){var r,i,a,o=n.canvasElement,s=n.initialCameraDistanceRadiusScale,l=s===void 0?Jc.cameraDistanceRadiusScale:s,u=n.initialCoordinates,c=u===void 0?sD:u,f=n.textures,h=f===void 0?{}:f,d=n.tooltipElement;this.callbacks=iw,this.focus=null,this.isLocked=!1,this.markers=[],this.options=Jc,this.textures=h,this.previousFocus=null,this.tooltip=new lD(d),this.renderer=new pg({alpha:!0,antialias:!0,canvas:o}),this.camera=function(p,x){var y=new wt;y.name="camera",y.far=3e5,y.fov=45,y.near=1;var v=Dc(p,300*x);return y.position.set(v[0],v[1],v[2]),y}(c,l),this.earth=function(){var p=new ot;p.geometry=new Xr(300,50,50),p.name="earth";var x=new ot;x.geometry=new Xr(301,50,50),x.name="clouds";var y=new ot;return y.name="background",y.geometry=new Xr(3e4,50,50),{clouds:x,globe:p,background:y}}(),this.lights=(r=new rh("white"),i=new Ql("white"),r.name="ambientLight",i.name="pointLight",{ambient:r,point:i}),this.markerObjects=((a=new Go).name="markers",a),this.orbitControls=new fu(this.camera,this.renderer.domElement),this.scene=function(p){var x=p.camera,y=p.earth,v=p.lights,m=p.markerObjects,w=p.renderer,g=p.defocus,_=new Sl;return x.add(v.ambient),x.add(v.point),_.add(x),_.add(y.globe),_.add(m),new MR(w,_,x),_.on("click",g),_}({camera:this.camera,earth:this.earth,lights:this.lights,markerObjects:this.markerObjects,renderer:this.renderer,defocus:this.defocus.bind(this)}),this.updateOptions(),this.updateCallbacks(),this.updateMarkers()}var t=e.prototype;return t.animate=function(){this.render(),this.animationFrameId=requestAnimationFrame(this.animate.bind(this))},t.animateClouds=function(){var n=this;["x","y","z"].forEach(function(r){n.earth.clouds.rotation[r]+=Math.random()/1e4})},t.applyAnimations=function(n){var r=this,i=0,a=[];return n.forEach(function(o,s){var l=o.coordinates,u=o.focusAnimationDuration,c={focusAnimationDuration:u,focusDistanceRadiusScale:o.focusDistanceRadiusScale,focusEasingFunction:o.focusEasingFunction},f=s===n.length-1,h=setTimeout(function(){r.unlock(),r.updateFocus(l,c,f)},i);a.push(h),i+=u}),function(){a.forEach(function(o){clearTimeout(o)})}},t.defocus=function(){!this.isLocked&&this.previousFocus&&this.options.enableDefocus&&(this.updateFocus(null),this.callbacks.onDefocus(this.previousFocus))},t.destroy=function(){cancelAnimationFrame(this.animationFrameId),this.tooltip.destroy(),this.renderer.domElement.remove()},t.lock=function(){this.isLocked=!0,this.orbitControls.enabled=!1,this.orbitControls.autoRotate=!1},t.render=function(){this.renderer.sortObjects=!1,this.renderer.render(this.scene,this.camera),this.orbitControls.update(),this.animateClouds(),MS()},t.resize=function(n){var r=n.height,i=n.width;this.renderer.setSize(i,r),this.camera.aspect=i/r,this.camera.updateProjectionMatrix(),this.render()},t.saveFocus=function(n){this.previousFocus=n},t.unlock=function(){this.isLocked=!1,this.orbitControls.enabled=!0,this.orbitControls.autoRotate=!0},t.updateCallbacks=function(n){n===void 0&&(n={}),this.callbacks=sp(n,iw)},t.updateFocus=function(n,r,i){r===void 0&&(r={}),i===void 0&&(i=!0),this.isLocked||(this.focus=n,function(a,o,s){var l=s.options,u=s.previousFocus,c=s.shouldUnlockAfterFocus,f=s.lock,h=s.unlock,d=s.saveFocus,p=l.cameraDistanceRadiusScale,x=l.focusAnimationDuration,y=l.focusEasingFunction;if(a){var v=[o.position.x,o.position.y,o.position.z],m=Dc(a,300*l.focusDistanceRadiusScale);d(a),f(),Ic({from:v,to:m,animationDuration:x,easingFunction:y,onUpdate:function(){o.position.set(v[0],v[1],v[2])},onEnd:function(){c&&h()}})}else if(u){var w=[o.position.x,o.position.y,o.position.z],g=Dc(u,300*p);f(),Ic({from:w,to:g,animationDuration:x,easingFunction:y,onUpdate:function(){o.position.set(w[0],w[1],w[2])},onEnd:function(){d(null),h()}})}}(this.focus,this.camera,{shouldUnlockAfterFocus:i,options:sp(r,this.options),previousFocus:this.previousFocus,lock:this.lock.bind(this),unlock:this.unlock.bind(this),saveFocus:this.saveFocus.bind(this)}))},t.updateMarkers=function(n){var r=this;n===void 0&&(n=[]),this.markers=n,function(i,a){var o=a.callbacks,s=a.markers,l=a.options,u=l.markerExitAnimationDuration,c=l.markerExitEasingFunction,f=l.markerRadiusScaleRange,h=s.map(function(v){return v.value}),d=new Set(s.map(function(v){return v.id})),p=f[0],x=f[1],y=bM().domain([Math.min.apply(null,h),Math.max.apply(null,h)]).range([300*p,300*x]);s.forEach(function(v){var m=v.id,w=y(v.value),g=i.children.find(function(_){return _.marker.id===v.id});g||((g=function(_,b,E){var S,O,D=b.enableMarkerGlow,L=b.markerEnterAnimationDuration,R=b.markerEnterEasingFunction,N=b.markerGlowCoefficient,B=b.markerGlowPower,G=b.markerGlowRadiusScale,W=b.markerOffsetRadiusScale,Y=b.markerRenderer,z=b.markerType;if(Y)O=Y(_);else{var V=_.color||"gold",j={size:0},q={size:E},K=new ot;Ic({from:j,to:q,animationDuration:L,easingFunction:R,onUpdate:function(){switch(z){case"bar":K.geometry=new D1(3,3,j.size),K.material=new Yr({color:V});break;case"dot":default:if(K.geometry=new Xr(j.size,10,10),K.material=new Qt({color:V}),D){var H=Ex(K.geometry,{backside:!1,coefficient:N,color:V,power:B,size:j.size*G});K.children=[],K.add(H)}}}}),O=K}var Pe=Dc(_.coordinates,300+(W?300*W:z==="dot"?E*(1+G)/2:0));return(S=O.position).set.apply(S,Pe),O.lookAt(new A(0,0,0)),O.name=_.id,O}(v,l,w)).name=m,i.add(g)),g.marker=v}),i.children.forEach(function(v){if(!d.has(v.marker.id)){var m=v.scale.toArray();Ic({from:m,to:[0,0,0],animationDuration:u,easingFunction:c,onUpdate:function(){var w;v&&(w=v.scale).set.apply(w,m)},onEnd:function(){i.remove(v)}})}(function(w,g){var _=w.marker;w._listeners={},w.on("click",function(b){g.onClickMarker(_,w,b.data.originalEvent)}),w.on("mousemove",function(b){g.onMouseOverMarker(_,w,b.data.originalEvent)}),w.on("mouseout",function(b){g.onMouseOutMarker(_,w,b.data.originalEvent)})})(v,o)})}(this.markerObjects,{options:this.options,markers:n,callbacks:{onClickMarker:function(i,a,o){r.updateFocus(i.coordinates),r.callbacks.onClickMarker(i,a,o)},onMouseOutMarker:function(i,a,o){r.tooltip.hide(),r.callbacks.onMouseOutMarker(i,a,o)},onMouseOverMarker:function(i,a,o){r.options.enableMarkerTooltip&&r.tooltip.show(o.clientX,o.clientY,r.options.markerTooltipRenderer(a.marker)),r.callbacks.onMouseOverMarker(i,a,o)}}})},t.updateOptions=function(n){n===void 0&&(n={}),this.options=sp(n,Jc),function(r,i){var a=i.callbacks,o=i.options,s=i.textures,l=o.globeCloudsOpacity,u=a.onGlobeBackgroundTextureLoaded,c=a.onGlobeCloudsTextureLoaded,f=a.onGlobeTextureLoaded,h=s.globeBackgroundTexture,d=h===void 0?"https://raw.githubusercontent.com/chrisrzhou/react-globe/main/textures/background.png":h,p=s.globeCloudsTexture,x=p===void 0?aD:p,y=s.globeTexture,v=y===void 0?oD:y,m=r.clouds,w=r.globe,g=r.glow,_=r.background;o.enableGlobeGlow&&((g=Ex(w.geometry,{backside:!0,coefficient:o.globeGlowCoefficient,color:o.globeGlowColor,power:o.globeGlowPower,size:300*o.globeGlowRadiusScale})).name="glow"),v&&new Ao().load(v,function(b){w.material=new Yr({map:b}),w.remove(w.getObjectByName("glow")),w.add(g),f()},function(){},f),d&&(new Ao().load(d,function(b){_.material=new Qt({map:b,side:Et}),u()},function(){},u),w.remove(w.getObjectByName("background")),w.add(_)),x&&(new Ao().load(x,function(b){m.material=new Yr({map:b,transparent:!0}),m.material.opacity=l,c()},function(){},c),w.remove(w.getObjectByName("clouds")),w.add(m))}(this.earth,{callbacks:this.callbacks,options:this.options,textures:this.textures}),function(r,i){var a=i.ambientLightIntensity,o=i.pointLightColor,s=i.pointLightIntensity,l=i.pointLightPositionRadiusScales,u=r.ambient,c=r.point,f=l[0],h=l[1],d=l[2];u.color=new he(i.ambientLightColor),u.intensity=a,c.color=new he(o),c.intensity=s,c.position.set(300*f,300*h,300*d)}(this.lights,this.options),function(r,i){var a=i.cameraAutoRotateSpeed,o=i.cameraMaxDistanceRadiusScale,s=i.cameraMaxPolarAngle,l=i.cameraMinPolarAngle,u=i.cameraRotateSpeed,c=i.cameraZoomSpeed,f=i.enableCameraRotate,h=i.enableCameraZoom;r.autoRotate=i.enableCameraAutoRotate,r.autoRotateSpeed=a,r.dampingFactor=.1,r.enableDamping=!0,r.enablePan=!1,r.enableRotate=f,r.enableZoom=h,r.maxDistance=300*o,r.maxPolarAngle=s,r.minDistance=330,r.minPolarAngle=l,r.rotateSpeed=u,r.zoomSpeed=c}(this.orbitControls,this.options),this.updateFocus.bind(this,this.focus),this.updateMarkers.bind(this,this.markers)},e}();function cD(e){var t=e.animations,n=t===void 0?[]:t,r=e.focus,i=e.height,a=i===void 0?"100%":i,o=e.globeBackgroundTexture,s=e.globeCloudsTexture,l=e.globeTexture,u=e.initialCameraDistanceRadiusScale,c=e.initialCoordinates,f=e.markers,h=e.options,d=h===void 0?Jc:h,p=e.width,x=p===void 0?"100%":p,y=e.onClickMarker,v=e.onDefocus,m=e.onGetGlobe,w=e.onGlobeBackgroundTextureLoaded,g=e.onGlobeCloudsTextureLoaded,_=e.onGlobeTextureLoaded,b=e.onMouseOutMarker,E=e.onMouseOverMarker,S=rn.exports.useRef(null),O=rn.exports.useRef(null),D=rn.exports.useRef(null),L=rn.exports.useRef(null);return rn.exports.useEffect(function(){var R=new uD({canvasElement:S.current,initialCameraDistanceRadiusScale:u||d.cameraDistanceRadiusScale,initialCoordinates:c,textures:{globeBackgroundTexture:o,globeCloudsTexture:s,globeTexture:l},tooltipElement:D.current});return R.animate(),L.current=R,m&&m(R),function(){return R.destroy()}},[o,s,l,u,d.cameraDistanceRadiusScale,c,m]),rn.exports.useEffect(function(){var R,N,B,G=L.current;return R=O.current,N=G.resize.bind(G),(B=new xC(function(W){if(W&&W.length!==0){var Y=W[0].contentRect;N({height:Y.height,width:Y.width})}})).observe(R),function(){return B.unobserve(R)}},[]),rn.exports.useEffect(function(){L.current.updateCallbacks({onClickMarker:y,onDefocus:v,onGlobeBackgroundTextureLoaded:w,onGlobeCloudsTextureLoaded:g,onGlobeTextureLoaded:_,onMouseOutMarker:b,onMouseOverMarker:E})},[y,v,w,g,_,b,E]),rn.exports.useEffect(function(){L.current.updateOptions(d)},[d]),rn.exports.useEffect(function(){L.current.updateMarkers(f)},[f]),rn.exports.useEffect(function(){L.current.updateFocus(r)},[r]),rn.exports.useEffect(function(){return L.current.applyAnimations(n)},[n]),iD("div",{ref:O,style:{height:a,width:x},children:[pu("canvas",{ref:S}),pu("div",{ref:D})]})}const aw="#fcffbe";function fD(e){const t=Math.max(e.value/20,1),n=new Xr(t,10,10),r=new Qt({color:new he(aw)}),i=new ot(n,r),a=new Ql(aw,1,0,0);return i.children=[],i.add(a),i}const hD={markerRenderer:fD};function dD(){return pu("div",{className:"",children:pu(cD,{height:"100vh",globeTexture:"https://raw.githubusercontent.com/chrisrzhou/react-globe/main/textures/globe_dark.jpg",width:"100vw",options:hD})})}const pD=document.getElementById("root");pw.exports.render(pu(dD,{}),pD)});export default vD();
